;---------------------------------------------------------------------------
; ここからは必殺技のステ?ト
;---------------------------------------------------------------------------
; アイントリガ?弱

[Statedef 1000]
type     = S
movetype = A
physics  = S
juggle   = 0
poweradd = 50
velset   = 0,0
anim     = 1001;1000
ctrl     = 0
sprpriority = 2
facep2 = 1

[state 1000, VarSet];先行入力初期化
type = varset
trigger1 = time = 0
var(31) = 0

[state 1000, VarSet];先行入力初期化
type = varset
trigger1 = time = 0
var(32) = 0

[state 1000, VarSet]
type = varset
trigger1 = time = 0
var(17) = 0

[State 1000, 音を鳴らす]
type = PlaySnd
triggerall = var(7) = 0
trigger1 = AnimElem = 2
value = s10+(var(7)*10),22
channel = 10

[State 1000, 音を鳴らす]
type = PlaySnd
triggerall = var(7) = 1
trigger1 = AnimElem = 2
value = s10+(var(7)*10),6
channel = 10

[State 1000, ヘルパ?を出す]
type = Helper
trigger1 = AnimElem = 4
name = "AT01"
stateno = 1005
ID = 1005
helpertype = normal
pos = 50,-50
postype = p1
facing = 1
keyctrl = 0
ownpal = 1

[State 1000,]
type = ChangeState
triggerall = var(59) != 1 || var(59) = 1 && var(57) <= 2
triggerall = command = "弱?ニッツスパイク" || command = "強?ニッツスパイク"
trigger1 = AnimElemtime(6) >= 0 && AnimElemtime(8) < 0
value = 1040

[State 1000,]
type = ChangeState
triggerall = var(59) != 1 || var(59) = 1 && var(57) <= 2
triggerall = command = "a"
triggerall = command = "holdfwd"
trigger1 = AnimElemtime(6) >= 0 && AnimElemtime(8) < 0
value = ifelse(var(7)=1,1011,1010)

[State 1000,]
type = ChangeState
triggerall = var(59) != 1 || var(59) = 1 && var(57) <= 2
triggerall = command = "b"
triggerall = command = "holdfwd"
trigger1 = AnimElemtime(6) >= 0 && AnimElemtime(8) < 0
value = ifelse(var(7)=1,1025,1020)

[State 1000,]
type = ChangeState
triggerall = var(59) != 1 || var(59) = 1 && var(57) <= 2
triggerall = command = "a"
triggerall = command = "holdback"
trigger1 = AnimElemtime(6) >= 0 && AnimElemtime(8) < 0
value = 1300

[State 1000,]
type = ChangeState
triggerall = var(59) != 1 || var(59) = 1 && var(57) <= 2
triggerall = command = "b"
triggerall = command = "holdback"
trigger1 = AnimElemtime(6) >= 0 && AnimElemtime(8) < 0
value = 1350

;セカンドシェル(AI)
[State 1000,]
type = ChangeState
triggerall = var(59) = 1
triggerall = RoundState = 2
triggerall =!Enemy,NumProj
triggerall = EnemyNear(var(58)),StateType != L
triggerall = EnemyNear(var(58)),StateNo != [5100,5129]
triggerall = AnimElemtime(6) >= 0 && AnimElemtime(8) < 0
trigger1 = P2BodyDist X > 25
trigger1 = EnemyNear(var(58)),StateType = A
trigger1 = EnemyNear(var(58)),MoveType != H
trigger1 = EnemyNear(var(58)),Vel X > 0
trigger1 = EnemyNear(var(58)),facing != facing
trigger1 = P2BodyDist Y >= -160-EnemyNear(var(58)),Vel Y*8
trigger1 = Random <= ((var(57) * 12.5) * var(56))
trigger1 = Random <= 600 || var(57) >= 8
trigger2 = P2BodyDist X = [-5,50]
trigger2 = EnemyNear(var(58)),MoveType = H
trigger2 = EnemyNear(var(58)),StateType = A || EnemyNear(var(58)),StateNo != [120,159]
trigger3 = EnemyNear(var(58)),Stateno = 5608
trigger3 = EnemyNear(var(58)),MoveType = H
value = ifelse(var(7)=1,1025,1020)
ctrl = 0

;ブラックアウト(AI起き攻め)
[State 1000,]
type = ChangeState
triggerall = var(59) = 1
triggerall = RoundState = 2
triggerall =!EnemyNear(var(58)),HitDefAttr = SCA, NT, ST, HT
triggerall = AnimElemtime(6) >= 0 && AnimElemtime(8) < 0
trigger1 = Abs(EnemyNear(var(58)),Pos X - Pos X) < 150
trigger1 = EnemyNear(var(58)),StateNo = [5120,5129]
trigger1 = EnemyNear(var(58)),BackEdgeBodyDist > 40
trigger1 = random <= var(57) * 125
trigger1 = Random <= 300
value = ifelse(Random < 500,1300,1350)
ctrl = 0

;ブラックアウト(AI)
[State 1000,]
type = ChangeState
triggerall = var(59) = 1
triggerall = RoundState = 2
triggerall =!EnemyNear(var(58)),HitDefAttr = SCA, NT, ST, HT
triggerall = AnimElemtime(6) >= 0 && AnimElemtime(8) < 0
trigger1 = Abs(EnemyNear(var(58)),Pos X - Pos X) < 90 && EnemyNear(var(58)),Vel X >= 0
trigger1 = EnemyNear(var(58)),MoveType != H
trigger1 =!EnemyNear(var(58)),Ctrl
trigger1 = EnemyNear(var(58)),StateNo != [120,159]
trigger1 = EnemyNear(var(58)),StateNo != [5120,5129]
trigger1 = EnemyNear(var(58)),BackEdgeBodyDist > 40
trigger1 = random <= var(57) * 125
trigger1 = Random <= 600
value = 1350
ctrl = 0

;セカンドスパイク(AI)
[State 1000,]
type = ChangeState
triggerall = var(59) = 1
triggerall = RoundState = 2
triggerall = AnimElemtime(6) >= 0 && AnimElemtime(8) < 0
triggerall = FrontEdgeBodyDist > 60
triggerall = Helper(1005),movehit
trigger1 = P2BodyDist X = [50,140]
trigger1 = EnemyNear(var(58)),MoveType = H
trigger1 = EnemyNear(var(58)),StateNo != [120,159]
value = 1040
ctrl = 0

;セカンドシュ?ト(AI)
[State 1000,]
type = ChangeState
triggerall = var(59) = 1
triggerall = RoundState = 2
triggerall = AnimElemtime(6) >= 0 && AnimElemtime(8) < 0
;triggerall = FrontEdgeBodyDist > 60
trigger1 = P2BodyDist X > 140
trigger1 = Enemy(var(58)),StateType != A
trigger2 = P2BodyDist X > 140
trigger2 = EnemyNear(var(58)),StateType = A
trigger2 = EnemyNear(var(58)),MoveType = H
trigger3 = EnemyNear(var(58)),StateType = A
trigger3 = EnemyNear(var(58)),MoveType != H
trigger3 = EnemyNear(var(58)),Vel X < 0
trigger4 = P2BodyDist X >= 50
trigger4 = EnemyNear(var(58)),MoveType = H
trigger5 = Helper(1005),moveguarded
value = ifelse(var(7)=1,1011,1010)
ctrl = 0

[State 1000, ステ?ト変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
[Statedef 1005]
type     = S
movetype = A
physics  = N
ctrl     = 0
anim     = 1005
sprpriority = 5

[State 1001, 特殊効果]
type = AssertSpecial
trigger1 = 1
flag = NoShadow ;影を消す

[State -2, AirGuard]
type = AssertSpecial
triggerall = root,var(20) >= 1
trigger1 = p2statetype = A
flag = unguardable

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = time = 0
value = s12,1

[State 200, ヒット定?]
type = HitDef
triggerall = root,var(12) = 0
trigger1 = time = 0
attr = A, SP
damage    = floor(80*root,fvar(5)), 10
getpower  = 120,120
givepower = 10,10
animtype = Hard
guardflag = MA
hitflag = MA
priority = 4, Hit
pausetime = 0,10+root,var(0)
sparkno = 202
guard.sparkno = s10012+(root,var(11)*10000)
sparkxy = -15, -20
hitsound = s1,1+(root,var(11)*10)
guardsound = s2,1+(root,var(11)*10)
ground.type = High
ground.slidetime = 20
ground.hittime  = 21
ground.velocity = -4.5,-6.5
airguard.velocity = -4,-2
yaccel = .45
air.type = High
air.velocity = -4.5,-6.5
fall = 1
fall.recover = 0
palfx.time = 30
palfx.add = 30,-40,-140
palfx.sinadd = 60,60,50,10
palfx.color = 0
palfx.invertall = 1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0

[State 3000]
type = Projectile
trigger1 = time = 0
projID = 1005
projanim = 1006
projremove = 0
projpriority = 2
projhitanim = -1
projremanim = -1
projsprpriority = 0
projshadow = 0,0,0
projremovetime = 20
offset = 0,0
velocity = 0,0

;ヒット判定
[State 1000, ]
type = ParentVarSet
trigger1 = movehit = 1
var(17) = 1

;ヒット数測定
[State 1000, ]
type = ParentVaradd
trigger1 = movehit = 1
fvar(1) = 1

;ガ?ドクラッシュ値削り
[state a]
type = parentvaradd
trigger1 = moveguarded = 1
fvar(10) = 16

;ガ?ドクラッシュ値回復不?時間
[State 1000, 0]
type = parentvarset
triggerall = fvar(11) != 180
triggerall = roundstate = 2
trigger1 = moveguarded = 1
fvar(11) = 180

;スロ?処理
[State 1000, ヘルパ?を出す]
type = Helper
trigger1 = Movehit = 1
name = "Slow"
stateno = 4900
ID = 4900
helpertype = normal
pos = 0,0
postype = p1
keyctrl = 0
ownpal = 1
ignorehitpause = 1
persistent = 0

;燃え小エフェクト
[State 1000, ヘルパ?を出す]
type = null;Helper
trigger1 = movehit = 1
name = "hit"
stateno = 101000
ID = 101000
helpertype = normal
pos = 0,0
postype = p2
keyctrl = 0
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 1001, このヘルパ?を消す]
type = DestroySelf
trigger1 = AnimTime = 0
trigger2 = Root,Anim = 1015 && Root,AnimElem = 4
trigger3 = Root,Anim = 1030 && Root,AnimElem = 4

;---------------------------------------------------------------------------
;セカンドシュ?ト弱

[Statedef 1010]
type     = S
movetype = A
physics  = S
juggle   = 0
poweradd = 50
velset   = 0,0
anim     = 1010
ctrl     = 0
sprpriority = 2

[State 1000, 音を鳴らす]
type = PlaySnd
triggerall = var(7) = 0
trigger1 = AnimElem = 4
value = s10+(var(7)*10),23
channel = 10

[State 1000, 音を鳴らす]
type = PlaySnd
triggerall = var(7) = 1
trigger1 = AnimElem = 4
value = s10+(var(7)*10),7
channel = 10

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 4
value = s12,2

[State 6000, 3]
type = StateTypeSet
trigger1 = AnimElem = 3
statetype = A

[State 6000, 3]
type = StateTypeSet
trigger1 = AnimElem = 11
statetype = S

[State 700, エフェクト?示]
type = Explod
trigger1 = AnimElem = 4
anim = 1011
postype = P1
pos = 50, -60
sprpriority = 5
ownpal = 1

[State 1000,4]
type = helper
trigger1 = AnimElem = 4
stateno = 1015
id = 1010
name = "Proj"
pos = 80,-55
postype = P1
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 1000, ステ?ト変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;セカンドシュ?ト弱(K-BLOOD)

[Statedef 1011]
type     = S
movetype = A
physics  = S
juggle   = 0
poweradd = 50
velset   = 0,0
anim     = 1060
ctrl     = 0
sprpriority = 2

[State 1000, 音を鳴らす]
type = PlaySnd
triggerall = var(7) = 0
trigger1 = AnimElem = 4
value = s10+(var(7)*10),23
channel = 10

[State 1000, 音を鳴らす]
type = PlaySnd
triggerall = var(7) = 1
trigger1 = AnimElem = 4
value = s10+(var(7)*10),7
channel = 10

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 5
value = s12,2

[State 6000, 3]
type = StateTypeSet
trigger1 = AnimElem = 3
statetype = A

[State 6000, 3]
type = StateTypeSet
trigger1 = AnimElem = 11
statetype = S

[State 700, エフェクト?示]
type = Explod
trigger1 = AnimElem = 5
anim = 1011
postype = P1
pos = 50, -60
sprpriority = 5
ownpal = 1

[State 1000,4]
type = helper
trigger1 = AnimElem = 5
stateno = 1015
id = 1010
name = "Proj"
pos = 80,-55
postype = P1
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 1000, ステ?ト変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;(HELPER)セカンドシュ?ト・ヘルパ?
[Statedef 1015]
type     = A
movetype = A
physics  = N
ctrl     = 0
anim     = 1015
sprpriority = 5

[State 170, 無敵]
type = NotHitBy
trigger1 = 1
value = SCA

[State 1001, 特殊効果]
type = AssertSpecial
trigger1 = 1
flag = NoShadow ;影を消す

[State -2, AirGuard]
type = AssertSpecial
triggerall = root,var(20) >= 1
trigger1 = p2statetype = A
flag = unguardable

[state a]
type = velset
trigger1 = time = 0
x = 4

[State 200, ヒット定?]
type = HitDef
triggerall = root,var(12) = 0
trigger1 = 1
attr = A, SP
damage    = floor(ifelse(root,var(17),40,80)*root,fvar(5)),10
getpower  = 120,120
givepower = 10,10
animtype = Hard
guardflag = MA
hitflag = MAF
priority = 4, Hit
pausetime = 0,10+root,var(0)
sparkno = 202
guard.sparkno = s10012+(root,var(11)*10000)
sparkxy = 20,0
hitsound = s1,1+(root,var(11)*10)
guardsound = s2,1+(root,var(11)*10)
ground.type = High
ground.hittime = 17
ground.slidetime = 17
ground.velocity = -9
air.velocity = -3.6,-3.8
yaccel = .35
air.fall = 1
fall.recover = 0
palfx.time = 35
palfx.add = 30,-40,-140
palfx.sinadd = 60,60,50,10
palfx.color = 0
palfx.invertall = 1

[State 3000]
type = Projectile
trigger1 = time = 0
projID = 1010
projanim = 1017
projremove = 1
projpriority = 1
projhitanim = -1
projremanim = -1
projsprpriority = 0
projshadow = 0,0,0
projremovetime = -1
offset = 0,0
velocity = vel X, vel Y

;ヒット数測定
[State 1000, ]
type = ParentVaradd
trigger1 = movehit = 1
fvar(1) = 1

;ガ?ドクラッシュ値削り
[state a]
type = parentvaradd
trigger1 = moveguarded = 1
fvar(10) = 16

;ガ?ドクラッシュ値回復不?時間
[State 1000, 0]
type = ParentVarSet
triggerall = fvar(11) != 180
triggerall = roundstate = 2
trigger1 = moveguarded = 1
fvar(11) = 180

;ジャグル設定
[State 1000, Juggle]
type = ParentVarSet
trigger1 = p2statetype = A
trigger1 = movehit
var(12) = 2

;スロ?処理
[State 1000, ヘルパ?を出す]
type = Helper
trigger1 = Movehit = 1
name = "Slow"
stateno = 4900
ID = 4900
helpertype = normal
pos = 0,0
postype = p1
keyctrl = 0
ownpal = 1
ignorehitpause = 1
persistent = 0

;燃え小エフェクト
[State 1000, ヘルパ?を出す]
type = null;Helper
trigger1 = movehit = 1
name = "hit"
stateno = 101000
ID = 101000
helpertype = normal
pos = 0,0
postype = p2
keyctrl = 0
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 1001, このヘルパ?を消す]
type = DestroySelf
trigger1 = time >= 300
trigger2 = frontedgedist <= -80

[State 200, 7]
type = changestate
trigger1 = movecontact
trigger2 = root,numprojID(1010) = 0
value = 1016

;---------------------------------------------------------------------------
; ヘルパ?消滅

[Statedef 1016]
type     = A
movetype = I
physics  = N
juggle   = 0
poweradd = 0
velset   = 0,0
anim     = 1016
ctrl     = 0
sprpriority = 5

[State 170, 無敵]
type = NotHitBy
trigger1 = 1
value = SCA

[State 191, 特殊効果]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 1001, このヘルパ?を消す]
type = DestroySelf
trigger1 = AnimTime = 0

;---------------------------------------------------------------------------
;セカンドシェル

[Statedef 1020]
type     = S
movetype = A
physics  = S
juggle   = ifelse(var(12),31,(ifelse(var(13),31,1)))
poweradd = 50
velset   = 0,0
anim     = 1020
ctrl     = 0
sprpriority = 2

[State 1000, 音を鳴らす]
type = PlaySnd
triggerall = var(7) = 0
trigger1 = AnimElem = 3
value = s10+(var(7)*10),24
channel = 10

[State 1000, 音を鳴らす]
type = PlaySnd
triggerall = var(7) = 1
trigger1 = AnimElem = 3
value = s10+(var(7)*10),8
channel = 10

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 4
value = s12,2

[State 700, エフェクト?示]
type = Explod
trigger1 = AnimElem = 5
anim = 1025
postype = p1
offset = 100,-165
sprpriority = 3
removetime = 25
bindtime = 1
ownpal = 1

[State 200, ヒット定?]
type = HitDef
trigger1 = time = 0
attr = S, SA
damage    = ifelse(var(17),40,80), 0
getpower  = 120,120
givepower = 10,10
animtype = up
guardflag = MA
hitflag = MAF
priority = 4, Hit
pausetime = 5, 8
sparkno = 202
guard.sparkno = s10012+(var(11)*10000)
sparkxy = -15, -95
hitsound = s1,3+(var(11)*10)
guardsound = s2,1+(var(11)*10)
ground.type = High
ground.slidetime = 20
ground.hittime  = 21
ground.velocity = -1.5,-10.1
airguard.velocity = -3.2,-4.2
air.type = High
air.velocity = -1.5,-10.1
fall = 1
fall.recover = 0
palfx.time = 70
palfx.add = 30,-40,-140
palfx.sinadd = 60,60,50,10
palfx.color = 0
palfx.invertall = 1

;燃え小エフェクト
[State 1000, ヘルパ?を出す]
type = null;Helper
trigger1 = movehit = 1
name = "hit"
stateno = 101000
ID = 101000
helpertype = normal
pos = 0,0
postype = p2
keyctrl = 0
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 1000, ステ?ト変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;セカンドシェル(K-BLOOD)

[Statedef 1025]
type     = S
movetype = A
physics  = S
juggle   = ifelse(var(12),31,(ifelse(var(13),31,1)))
poweradd = 50
velset   = 0,0
anim     = 1070
ctrl     = 0
sprpriority = 2

[State 1000, 音を鳴らす]
type = PlaySnd
triggerall = var(7) = 0
trigger1 = AnimElem = 3
value = s10+(var(7)*10),24
channel = 10

[State 1000, 音を鳴らす]
type = PlaySnd
triggerall = var(7) = 1
trigger1 = AnimElem = 3
value = s10+(var(7)*10),8
channel = 10

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 4
value = s12,2

[State 700, エフェクト?示]
type = Explod
trigger1 = AnimElem = 4
anim = 1075
postype = P1
pos = 66, -88
sprpriority = 5
ownpal = 1
scale = 1,1.25
vel = 1,-1
accel = -.032,.045

[State 200, ヒット定?]
type = HitDef
trigger1 = time = 0
attr = S, SA
damage    = ifelse(var(17),40,80), 0
getpower  = 120,120
givepower = 10,10
animtype = up
guardflag = MA
hitflag = MAF
priority = 4, Hit
pausetime = 5, 8
sparkno = 202
guard.sparkno = s10012+(var(11)*10000)
sparkxy = -15, -95
hitsound = s1,3+(var(11)*10)
guardsound = s2,1+(var(11)*10)
ground.type = High
ground.slidetime = 20
ground.hittime  = 21
ground.velocity = -1.5,-10.1
airguard.velocity = -3.2,-4.2
air.type = High
air.velocity = -1.5,-10.1
fall = 1
fall.recover = 0
palfx.time = 70
palfx.add = 30,-40,-140
palfx.sinadd = 60,60,50,10
palfx.color = 0
palfx.invertall = 1

;燃え小エフェクト
[State 1000, ヘルパ?を出す]
type = null;Helper
trigger1 = movehit = 1
name = "hit"
stateno = 101000
ID = 101000
helpertype = normal
pos = 0,0
postype = p2
keyctrl = 0
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 1000, ステ?ト変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; セカンドスパイク

[Statedef 1040]
type     = A
movetype = A
physics  = N
juggle   = ifelse(var(12),31,1)
poweradd = 50
velset   = 0,0
anim     = 1040
ctrl     = 0
sprpriority = 2

[State 1000, 音を鳴らす]
type = PlaySnd
triggerall = var(7) = 0
trigger1 = AnimElem = 1
value = s10,27
channel = 10

[State 1000, 音を鳴らす]
type = PlaySnd
triggerall = var(7) = 1
trigger1 = AnimElem = 1
value = s20,8
channel = 10

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 1
value = s12,9

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 3
value = s12,2

[State 0, Explod]
type = Explod
trigger1 = animelemtime(3) = 0
anim = 1041
ID = 1041
pos = 0,0
postype = p1
bindtime = -1
scale = 1,1
sprpriority = 5
ownpal = 1
removeongethit = 1
ignorehitpause = 0

[State 0, Explod]
type = Explod
trigger1 = animelemtime(3) = 1
anim = 1042
ID = 1042
pos = 0,0
postype = p1
bindtime = -1
scale = 1,1
sprpriority = 5
ownpal = 1
removeongethit = 1
ignorehitpause = 0

[State 1001, 3]
type = VelSet
trigger1 = AnimElem = 1
x = 6
y = -4

[State 1001, 4]
type = VelAdd
trigger1 = AnimElem = 1 > 0
y = .28

[State 1200, movetype]
type = StateTypeSet
trigger1 = AnimElem = 11
movetype = I

[State 200, ヒット定?]
type = HitDef
trigger1 = time = 0
attr = A, SA
damage    = ifelse(var(17),50,100), 0
getpower  = 150,150
givepower = 10,10
animtype = Diagup
guardflag = MA
hitflag = MAF
priority = 4, Hit
pausetime = 10, 11
sparkno = 202
guard.sparkno = s10012+(var(11)*10000)
sparkxy = -15, -75
hitsound = s1,4+(var(11)*10)
guardsound = s2,1+(var(11)*10)
ground.type = High
ground.slidetime = 20
ground.hittime  = 21
ground.velocity = -6,-6
airguard.velocity = -3.8,-3.3
air.type = High
air.velocity = -6,-6
fall = 1
fall.recover = 0
palfx.time = 60
palfx.add = 30,-40,-140
palfx.sinadd = 60,60,50,10
palfx.color = 0
palfx.invertall = 1
envshake.time = 10
envshake.ampl = 2
envshake.freq = 100

;燃え小エフェクト
[State 1000, ヘルパ?を出す]
type = null;Helper
trigger1 = movehit = 1
name = "hit"
stateno = 101000
ID = 101000
helpertype = normal
pos = 0,0
postype = p2
keyctrl = 0
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 1000, ステ?ト変更]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= Helper(100000),var(0)
value = 1201

;---------------------------------------------------------------------------
; アイントリガ?強

[Statedef 1050]
type     = S
movetype = A
physics  = S
juggle   = 0
poweradd = 50
velset   = 0,0
anim     = 1051;1050
ctrl     = 0
sprpriority = 2
facep2 = 1

[state 1000, VarSet];先行入力初期化
type = varset
trigger1 = time = 0
var(31) = 0

[state 1000, VarSet];先行入力初期化
type = varset
trigger1 = time = 0
var(32) = 0

[state 1000, VarSet]
type = varset
trigger1 = time = 0
var(17) = 0

[State 1000, 音を鳴らす]
type = PlaySnd
triggerall = var(7) = 0
trigger1 = AnimElem = 2
value = s10+(var(7)*10),22
channel = 10

[State 1000, 音を鳴らす]
type = PlaySnd
triggerall = var(7) = 1
trigger1 = AnimElem = 2
value = s10+(var(7)*10),6
channel = 10

[State 1000, ヘルパ?を出す]
type = Helper
trigger1 = AnimElem = 4
name = "AT01"
stateno = 1055
ID = 1005
helpertype = normal
pos = 50,-50
postype = p1
facing = 1
keyctrl = 0
ownpal = 1

[State 1000,]
type = ChangeState
triggerall = var(59) != 1 || var(59) = 1 && var(57) <= 2
triggerall = command = "弱?ニッツスパイク" | command = "強?ニッツスパイク"
trigger1 = AnimElemtime(6) >= 0 && AnimElemtime(8) < 0
value = 1040

[State 1000,]
type = ChangeState
triggerall = var(59) != 1 || var(59) = 1 && var(57) <= 2
triggerall = command = "a"
triggerall = command = "holdfwd"
trigger1 = AnimElemtime(7) >= 0 && AnimElemtime(8) <= 3
value = ifelse(var(7)=1,1061,1060)

[State 1000,]
type = ChangeState
triggerall = var(59) != 1 || var(59) = 1 && var(57) <= 2
triggerall = command = "b"
triggerall = command = "holdfwd"
trigger1 = AnimElemtime(7) >= 0 && AnimElemtime(8) <= 3
value = ifelse(var(7)=1,1025,1020)

[State 1000,]
type = ChangeState
triggerall = var(59) != 1 || var(59) = 1 && var(57) <= 2
triggerall = command = "a"
triggerall = command = "holdback"
trigger1 = AnimElemtime(7) >= 0 && AnimElemtime(8) <= 3
value = 1300

[State 1000,]
type = ChangeState
triggerall = var(59) != 1 || var(59) = 1 && var(57) <= 2
triggerall = command = "b"
triggerall = command = "holdback"
trigger1 = AnimElemtime(7) >= 0 && AnimElemtime(8) <= 3
value = 1350

;セカンドシェル(AI)
[State 1000,]
type = ChangeState
triggerall = var(59) = 1
triggerall = RoundState = 2
triggerall =!Enemy,NumProj
triggerall = EnemyNear(var(58)),StateType != L
triggerall = EnemyNear(var(58)),StateNo != [5100,5129]
triggerall = AnimElemtime(6) >= 0 && AnimElemtime(8) < 0
trigger1 = P2BodyDist X > 25
trigger1 = EnemyNear(var(58)),StateType = A
trigger1 = EnemyNear(var(58)),MoveType != H
trigger1 = EnemyNear(var(58)),Vel X > 0
trigger1 = EnemyNear(var(58)),facing != facing
trigger1 = P2BodyDist Y >= -160-EnemyNear(var(58)),Vel Y*8
trigger1 = Random <= ((var(57) * 12.5) * var(56))
trigger1 = Random <= 600 || var(57) >= 8
trigger2 = P2BodyDist X = [-5,50]
trigger2 = EnemyNear(var(58)),MoveType = H
trigger2 = EnemyNear(var(58)),StateType = A || EnemyNear(var(58)),StateNo != [120,159]
trigger3 = EnemyNear(var(58)),Stateno = 5608
trigger3 = EnemyNear(var(58)),MoveType = H
value = ifelse(var(7)=1,1025,1020)
ctrl = 0

;ブラックアウト(AI起き攻め)
[State 1000,]
type = ChangeState
triggerall = var(59) = 1
triggerall = RoundState = 2
triggerall =!EnemyNear(var(58)),HitDefAttr = SCA, NT, ST, HT
triggerall = AnimElemtime(6) >= 0 && AnimElemtime(8) < 0
trigger1 = Abs(EnemyNear(var(58)),Pos X - Pos X) < 150
trigger1 = EnemyNear(var(58)),StateNo = [5120,5129]
trigger1 = EnemyNear(var(58)),BackEdgeBodyDist > 40
trigger1 = random <= var(57) * 125
trigger1 = Random <= 300
value = ifelse(Random < 500,1300,1350)
ctrl = 0

;ブラックアウト(AI)
[State 1000,]
type = ChangeState
triggerall = var(59) = 1
triggerall = RoundState = 2
triggerall =!EnemyNear(var(58)),HitDefAttr = SCA, NT, ST, HT
triggerall = AnimElemtime(6) >= 0 && AnimElemtime(8) < 0
trigger1 = Abs(EnemyNear(var(58)),Pos X - Pos X) < 90 && EnemyNear(var(58)),Vel X >= 0
trigger1 = EnemyNear(var(58)),MoveType != H
trigger1 =!EnemyNear(var(58)),Ctrl
trigger1 = EnemyNear(var(58)),StateNo != [120,159]
trigger1 = EnemyNear(var(58)),StateNo != [5120,5129]
trigger1 = EnemyNear(var(58)),BackEdgeBodyDist > 40
trigger1 = random <= var(57) * 125
trigger1 = Random <= 600
value = 1350
ctrl = 0

;セカンドスパイク(AI)
[State 1000,]
type = ChangeState
triggerall = var(59) = 1
triggerall = RoundState = 2
triggerall = AnimElemtime(6) >= 0 && AnimElemtime(8) < 0
triggerall = FrontEdgeBodyDist > 60
triggerall = Helper(1005),movehit
trigger1 = P2BodyDist X = [50,140]
trigger1 = EnemyNear(var(58)),MoveType = H
trigger1 = EnemyNear(var(58)),StateNo != [120,159]
value = 1040
ctrl = 0

;セカンドシュ?ト(AI)
[State 1000,]
type = ChangeState
triggerall = var(59) = 1
triggerall = RoundState = 2
triggerall = AnimElemtime(6) >= 0 && AnimElemtime(8) < 0
;triggerall = FrontEdgeBodyDist > 60
trigger1 = P2BodyDist X > 140
trigger1 = Enemy(var(58)),StateType != A
trigger2 = P2BodyDist X > 140
trigger2 = EnemyNear(var(58)),StateType = A
trigger2 = EnemyNear(var(58)),MoveType = H
trigger3 = EnemyNear(var(58)),StateType = A
trigger3 = EnemyNear(var(58)),MoveType != H
trigger3 = EnemyNear(var(58)),Vel X < 0
trigger4 = P2BodyDist X >= 50
trigger4 = EnemyNear(var(58)),MoveType = H
trigger5 = Helper(1005),moveguarded
value = ifelse(var(7)=1,1061,1060)
ctrl = 0

[State 1000, ステ?ト変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
[Statedef 1055]
type     = S
movetype = A
physics  = N
ctrl     = 0
anim     = 1005
sprpriority = 5

[State 1001, 特殊効果]
type = AssertSpecial
trigger1 = 1
flag = NoShadow ;影を消す

[State -2, AirGuard]
type = AssertSpecial
triggerall = root,var(20) >= 1
trigger1 = p2statetype = A
flag = unguardable

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = time = 0
value = s12,1

[State 200, ヒット定?]
type = HitDef
triggerall = root,var(12) = 0
trigger1 = time = 0
attr = A, SP
damage    = floor(80*root,fvar(5)), 10
getpower  = 120,120
givepower = 10,10
animtype = Hard
guardflag = MA
hitflag = MA
priority = 4, Hit
pausetime = 0,10+root,var(0)
sparkno = 202
guard.sparkno = s10012+(root,var(11)*10000)
sparkxy = -15, -20
hitsound = s1,1+(root,var(11)*10)
guardsound = s2,1+(root,var(11)*10)
ground.type = High
ground.slidetime = 20
ground.hittime  = 21
ground.velocity = -5.5
airguard.velocity = -3,-2
air.type = High
air.velocity = -3.4,-3.8
air.fall = 1
fall.recover = 0
palfx.time = 30
palfx.add = 30,-40,-140
palfx.sinadd = 60,60,50,10
palfx.color = 0
palfx.invertall = 1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0

[State 3000]
type = Projectile
trigger1 = time = 0
projID = 1005
projanim = 1006
projremove = 0
projpriority = 2
projhitanim = -1
projremanim = -1
projsprpriority = 0
projshadow = 0,0,0
projremovetime = 20
offset = 0,0
velocity = 0,0

;ヒット判定
[State 1000, ]
type = ParentVarSet
trigger1 = movehit = 1
var(17) = 1

;ヒット数測定
[State 1000, ]
type = ParentVaradd
trigger1 = movehit = 1
fvar(1) = 1

;ガ?ドクラッシュ値削り
[state a]
type = parentvaradd
trigger1 = moveguarded = 1
fvar(10) = 16

;ガ?ドクラッシュ値回復不?時間
[State 1000, 0]
type = parentvarset
triggerall = fvar(11) != 180
triggerall = roundstate = 2
trigger1 = moveguarded = 1
fvar(11) = 180

;スロ?処理
[State 1000, ヘルパ?を出す]
type = Helper
trigger1 = Movehit = 1
name = "Slow"
stateno = 4900
ID = 4900
helpertype = normal
pos = 0,0
postype = p1
keyctrl = 0
ownpal = 1
ignorehitpause = 1
persistent = 0

;燃え小エフェクト
[State 1000, ヘルパ?を出す]
type = null;Helper
trigger1 = movehit = 1
name = "hit"
stateno = 101000
ID = 101000
helpertype = normal
pos = 0,0
postype = p2
keyctrl = 0
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 1001, このヘルパ?を消す]
type = DestroySelf
trigger1 = AnimTime = 0
trigger2 = Root,Anim = 1015 && Root,AnimElem = 4
trigger3 = Root,Anim = 1030 && Root,AnimElem = 4

;---------------------------------------------------------------------------
;セカンドシュ?ト強

[Statedef 1060]
type     = S
movetype = A
physics  = S
juggle   = ifelse(var(12),31,1)
poweradd = 50
velset   = 0,0
anim     = 1010
ctrl     = 0
sprpriority = 2

[State 1000, 音を鳴らす]
type = PlaySnd
triggerall = var(7) = 0
trigger1 = AnimElem = 4
value = s10+(var(7)*10),23
channel = 10

[State 1000, 音を鳴らす]
type = PlaySnd
triggerall = var(7) = 1
trigger1 = AnimElem = 4
value = s10+(var(7)*10),7
channel = 10

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 5
value = s12,2

[State 6000, 3]
type = StateTypeSet
trigger1 = AnimElem = 3
statetype = A

[State 6000, 3]
type = StateTypeSet
trigger1 = AnimElem = 11
statetype = S

[State 700, エフェクト?示]
type = Explod
trigger1 = AnimElem = 4
anim = 1011
postype = P1
pos = 50, -60
sprpriority = 5
ownpal = 1

[State 1000,4]
type = helper
trigger1 = AnimElem = 4
stateno = 1065
id = 1010
name = "Proj"
pos = 80,-55
postype = P1
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 1000, ステ?ト変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;セカンドシュ?ト強(K-BLOOD)

[Statedef 1061]
type     = S
movetype = A
physics  = S
juggle   = ifelse(var(12),31,1)
poweradd = 50
velset   = 0,0
anim     = 1060
ctrl     = 0
sprpriority = 2

[State 1000, 音を鳴らす]
type = PlaySnd
triggerall = var(7) = 0
trigger1 = AnimElem = 4
value = s10+(var(7)*10),23
channel = 10

[State 1000, 音を鳴らす]
type = PlaySnd
triggerall = var(7) = 1
trigger1 = AnimElem = 4
value = s10+(var(7)*10),7
channel = 10

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 5
value = s12,2

[State 6000, 3]
type = StateTypeSet
trigger1 = AnimElem = 3
statetype = A

[State 6000, 3]
type = StateTypeSet
trigger1 = AnimElem = 11
statetype = S

[State 700, エフェクト?示]
type = Explod
trigger1 = AnimElem = 5
anim = 1011
postype = P1
pos = 50, -60
sprpriority = 5
ownpal = 1

[State 1000,4]
type = helper
trigger1 = AnimElem = 5
stateno = 1065
id = 1010
name = "Proj"
pos = 80,-55
postype = P1
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 1000, ステ?ト変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;(HELPER)セカンドシュ?ト・ヘルパ?
[Statedef 1065]
type     = A
movetype = A
physics  = N
ctrl     = 0
anim     = 1015
sprpriority = 5

[State 170, 無敵]
type = NotHitBy
trigger1 = 1
value = SCA

[State 1001, 特殊効果]
type = AssertSpecial
trigger1 = 1
flag = NoShadow ;影を消す

[State -2, AirGuard]
type = AssertSpecial
triggerall = root,var(20) >= 1
trigger1 = p2statetype = A
flag = unguardable

[state a]
type = velset
trigger1 = time = 0
x = 8

[State 200, ヒット定?]
type = HitDef
triggerall = root,var(12) = 0
trigger1 = 1
attr = A, SP
damage    = floor(ifelse(root,var(17),40,80)*root,fvar(5)),10
getpower  = 120,120
givepower = 10,10
animtype = Hard
guardflag = MA
hitflag = MAF
priority = 4, Hit
pausetime = 0,10+root,var(0)
sparkno = 202
guard.sparkno = s10012+(root,var(11)*10000)
sparkxy = 20,0
hitsound = s1,1+(root,var(11)*10)
guardsound = s2,1+(root,var(11)*10)
ground.type = High
ground.hittime = 17
ground.slidetime = 17
ground.velocity = -9
air.velocity = -3.6,-3.8
yaccel = .35
air.fall = 1
fall.recover = 0
palfx.time = 35
palfx.add = 30,-40,-140
palfx.sinadd = 60,60,50,10
palfx.color = 0
palfx.invertall = 1

[State 3000]
type = Projectile
trigger1 = time = 0
projID = 1010
projanim = 1017
projremove = 1
projpriority = 1
projhitanim = -1
projremanim = -1
projsprpriority = 0
projshadow = 0,0,0
projremovetime = -1
offset = 0,0
velocity = vel X, vel Y

;ヒット数測定
[State 1000, ]
type = ParentVaradd
trigger1 = movehit = 1
fvar(1) = 1

;ガ?ドクラッシュ値削り
[state a]
type = parentvaradd
trigger1 = moveguarded = 1
fvar(10) = 16

;ガ?ドクラッシュ値回復不?時間
[State 1000, 0]
type = ParentVarSet
triggerall = fvar(11) != 180
triggerall = roundstate = 2
trigger1 = moveguarded = 1
fvar(11) = 180

;ジャグル設定
[State 1000, Juggle]
type = ParentVarSet
trigger1 = p2statetype = A
trigger1 = movehit
var(12) = 2

;スロ?処理
[State 1000, ヘルパ?を出す]
type = Helper
trigger1 = Movehit = 1
name = "Slow"
stateno = 4900
ID = 4900
helpertype = normal
pos = 0,0
postype = p1
keyctrl = 0
ownpal = 1
ignorehitpause = 1
persistent = 0

;燃え小エフェクト
[State 1000, ヘルパ?を出す]
type = null;Helper
trigger1 = movehit = 1
name = "hit"
stateno = 101000
ID = 101000
helpertype = normal
pos = 0,0
postype = p2
keyctrl = 0
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 1001, このヘルパ?を消す]
type = DestroySelf
trigger1 = time >= 300
trigger2 = frontedgedist <= -80

[State 200, 7]
type = changestate
trigger1 = movecontact
trigger2 = root,numprojID(1010) = 0
value = 1016

;---------------------------------------------------------------------------
; クロウバイツ弱

[Statedef 1100]
type     = S
movetype = A
physics  = S
juggle   = ifelse(var(12),31,1)
poweradd = 50
velset   = 0,0
anim     = 1100
ctrl     = 0
sprpriority = 2
facep2 = 1

[state 1000, VarSet];先行入力初期化
type = varset
trigger1 = time = 0
var(31) = 0

[state 1000, VarSet];先行入力初期化
type = varset
trigger1 = time = 0
var(32) = 0

[State 170, 無敵]
type = NotHitBy
trigger1 = time = 0
value = SCA
time = 10

[State 1000, 音を鳴らす]
type = PlaySnd
triggerall = var(7) = 0
trigger1 = AnimElem = 2
value = s10+(var(7)*10),26
channel = 10

[State 1000, 音を鳴らす]
type = PlaySnd
triggerall = var(7) = 1
trigger1 = AnimElem = 2
value = s10+(var(7)*10),3
channel = 10

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 2
value = s12,4

[State 700, エフェクト?示]
type = Explod
trigger1 = AnimElem = 4
anim = 1110
postype = P1
pos = -25, -10
persistent = 0
sprpriority = 3
ownpal = 1
bindtime = 10
supermove = 1
ignorehitpause = 0
removeongethit = 1

[State 700, エフェクト?示]
type = Explod
trigger1 = AnimElem = 4
anim = 1115
postype = P1
pos = -15,10
persistent = 0
sprpriority = 5
ownpal = 1
bindtime = 10
supermove = 1
ignorehitpause = 0
removeongethit = 1

[State 1000, ]
type = Posadd
trigger1 = AnimElem = 6
x = 15

[State 1000, ]
type = Posadd
trigger1 = AnimElem = 7
x = 15

[State 1000, ]
type = Velset
trigger1 = AnimElem = 6
x = 2
y = -5.5

[State 1000, ]
type = Veladd
trigger1 = AnimElemtime(6) > 0
y = .48

[State 6000, 3]
type = StateTypeSet
trigger1 = AnimElem = 6
statetype = A

[State 200, ヒット定?]
type = HitDef
trigger1 = AnimElem = 3
attr = A, SA
damage    = ifelse(movecontact,35,70),10
getpower  = 105,105
givepower = 10,10
animtype = Hard
guardflag = MA
hitflag = MAF
priority = 4, Hit
pausetime = 11, 13
sparkno = 202
guard.sparkno = s10012+(var(11)*10000)
sparkxy = -15, -75
hitsound = s1,1+(var(11)*10)
guardsound = s2,1+(var(11)*10)
ground.type = High
ground.slidetime = 20
ground.hittime  = 21
ground.velocity = -2,-5.6
airguard.velocity = -4,-2
air.type = High
air.velocity = -2,-5.6
fall = 1
fall.recover = 0
palfx.time = 60
palfx.add = 30,-40,-140
palfx.sinadd = 60,60,50,10
palfx.color = 0
palfx.invertall = 1

[State 200, ヒット定?]
type = HitDef
trigger1 = AnimElem = 5
attr = A, SA
damage    = ifelse(movecontact,35,70),10
getpower  = 105,105
givepower = 10,10
animtype = up
guardflag = MA
hitflag = MAF
priority = 4, Hit
pausetime = 11, 13
sparkno = 202
guard.sparkno = s10012+(var(11)*10000)
sparkxy = -15, -75
hitsound = s1,1+(var(11)*10)
guardsound = s2,1+(var(11)*10)
ground.type = High
ground.slidetime = 20
ground.hittime  = 21
ground.velocity = -2,-8.8
airguard.velocity = -4,-2
air.type = High
air.velocity = -2,-8.8
yaccel = .45
fall = 1
fall.recover = 0
palfx.time = 80
palfx.add = 30,-40,-140
palfx.sinadd = 60,60,50,10
palfx.color = 0
palfx.invertall = 1

;燃え小エフェクト
[State 1000, ヘルパ?を出す]
type = null;Helper
trigger1 = movehit = 1
name = "hit"
stateno = 101000
ID = 101000
helpertype = normal
pos = 0,0
postype = p2
keyctrl = 0
ownpal = 1

[State 1000, ステ?ト変更]
type = ChangeState
triggerall = AnimElemtime(11) >= 0
trigger1 = Vel Y > 0 && Pos Y >= Helper(100000),var(0)
value = 1105

;---------------------------------------------------------------------------
;着地

[Statedef 1105]
type     = S
movetype = I
physics  = S
juggle   = 0
poweradd = 0
velset   = 0,0
anim     = 1105
ctrl     = 0
sprpriority = 2

[State 300,]
type = AfterImage
trigger1 = time = 0
time = 1

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = time = 0
value = s4,0+(var(11)*10)

[State 1000,]
type = Posset
trigger1 = time = 0
y = Helper(100000),var(0)

[State 1000, 軸位置移動]
type = Velset
trigger1 = time = 0
x = 0
y = 0

[State 1000, ステ?ト変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; クロウバイツ強

[Statedef 1150]
type     = S
movetype = A
physics  = N
juggle   = ifelse(var(12),31,1)
poweradd = 50
velset   = 0,0
anim     = 1150
ctrl     = 0
sprpriority = 2
facep2 = 1

[state 1000, VarSet];先行入力初期化
type = varset
trigger1 = time = 0
var(31) = 0

[state 1000, VarSet];先行入力初期化
type = varset
trigger1 = time = 0
var(32) = 0

[State -2]
type = VarSet
trigger1 = time = 0
var(16) = 0

[State 170, 無敵]
type = NotHitBy
trigger1 = time = 0
value = SCA
time = 23

[State 810, 物理的なキャラの幅]
type = Width
trigger1 = 1
edge = 20,0

[State 1000, 音を鳴らす]
type = PlaySnd
triggerall = var(7) = 0
trigger1 = AnimElem = 2
value = s10+(var(7)*10),26
channel = 10

[State 1000, 音を鳴らす]
type = PlaySnd
triggerall = var(7) = 1
trigger1 = AnimElem = 2
value = s10+(var(7)*10),4
channel = 10

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 2
value = s12,4

[State 700, エフェクト?示]
type = Explod
trigger1 = AnimElem = 4
anim = 1110
postype = P1
pos = -25, -10
persistent = 0
sprpriority = 3
ownpal = 1
bindtime = -1
supermove = 1
ignorehitpause = 0
removeongethit = 1
ID = 1150

[State 700, エフェクト?示]
type = Explod
trigger1 = AnimElem = 4
anim = 1115
postype = P1
pos = -15,10
persistent = 0
sprpriority = 5
ownpal = 1
bindtime = -1
supermove = 1
ignorehitpause = 0
removeongethit = 1
ID = 1150

[State 1000, ]
type = Posadd
trigger1 = AnimElem = 6
x = 15

[State 1000, ]
type = Posadd
trigger1 = AnimElem = 7
x = 15

[State 1000, ]
type = Velset
trigger1 = AnimElem = 3
x = 2

[State 1000, ]
type = Velset
trigger1 = AnimElem = 6
x = 5.3
y = -9.0

[State 1000, ]
type = Veladd
trigger1 = AnimElemtime(6) > 0
y = .42

[State 6000, 3]
type = StateTypeSet
trigger1 = AnimElem = 6
statetype = A

[State 200, ヒット定?]
type = HitDef
trigger1 = AnimElem = 3
attr = A, SA
damage    = ifelse(movecontact,30,60),10
getpower  = 90,90
givepower = 10,10
animtype = Hard
guardflag = MA
hitflag = MAF
priority = 4, Hit
pausetime = 11, 13
sparkno = 202
guard.sparkno = s10012+(var(11)*10000)
sparkxy = -15, -40
hitsound = s1,1+(var(11)*10)
guardsound = s2,1+(var(11)*10)
ground.type = Low
ground.slidetime = 20
ground.hittime  = 21
ground.velocity = -3.2
airguard.velocity = -3,-3.8
air.type = High
air.velocity = -3.2,-3.8
air.fall = 1
fall.recover = 0
palfx.time = 30
palfx.add = 30,-40,-140
palfx.sinadd = 60,60,50,10
palfx.color = 0
palfx.invertall = 1

[State 200, ヒット定?]
type = HitDef
trigger1 = AnimElem = 5
attr = A, SA
damage    = ifelse(movecontact,30,60),10
getpower  = 90,90
givepower = 10,10
animtype = Hard
guardflag = MA
hitflag = MAF
priority = 4, Hit
pausetime = 11, 13
sparkno = 202
guard.sparkno = s10012+(var(11)*10000)
sparkxy = -15, -40
hitsound = s1,1+(var(11)*10)
guardsound = s2,1+(var(11)*10)
ground.type = High
ground.slidetime = 20
ground.hittime  = 21
ground.velocity = -3.2
airguard.velocity = -3,-3.8
air.type = High
air.velocity = -3.2,-3.8
air.fall = 1
fall.recover = 0
palfx.time = 30
palfx.add = 30,-40,-140
palfx.sinadd = 60,60,50,10
palfx.color = 0
palfx.invertall = 1

[State 200, ヒット定?]
type = HitDef
trigger1 = AnimElem = 6
attr = A, SA
damage    = ifelse(movecontact,30,60),10
getpower  = 90,90
givepower = 10,10
animtype = up
guardflag = MA
hitflag = MAF
priority = 4, Hit
pausetime = 11, 13
sparkno = 202
guard.sparkno = s10012+(var(11)*10000)
sparkxy = -15, -75
hitsound = s1,1+(var(11)*10)
guardsound = s2,1+(var(11)*10)
ground.type = High
ground.slidetime = 20
ground.hittime  = 21
ground.velocity = -4.8,-8.8
airguard.velocity = -3,-3.8
air.type = High
air.velocity = -4.8,-8.8
fall = 1
fall.recover = 0
palfx.time = 80
palfx.add = 30,-40,-140
palfx.sinadd = 60,60,50,10
palfx.color = 0
palfx.invertall = 1

;燃え小エフェクト
[State 1000, ヘルパ?を出す]
type = null;Helper
trigger1 = movehit = 1
name = "hit"
stateno = 101000
ID = 101000
helpertype = normal
pos = 0,0
postype = p2
keyctrl = 0
ownpal = 1

;強 クロウバイツ追加
[State 1000]
type = VarSet
v = 16
value = 1
triggerall = var(59) != 1
triggerall = AnimElemtime(6) >= 0 && AnimElemtime(10) < 4
trigger1 = command = "a"
trigger1 = command = "holdfwd"
trigger2 = command = "b"
trigger2 = command = "holdfwd"

[State 1000];追加
type = ChangeState
triggerall = (animelem=10,>0 && animelem=10,<4)
trigger1 = var(59) != 1
trigger1 = var(16) = 1
trigger2 = var(59) = 1
trigger2 = movehit
trigger2 = enemynear,movetype = H
value = 1160
ctrl = 0

[State 1000, ステ?ト変更]
type = ChangeState
triggerall = AnimElemtime(11) >= 0
trigger1 = Vel Y > 0 && Pos Y >= Helper(100000),var(0)
value = 1155

;---------------------------------------------------------------------------
; クロウバイツ強?追撃

[Statedef 1160]
type     = A
movetype = A
physics  = N
juggle   = 0
poweradd = 50
anim     = 1160
ctrl     = 0
sprpriority = 2

[State -2]
type = VarSet
trigger1 = time = 0
var(16) = 0

[State 1000, 音を鳴らす]
type = PlaySnd
triggerall = var(7) = 0
trigger1 = AnimElem = 4
value = s10+(var(7)*10),44
channel = 10

[State 1000, 音を鳴らす]
type = PlaySnd
triggerall = var(7) = 1
trigger1 = AnimElem = 4
value = s10+(var(7)*10),11
channel = 10

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 4
value = s12,2

[State 700, エフェクト?示]
type = Explod
trigger1 = AnimElem = 3
anim = 1165
postype = P1
pos = 0, 0
persistent = 0
sprpriority = 5
ownpal = 1
supermove = 1
ignorehitpause = 0
removeongethit = 1

[State 1000, ]
type = Veladd
trigger1 = time >= 0
y = .4

[State 200, ヒット定?]
type = HitDef
trigger1 = time = 0
attr = A, SA
damage    = 30,10
getpower  = 45,45
givepower = 10,10
animtype = up
guardflag = MA
hitflag = MAF
priority = 4, Hit
pausetime = 12, 19
sparkno = 202
guard.sparkno = s10012+(var(11)*10000)
sparkxy = -15, -70
hitsound = s1,4+(var(11)*10)
guardsound = s2,1+(var(11)*10)
ground.type = High
ground.slidetime = 20
ground.hittime  = 21
ground.velocity = -8,14
airguard.velocity = -3.7,-3.5
air.type = High
air.velocity = -8,14
fall = 1
fall.recover = 0
palfx.time = 50
palfx.add = 30,-40,-140
palfx.sinadd = 60,60,50,10
palfx.color = 0
palfx.invertall = 1
fall.envshake.ampl = 5
fall.envshake.freq = 100
fall.envshake.time = 10
;p2stateno = ifelse(p2statetype = A,5635,5630)

;燃え小エフェクト
[State 1000, ヘルパ?を出す]
type = null;Helper
trigger1 = movehit = 1
name = "hit"
stateno = 101000
ID = 101000
helpertype = normal
pos = 0,0
postype = p2
keyctrl = 0
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 1000, ステ?ト変更]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= Helper(100000),var(0)
value = 1155

;---------------------------------------------------------------------------
;着地

[Statedef 1155]
type     = S
movetype = I
physics  = S
juggle   = 0
poweradd = 0
velset   = 0,0
anim     = 1155
ctrl     = 0
sprpriority = 2

[State 300,]
type = AfterImage
trigger1 = time = 0
time = 1

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = time = 0
value = s4,0+(var(11)*10)

[State 1000,]
type = Posset
trigger1 = time = 0
y = Helper(100000),var(0)

[State 1000, 軸位置移動]
type = Velset
trigger1 = time = 0
x = 0
y = 0

[State 1000, ステ?ト変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; ?ニッツスパイク弱

[Statedef 1200]
type     = S
movetype = A
physics  = N
juggle   = ifelse(var(12),31,(ifelse(var(13)=2,31,1)))
poweradd = 50
velset   = 0,0
anim     = 1200
ctrl     = 0
sprpriority = 2
facep2 = 1

[state 1000, VarSet];先行入力初期化
type = varset
trigger1 = time = 0
var(31) = 0

[state 1000, VarSet];先行入力初期化
type = varset
trigger1 = time = 0
var(32) = 0

[State 1200, Narrow]
type = VarSet
trigger1 = time = 0
var(16) = 0

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = animelem = 11
movetype = I

[State 1000, 音を鳴らす]
type = PlaySnd
triggerall = var(7) = 0
trigger1 = AnimElem = 2
value = s10,27
channel = 10

[State 1000, 音を鳴らす]
type = PlaySnd
triggerall = var(7) = 1
trigger1 = AnimElem = 4
value = s20,8
channel = 10

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 3
value = s12,9

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = animelem = 3
statetype = A

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 4
x = 8

[State 0, VelMul]
type = VelMul
trigger1 = animelemtime(4) > 0
x = 0.98

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 4
y = -2.5

[State 0, VelAdd]
type = VelAdd
trigger1 = animelemtime(4) > 0
y = 0.38

[State 700, エフェクト?示]
type = Explod
trigger1 = AnimElem = 2
anim = 10060
postype = P1
pos = 20, 0
sprpriority = -5
ownpal = 1

[State 200, ヒット定?]
type = HitDef
trigger1 = animelem = 7
attr = A, SA
damage    = 85,10
getpower  = 127,127 ;127.5
givepower = 10,10
animtype = Diagup
guardflag = MA
hitflag = MAF
priority = 4, Hit
pausetime = 11, 12
sparkno = 202
guard.sparkno = s10012+(var(11)*10000)
sparkxy = -15, -75
hitsound = s1,4+(var(11)*10)
guardsound = s2,1+(var(11)*10)
ground.type = High
ground.slidetime = 20
ground.hittime  = 21
ground.velocity = -9,-8.5
air.type = High
air.velocity = -9,-8.5
fall = 1
fall.recover = 0
envshake.time = 12
envshake.ampl = 4
envshake.freq = 100
yaccel = .45

;ナロウスパイク
[State -1]
type = VarSet
v = 16
value = 1
triggerall = var(59) != 1
triggerall = AnimElem = 4,>0
trigger1 = command = "弱?ニッツスパイク" | command = "強?ニッツスパイク"

[State 1000];ナロウスパイク
type = ChangeState
triggerall = var(59) != 1
trigger1 = var(16) = 1 && AnimElem = 5,>0
value = 1210
ctrl = 0

[State 1000];ナロウスパイク
type = ChangeState
triggerall = var(59) = 1
triggerall = AnimElem = 5,>0
trigger1 = movecontact
value = 1210
ctrl = 0

[State 1000, ステ?ト変更]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= Helper(100000),var(0)
value = 1201

;---------------------------------------------------------------------------
;着地

[Statedef 1201]
type     = S
movetype = I
physics  = S
poweradd = 0
velset   = 0,0
anim     = 1201
ctrl     = 0
sprpriority = 2

[State 300,]
type = AfterImage
trigger1 = time = 0
time = 1

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = time = 0
value = s4,0+(var(11)*10)

[State 1000,]
type = Posset
trigger1 = time = 0
y = Helper(100000),var(0)

[State 1000,]
type = PosAdd
trigger1 = time = 0
x = 10

[State 1000, 軸位置移動]
type = Velset
trigger1 = time = 0
x = 0
y = 0

[State 1000, ステ?ト変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; ?ニッツスパイク強

[Statedef 1205]
type     = S
movetype = A
physics  = N
juggle   = ifelse(var(12),31,(ifelse(var(13)=2,31,1)))
poweradd = 50
velset   = 0,0
anim     = 1205
ctrl     = 0
sprpriority = 2
facep2 = 1

[state 1000, VarSet];先行入力初期化
type = varset
trigger1 = time = 0
var(31) = 0

[state 1000, VarSet];先行入力初期化
type = varset
trigger1 = time = 0
var(32) = 0

[State 1200, Narrow]
type = VarSet
trigger1 = time = 0
var(16) = 0

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = animelem = 11
movetype = I

[State 1000, 音を鳴らす]
type = PlaySnd
triggerall = var(7) = 0
trigger1 = AnimElem = 2
value = s10,27
channel = 10

[State 1000, 音を鳴らす]
type = PlaySnd
triggerall = var(7) = 1
trigger1 = AnimElem = 4
value = s20,8
channel = 10

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 2
value = s12,9

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = animelem = 2
statetype = A

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 2
x = 14

[State 0, VelMul]
type = VelMul
trigger1 = animelemtime(2) > 0
x = 0.98

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 3
y = -4

[State 0, VelAdd]
type = VelAdd
trigger1 = animelemtime(3) > 0
y = 0.41

[State 700, エフェクト?示]
type = Explod
trigger1 = AnimElem = 2
anim = 10060
postype = P1
pos = 20, 0
sprpriority = -5
ownpal = 1

[State 200, ヒット定?]
type = HitDef
trigger1 = animelem = 7
attr = A, SA
damage    = 94,10
getpower  = 141,141
givepower = 10,10
animtype = Diagup
guardflag = MA
hitflag = MAF
priority = 4, Hit
pausetime = 11, 12
sparkno = 202
guard.sparkno = s10012+(var(11)*10000)
sparkxy = -15, -75
hitsound = s1,4+(var(11)*10)
guardsound = s2,1+(var(11)*10)
ground.type = High
ground.slidetime = 20
ground.hittime  = 21
ground.velocity = -9,-8.5
air.type = High
air.velocity = -9,-8.5
fall = 1
fall.recover = 0
envshake.time = 12
envshake.ampl = 4
envshake.freq = 100
yaccel = .45

;ナロウスパイク
[State -1]
type = VarSet
v = 16
value = 1
triggerall = var(59) != 1
triggerall = AnimElem = 4,>0
trigger1 = command = "弱?ニッツスパイク" | command = "強?ニッツスパイク"

[State 1000];ナロウスパイク
type = ChangeState
triggerall = var(59) != 1
trigger1 = var(16) = 1 && AnimElem = 5,>0
value = 1210
ctrl = 0

[State 1000];ナロウスパイク
type = ChangeState
triggerall = var(59) = 1
triggerall = AnimElem = 5,>0
trigger1 = movecontact
value = 1210
ctrl = 0

[State 1000, ステ?ト変更]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= Helper(100000),var(0)
value = 1206

;---------------------------------------------------------------------------
;着地

[Statedef 1206]
type     = S
movetype = I
physics  = S
poweradd = 0
velset   = 0,0
anim     = 1206
ctrl     = 0
sprpriority = 2

[State 300,]
type = AfterImage
trigger1 = time = 0
time = 1

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = time = 0
value = s4,0+(var(11)*10)

[State 1000,]
type = Posset
trigger1 = time = 0
y = Helper(100000),var(0)

[State 1000,]
type = PosAdd
trigger1 = time = 0
x = 10

[State 1000, 軸位置移動]
type = Velset
trigger1 = time = 0
x = 0
y = 0

[State 1000, ステ?ト変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; ナロウスパイク

[Statedef 1210]
type     = S
movetype = A
physics  = N;S
juggle   = ifelse(var(12),31,1)
poweradd = 50
velset   = 0,0
anim     = 1210
ctrl     = 0
sprpriority = 3

[State -2]
type = VarSet
trigger1 = time = 0
var(16) = 0

[State 1240, 2]
type = PosSet
trigger1 = Time = 0
y = Helper(100000),var(0)

[State 1000,]
type = PosAdd
trigger1 = time = 0
x = 10

[State 1401, 3]
type = VelSet
trigger1 = AnimElem = 2
x = 10
y = 0

[state a]
type = veladd
trigger1 = AnimElem = 2,>=0
x = -0.35

[State 200, ヒット定?]
type = HitDef
trigger1 = time = 0
attr = A, SA
damage    = 45,10
getpower  = 67,67 ;67.5
givepower = 10,10
animtype = Hard
guardflag = LA
hitflag = MA
priority = 4, Hit
pausetime = 9, 11
sparkno = 202
guard.sparkno = s10012+(var(11)*10000)
sparkxy = -20, -15
hitsound = s1,3+(var(11)*10)
guardsound = s2,1+(var(11)*10)
ground.type = High
ground.slidetime = 17
ground.hittime  = 18
ground.velocity = -4.5,-6.5
airguard.velocity = -4.5,-6.5
air.type = High
air.velocity = -3.2,-9.2
fall = 1
fall.recover = 0
yaccel = .45

[State 1000, ステ?ト変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; 空中?ニッツスパイク弱

[Statedef 1220]
type     = A
movetype = A
physics  = N
juggle   = 0
poweradd = 50
velset   = 0,0
anim     = 1220
ctrl     = 0
sprpriority = 2

[State 1000, 音を鳴らす]
type = PlaySnd
triggerall = var(7) = 0
trigger1 = AnimElem = 1
value = s10,27
channel = 10

[State 1000, 音を鳴らす]
type = PlaySnd
triggerall = var(7) = 1
trigger1 = AnimElem = 1
value = s20,8
channel = 10

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 1
value = s12,9

[State 1200, movetype]
type = StateTypeSet
trigger1 = AnimElem = 8
movetype = I

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 1
x = 8

[State 0, VelMul]
type = VelMul
trigger1 = animelemtime(1) > 0
x = 0.98

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 1
y = -2.5

[State 0, VelAdd]
type = VelAdd
trigger1 = animelemtime(1) > 0
y = 0.4

[State 200, ヒット定?]
type = HitDef
trigger1 = animelem = 4
attr = A, SA
damage    = 85,10
getpower  = 127,127 ;127.5
givepower = 10,10
animtype = Diagup
guardflag = MA
hitflag = MAF
priority = 4, Hit
pausetime = 11, 12
sparkno = 202
guard.sparkno = s10012+(var(11)*10000)
sparkxy = -15, -75
hitsound = s1,4+(var(11)*10)
guardsound = s2,1+(var(11)*10)
ground.type = High
ground.slidetime = 20
ground.hittime  = 21
ground.velocity = -9,-7
air.type = High
air.velocity = -9,-7
fall = 1
fall.recover = 0
envshake.time = 12
envshake.ampl = 4
envshake.freq = 100
yaccel = .45

[State 1000, ステ?ト変更]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= Helper(100000),var(0)
value = 1201

;---------------------------------------------------------------------------
;着地(EX空中?ニッツスパイク用)

[Statedef 1221]
type     = S
movetype = I
physics  = S
poweradd = 0
velset   = 0,0
anim     = 1221
ctrl     = 0
sprpriority = 2

[State 300,]
type = AfterImage
trigger1 = time = 0
time = 1

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = time = 0
value = s4,0+(var(11)*10)

[State 1000,]
type = Posset
trigger1 = time = 0
y = Helper(100000),var(0)

[State 1000,]
type = PosAdd
trigger1 = time = 0
x = 10

[State 1000, 軸位置移動]
type = Velset
trigger1 = time = 0
x = 0
y = 0

[State 1000, ステ?ト変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; 空中?ニッツスパイク強

[Statedef 1225]
type     = A
movetype = A
physics  = N
juggle   = 0
poweradd = 50
velset   = 0,0
anim     = 1225
ctrl     = 0
sprpriority = 2

[State 1000, 音を鳴らす]
type = PlaySnd
triggerall = var(7) = 0
trigger1 = AnimElem = 1
value = s10,27
channel = 10

[State 1000, 音を鳴らす]
type = PlaySnd
triggerall = var(7) = 1
trigger1 = AnimElem = 1
value = s20,8
channel = 10

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 1
value = s12,9

[State 1200, movetype]
type = StateTypeSet
trigger1 = AnimElem = 8
movetype = I

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 1
x = 10

[State 0, VelMul]
type = VelMul
trigger1 = animelemtime(1) > 0
x = 0.98

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 1
y = -4

[State 0, VelAdd]
type = VelAdd
trigger1 = animelemtime(1) > 0
y = 0.4

[State 200, ヒット定?]
type = HitDef
trigger1 = animelem = 4
attr = A, SA
damage    = 94,10
getpower  = 141,141
givepower = 10,10
animtype = Diagup
guardflag = MA
hitflag = MAF
priority = 4, Hit
pausetime = 11, 12
sparkno = 202
guard.sparkno = s10012+(var(11)*10000)
sparkxy = -15, -75
hitsound = s1,4+(var(11)*10)
guardsound = s2,1+(var(11)*10)
ground.type = High
ground.slidetime = 20
ground.hittime  = 21
ground.velocity = -9,-7
air.type = High
air.velocity = -9,-7
fall = 1
fall.recover = 0
envshake.time = 12
envshake.ampl = 4
envshake.freq = 100
yaccel = .45

[State 1000, ステ?ト変更]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= Helper(100000),var(0)
value = 1206

;---------------------------------------------------------------------------
; EX?ニッツスパイク

[Statedef 1250]
type     = S
movetype = A
physics  = N
juggle   = 0
poweradd = 0
velset   = 0,0
anim     = 1205
ctrl     = 0
sprpriority = 2
facep2 = 1

[state 1000, VarSet];先行入力初期化
type = varset
trigger1 = time = 0
var(31) = 0

[state 1000, VarSet];先行入力初期化
type = varset
trigger1 = time = 0
var(32) = 0

;--------------------------
;EX必殺技?テンプレ
;--------------------------
[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = time = 0
value = s9,6

[state a]
type = poweradd
trigger1 = var(40) = 0
trigger1 = time = 0
value = -500

[State a];MAXゲ?ジ
type = varadd
triggerall = var(40) > 0
trigger1 = time = 0
v = 40
value = -150

[State 1900, Palfx]
type = PalFX
trigger1 = gametime %2=0
time = 1
add = 120,80,0
sinadd = 64,32,5,3
ignorehitpause = 1

[State 1000, 1]
type = AfterImage
trigger1 = AnimElem = 1
time = 999
trans = add
length   = 5
timegap  = 2
framegap = 1
PalBright = 30 , 30 , 0
PalContrast = 255 , 255 , 0
PalAdd = 0 , 0 , 0
PalMul = .6 , .6 , 0
IgnoreHitPause = 1
Persistent = 1

[State 3000, 残像]
type = AfterImage
trigger1 = AnimTime = 0
time = 1
;--------------------------

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = animelem = 11
movetype = I

[State 1000, 音を鳴らす]
type = PlaySnd
triggerall = var(7) = 0
trigger1 = AnimElem = 2
value = s10,27
channel = 10

[State 1000, 音を鳴らす]
type = PlaySnd
triggerall = var(7) = 1
trigger1 = AnimElem = 4
value = s20,8
channel = 10

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 2
value = s12,9

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = animelem = 2
statetype = A

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 2
x = 18

[State 0, VelMul]
type = VelMul
trigger1 = animelemtime(2) > 0
x = 0.98

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 3
y = -4

[State 0, VelAdd]
type = VelAdd
trigger1 = animelemtime(3) > 0
y = 0.41

[State 700, エフェクト?示]
type = Explod
trigger1 = AnimElem = 2
anim = 10060
postype = P1
pos = 20, 0
sprpriority = -5
ownpal = 1

[State 1200, ]
type = ReversalDef
trigger1 = 1
reversal.attr = SA,NA,SA
numhits = 0
pausetime = 14,16
sparkno = s10012+(var(11)*10000)
hitsound = s2,1+(var(11)*10)

[State 200, ヒット定?]
type = HitDef
triggerall = var(6) = 0
trigger1 = animelem = 7
attr = A, SA
damage    = 94,10
getpower  = 0
givepower = 10,10
animtype = Diagup
guardflag = MA
hitflag = MAF
priority = 4, Hit
pausetime = 11, 12
sparkno = 202
guard.sparkno = s10012+(var(11)*10000)
sparkxy = -15, -75
hitsound = s1,4+(var(11)*10)
guardsound = s2,1+(var(11)*10)
ground.type = High
ground.slidetime = 20
ground.hittime  = 21
ground.velocity = -20,-8.5
guard.velocity = -10
air.type = High
air.velocity = -20,-8.5
fall = 1
fall.recover = 0
envshake.time = 12
envshake.ampl = 4
envshake.freq = 100
yaccel = .45
p2facing = 1
p2stateno = 35600

[State 200, ヒット定?]
type = HitDef
triggerall = var(6) = 1
trigger1 = animelem = 7
attr = A, SA
damage    = 94,10
getpower  = 0
givepower = 10,10
animtype = Diagup
guardflag = MA
hitflag = MAF
priority = 4, Hit
pausetime = 30, 31
sparkno = 202
guard.sparkno = s10012+(var(11)*10000)
sparkxy = -15, -75
hitsound = s1,4+(var(11)*10)
guardsound = s2,1+(var(11)*10)
ground.type = High
ground.slidetime = 20
ground.hittime  = 21
ground.velocity = -20,-8.5
guard.velocity = -10
air.type = High
air.velocity = -20,-8.5
fall = 1
fall.recover = 0
envshake.time = 30
envshake.freq = 100
envshake.ampl = -3
envshake.phase = -2
yaccel = .45
p2facing = 1
p2stateno = 35605

[State 1200, Narrow]
type = VarSet
trigger1 = time = 0
var(16) = 0

;ナロウスパイク
[State -1]
type = VarSet
v = 16
value = 1
triggerall = var(59) != 1
triggerall = AnimElem = 4,>0
trigger1 = command = "弱?ニッツスパイク" | command = "強?ニッツスパイク"

[State 1000];ナロウスパイク
type = ChangeState
triggerall = var(59) != 1
trigger1 = var(16) = 1 && AnimElem = 5,>0
value = 1260
ctrl = 0

[State 1000];ナロウスパイク
type = ChangeState
triggerall = var(59) = 1
triggerall = AnimElem = 5,>0
trigger1 = movecontact
value = 1260
ctrl = 0

[State 1000, ステ?ト変更]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= Helper(100000),var(0)
value = 1201

;---------------------------------------------------------------------------
; Wire Attack (P2 - Shaking from the hit)

[Statedef 35600]
type    = A
movetype= H
physics = N
velset = 0,0

[State 5600, 2]
type = ChangeAnim2
trigger1 = Time = 0
value = 5600

[State 5600, 3]
type = PlayerPush
trigger1 = 1
value = 0

[State 5600, 4]
type = ChangeState
trigger1 = HitShakeOver = 1
value = 35601

;---------------------------------------------------------------------------
; Wire Attack (P2 - Flying through the air)

[Statedef 35601]
type    = A
movetype= H
physics = N
velset = 0,0

[State 5601, ]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 5601, 1]
type = PlayerPush
trigger1 = 1
value = 0

[State 5601, 2]
type = NotHitBy
trigger1 = 1
value = SCA

[State 5601, 3]
type = VelSet
trigger1 = time = 0
x = ifelse(gethitvar(xvel)<0,-1,1)*facing*18
y = -1.1

[State 5601, Hit wall]
type = ChangeState
trigger1 = vel x < 0
trigger1 = backedgebodydist <= 10
trigger2 = vel x > 0
trigger2 = frontedgebodydist <= 10
value = 35602

;---------------------------------------------------------------------------
; Wire Attack (P2 - Hit wall)

[Statedef 35602]
type    = A
movetype= H
physics = N

[State 5602, 1]
type = NotHitBy
trigger1 = 1
value = SCA

[State 5602, EnvShake]
type = EnvShake
trigger1 = Time = 0
time = 12
freq = 120
ampl = -6

[State 5602, Stop moving]
type = PosFreeze
trigger1 = 1
x = 1
y = 1

[State 5602, No scroll]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 0,1

[State 5602, Anim]
type = ChangeAnim2
trigger1 = Time = 0
value = 5602

[State 5602, Sound]
type = PlaySnd
trigger1 = Time = 0
value = F7,2

[State 5602, State]
type = ChangeState
trigger1 = AnimTime = 0
value = 35603

;---------------------------------------------------------------------------
; Wire Attack (P2 - Bounce off wall)

[Statedef 35603]
type    = A
movetype= H
physics = N

[State 5603, 1]
type = NotHitBy
trigger1 = 1
value = SCA

[State 5603, Vel Y]
type = VelSet
trigger1 = Time = 0
x = 1
y = -1

[State 5603, Gravity]
type = VelAdd
trigger1 = 1
y = .5

[State 364, Anim 5050]
type = ChangeAnim
trigger1 = Time = 0
value = 5050

[State 5050, 2] ;Coming down anim
type = ChangeAnim
trigger1 = Vel Y >= -2
trigger1 = SelfAnimExist(anim+10)
value = anim+10
persistent = 0

[State 5603, Vel Y]
type = VelSet
trigger1 = Pos Y >= Helper(100000),var(0)
trigger1 = Vel Y > 0
x = 1

[State 5603, Hit ground]
type = SelfState
trigger1 = Pos Y >= Helper(100000),var(0)
trigger1 = Vel Y > 0
value = 5100

;---------------------------------------------------------------------------
; Counter Wire Attack (P2 - Shaking from the hit)

[Statedef 35605]
type    = A
movetype= H
physics = N
velset = 0,0

[State 5605, 2]
type = ChangeAnim2
trigger1 = Time = 0
value = 5600

[State 5605, 3]
type = PlayerPush
trigger1 = 1
value = 0

[State 565, 4]
type = ChangeState
trigger1 = HitShakeOver = 1
value = 35606

;---------------------------------------------------------------------------
; Counter Wire Attack (P2 - Flying through the air)

[Statedef 35606]
type    = A
movetype= H
physics = N
velset = 0,0

[State 5606, ]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 5606, 1]
type = PlayerPush
trigger1 = 1
value = 0

[State 5606, 2]
type = NotHitBy
trigger1 = 1
value = SCA

[State 5606, 3]
type = VelSet
trigger1 = time = 0
x = ifelse(gethitvar(xvel)<0,-1,1)*facing*18
y = -1.1

[State 5606, Hit wall]
type = ChangeState
trigger1 = vel x < 0
trigger1 = backedgebodydist <= 10
trigger2 = vel x > 0
trigger2 = frontedgebodydist <= 10
value = 35607

;---------------------------------------------------------------------------
; Counter Wire Attack (P2 - Hit wall)

[Statedef 35607]
type    = A
movetype= H
physics = N

[State 5607, 1]
type = NotHitBy
trigger1 = 1
value = SCA

[State 5607, EnvShake]
type = EnvShake
trigger1 = Time = 0
time = 12
freq = 120
ampl = -6

[State 5607, Stop moving]
type = PosFreeze
trigger1 = 1
x = 1
y = 1

[State 5607, No scroll]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 0,1

[State 5607, Anim]
type = ChangeAnim2
trigger1 = Time = 0
value = 5602

[State 5607, Sound]
type = PlaySnd
trigger1 = Time = 0
value = F7,2

[State 5607, State]
type = ChangeState
trigger1 = AnimTime = 0
value = 35608

;---------------------------------------------------------------------------
; Counter Wire Attack (P2 - Bounce off wall)

[Statedef 35608]
type    = A
movetype= H
physics = N

[State 5608, Vel Y]
type = VelSet
trigger1 = Time = 0
x = 3
y = -12

[State 5608, Gravity]
type = VelAdd
trigger1 = 1
y = .5

[State 5608, Anim 5050]
type = ChangeAnim
trigger1 = Time = 0
value = 5050

[State 5050, 2] ;Coming down anim
type = ChangeAnim
trigger1 = Vel Y >= -2
trigger1 = SelfAnimExist(anim+10)
value = anim+10
persistent = 0

[State 5608, Hit ground]
type = SelfState
trigger1 = Pos Y >= Helper(100000),var(0)
trigger1 = Vel Y > 0
value = 5100

;---------------------------------------------------------------------------
; EXナロウスパイク

[Statedef 1260]
type     = S
movetype = A
physics  = N;S
juggle   = ifelse(var(12),31,1)
poweradd = 50
velset   = 0,0
anim     = 1210
ctrl     = 0
sprpriority = 3

;--------------------------
;EX必殺技?テンプレ
;--------------------------
[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = time = 0
value = s9,6

[state a]
type = null;poweradd
trigger1 = var(40) = 0
trigger1 = time = 0
value = -500

[State a];MAXゲ?ジ
type = null;varadd
triggerall = var(40) > 0
trigger1 = time = 0
v = 40
value = -150

[State 1900, Palfx]
type = PalFX
trigger1 = gametime %2=0
time = 1
add = 120,80,0
sinadd = 64,32,5,3
ignorehitpause = 1

[State 1000, 1]
type = AfterImage
trigger1 = AnimElem = 1
time = 999
trans = add
length   = 5
timegap  = 2
framegap = 1
PalBright = 30 , 30 , 0
PalContrast = 255 , 255 , 0
PalAdd = 0 , 0 , 0
PalMul = .6 , .6 , 0
IgnoreHitPause = 1
Persistent = 1

[State 3000, 残像]
type = AfterImage
trigger1 = AnimTime = 0
time = 1
;--------------------------

[State -2]
type = VarSet
trigger1 = time = 0
var(16) = 0

[State 1240, 2]
type = PosSet
trigger1 = Time = 0
y =Helper(100000),var(0)

[State 1401, 3]
type = VelSet
trigger1 = AnimElem = 2
x = 10
y = 0

[state a]
type = veladd
trigger1 = AnimElem = 2,>=0
x = -0.35

[State 200, ヒット定?]
type = HitDef
trigger1 = time = 0
attr = A, SA
damage    = 94,10
getpower  = 0
givepower = 10,10
animtype = Hard
guardflag = LA
hitflag = MA
priority = 4, Hit
pausetime = 9, 11
sparkno = 202
guard.sparkno = s10012+(var(11)*10000)
sparkxy = -20, -15
hitsound = s1,3+(var(11)*10)
guardsound = s2,1+(var(11)*10)
ground.type = High
ground.slidetime = 17
ground.hittime  = 18
ground.velocity = -4.5,-6.5
airguard.velocity = -4.5,-6.5
air.type = High
air.velocity = -3.2,-9.2
fall = 1
fall.recover = 0
;yaccel = .45

[State 1000, ステ?ト変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; EX空中?ニッツスパイク

[Statedef 1270]
type     = A
movetype = A
physics  = N
juggle   = 0
poweradd = 0
velset   = 0,0
anim     = 1220
ctrl     = 0
sprpriority = 2

;--------------------------
;EX必殺技?テンプレ
;--------------------------
[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = time = 0
value = s9,6

[state a]
type = poweradd
trigger1 = var(40) = 0
trigger1 = time = 0
value = -500

[State a];MAXゲ?ジ
type = varadd
triggerall = var(40) > 0
trigger1 = time = 0
v = 40
value = -150

[State 1900, Palfx]
type = PalFX
trigger1 = gametime %2=0
time = 1
add = 120,80,0
sinadd = 64,32,5,3
ignorehitpause = 1

[State 1000, 1]
type = AfterImage
trigger1 = AnimElem = 1
time = 999
trans = add
length   = 5
timegap  = 2
framegap = 1
PalBright = 30 , 30 , 0
PalContrast = 255 , 255 , 0
PalAdd = 0 , 0 , 0
PalMul = .6 , .6 , 0
IgnoreHitPause = 1
Persistent = 1

[State 3000, 残像]
type = AfterImage
trigger1 = AnimTime = 0
time = 1
;--------------------------

[State 1000, 音を鳴らす]
type = PlaySnd
triggerall = var(7) = 0
trigger1 = AnimElem = 1
value = s10,27
channel = 10

[State 1000, 音を鳴らす]
type = PlaySnd
triggerall = var(7) = 1
trigger1 = AnimElem = 1
value = s20,8
channel = 10

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 1
value = s12,9

[State 1200, movetype]
type = StateTypeSet
trigger1 = AnimElem = 8
movetype = I

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 1
x = 10

[State 0, VelMul]
type = VelMul
trigger1 = animelemtime(1) > 0
x = 0.98

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 1
y = -4

[State 0, VelAdd]
type = VelAdd
trigger1 = animelemtime(1) > 0
y = 0.4

[State 200, ヒット定?]
type = HitDef
trigger1 = animelem = 4
attr = A, SA
damage    = 104,10
getpower  = 0
givepower = 10,10
animtype = Diagup
guardflag = MA
hitflag = MAF
priority = 4, Hit
pausetime = 11, 12
sparkno = 202
guard.sparkno = s10012+(var(11)*10000)
sparkxy = -15, -75
hitsound = s1,4+(var(11)*10)
guardsound = s2,1+(var(11)*10)
ground.type = High
ground.slidetime = 20
ground.hittime  = 21
ground.velocity = -9,-8.5
air.type = High
air.velocity = -9,-8.5
fall = 1
fall.recover = 0
envshake.time = 12
envshake.ampl = 4
envshake.freq = 100
yaccel = .45

[State 1000, ステ?ト変更]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= Helper(100000),var(0)
value = 1221

;---------------------------------------------------------------------------
;ブラックアウト弱

[Statedef 1300]
type     = S
movetype = I
physics  = S
juggle   = 0
poweradd = 50
velset   = 0,0
anim     = 1300
ctrl     = 0
sprpriority = 1
facep2 = 1

[state 1000, VarSet];先行入力初期化
type = varset
trigger1 = time = 0
var(31) = 0

[state 1000, VarSet];先行入力初期化
type = varset
trigger1 = time = 0
var(32) = 0

[State 170, 無敵]
type = NotHitBy
trigger1 = AnimElemtime(4) >= 0 && AnimElemtime(10) < 0
value = SCA

[State 1000, 音を鳴らす]
type = PlaySnd
triggerall = var(7) = 0
trigger1 = AnimElem = 2
value = s10+(var(7)*10),25
channel = 10

[State 1000, 音を鳴らす]
type = PlaySnd
triggerall = var(7) = 1
trigger1 = AnimElem = 2
value = s10+(var(7)*10),10
channel = 10

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 3
value = s12,5

[State 1000, ]
type = MakeDust
trigger1 = AnimElemtime(9) >= 0 && AnimElemtime(12) < 0
spacing = 3

[State 1000, ]
type = Veladd
trigger1 = AnimElemtime(2) >= 0 && AnimElemtime(9) < 0
x = 1.5

[State 1000, ]
type = Velset
trigger1 = AnimElem = 8
x = 20

[State 1000, ]
type = Velset
trigger1 = AnimElem = 12
x = 4

[State 1000, ]
type = Velset
trigger1 = AnimElem = 14
x = 0

[State 2110, 相手と重なった時の処理]
type = PlayerPush
trigger1 = AnimElemTime(1) > 0 && AnimElemtime(13) <= 0
value = 0

[State 1000, ステ?ト変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;ブラックアウト強

[Statedef 1350]
type     = S
movetype = I
physics  = S
juggle   = 0
poweradd = 50
velset   = 0,0
anim     = 1350
ctrl     = 0
sprpriority = 1
facep2 = 1

[state 1000, VarSet];先行入力初期化
type = varset
trigger1 = time = 0
var(31) = 0

[state 1000, VarSet];先行入力初期化
type = varset
trigger1 = time = 0
var(32) = 0

[State 170, 無敵]
type = NotHitBy
trigger1 = AnimElemtime(4) >= 0 && AnimElemtime(10) < 0
value = SCA

[State 1000, 音を鳴らす]
type = PlaySnd
triggerall = var(7) = 0
trigger1 = AnimElem = 2
value = s10+(var(7)*10),25
channel = 10

[State 1000, 音を鳴らす]
type = PlaySnd
triggerall = var(7) = 1
trigger1 = AnimElem = 2
value = s10+(var(7)*10),10
channel = 10

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 3
value = s12,5

[State 1000, ]
type = MakeDust
trigger1 = AnimElemtime(9) >= 0 && AnimElemtime(12) < 0
spacing = 3

[State 1000, ]
type = Veladd
trigger1 = AnimElemtime(2) >= 0 && AnimElemtime(9) < 0
x = 1.5

[State 1000, ]
type = Velset
trigger1 = AnimElem = 8
x = 30

[State 1000, ]
type = Velset
trigger1 = AnimElem = 12
x = 5

[State 1000, ]
type = Velset
trigger1 = AnimElem = 14
x = 0

[State 2110, 相手と重なった時の処理]
type = PlayerPush
trigger1 = AnimElemTime(1) > 0 && AnimElemtime(13) <= 0
value = 0

[State 1000, ステ?ト変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;エアトリガ?弱

[Statedef 1400]
type     = A
movetype = A
physics  = N
juggle   = 0
poweradd = 50
anim     = 1400
ctrl     = 0
sprpriority = 2

[state 1000, VarSet];先行入力初期化
type = varset
trigger1 = time = 0
var(31) = 0

[state 1000, VarSet];先行入力初期化
type = varset
trigger1 = time = 0
var(32) = 0

[State 1400, movetype]
type = StateTypeSet
trigger1 = AnimElem = 8
movetype = I

[State 1000, 音を鳴らす]
type = PlaySnd
triggerall = var(7) = 0
trigger1 = AnimElem = 1
value = s10+(var(7)*10),40
channel = 10

[State 1000, 音を鳴らす]
type = PlaySnd
triggerall = var(7) = 1
trigger1 = AnimElem = 5
value = s10+(var(7)*10),12
channel = 10

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 6
value = s12,11

[State 1000, ]
type = Velset
trigger1 = AnimElem = 6
x = -3
y = -4

[State 1000, ]
type = Veladd
trigger1 = AnimElemtime(6) >= 0
y = .42

[State 700, エフェクト?示]
type = Explod
trigger1 = AnimElem = 5
anim = 1405
postype = P1
pos = 20, -50
sprpriority = 5
ownpal = 1
bindtime = 5
supermove = 1
ignorehitpause = 0
removeongethit = 1

[State 1000,4]
type = helper
trigger1 = AnimElem = 6
stateno = 1410
id = 1400
name = "Proj"
pos = 10,-50
postype = P1
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 1000, ステ?ト変更]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= Helper(100000),var(0)
value = 1201

;---------------------------------------------------------------------------
;(HELPER)エアトリガ?・ヘルパ?
[Statedef 1410]
type     = A
movetype = A
physics  = N
ctrl     = 0
anim     = 1410
sprpriority = 5

[State 170, 無敵]
type = NotHitBy
trigger1 = 1
value = SCA

[State 1001, 特殊効果]
type = AssertSpecial
trigger1 = 1
flag = NoShadow ;影を消す

[State -2, AirGuard]
type = AssertSpecial
triggerall = root,var(20) >= 1
trigger1 = p2statetype = A
flag = unguardable

[state a]
type = velset
trigger1 = time = 0
x = 7
y = 6

[State 200, ヒット定?]
type = HitDef
triggerall = root,var(12) = 0
trigger1 = 1
attr = A, SP
damage    = floor(80*root,fvar(5)),10
getpower  = 120,120
givepower = 10,10
animtype = Hard
guardflag = MA
hitflag = MAF
priority = 4, Hit
pausetime = 0,10+root,var(0)
sparkno = s10002+(root,var(11)*10000)
guard.sparkno = s10012+(root,var(11)*10000)
sparkxy = 20,0
hitsound = s1,1+(root,var(11)*10)
guardsound = s2,1+(root,var(11)*10)
ground.type = High
ground.hittime = 17
ground.slidetime = 17
ground.velocity = -3.5,-3.1
guard.velocity = -8
air.velocity = -3.5,-3.1
fall = 1
fall.recover = 0
palfx.time = 30
palfx.add = 30,-40,-140
palfx.sinadd = 60,60,50,10
palfx.color = 0
palfx.invertall = 1
fall.envshake.ampl = 5
fall.envshake.freq = 100
fall.envshake.time = 10

[State 3000]
type = Projectile
trigger1 = time = 0
projID = 1400
projanim = 1411
projremove = 1
projpriority = 1
projhitanim = -1
projremanim = -1
projsprpriority = 0
projshadow = 0,0,0
projremovetime = -1
offset = 0,0
velocity = vel X, vel Y

;ヒット数測定
[State 1000, ]
type = ParentVaradd
trigger1 = movehit = 1
fvar(1) = 1

;ガ?ドクラッシュ値削り
[state a]
type = parentvaradd
trigger1 = moveguarded = 1
fvar(10) = 16

;ガ?ドクラッシュ値回復不?時間
[State 1000, 0]
type = ParentVarSet
triggerall = fvar(11) != 180
triggerall = roundstate = 2
trigger1 = moveguarded = 1
fvar(11) = 180

;ジャグル設定
[State 1000, Juggle]
type = ParentVarSet
trigger1 = p2statetype = A
trigger1 = movehit
var(12) = 2

;スロ?処理
[State 1000, ヘルパ?を出す]
type = Helper
trigger1 = Movehit = 1
name = "Slow"
stateno = 4900
ID = 4900
helpertype = normal
pos = 0,0
postype = p1
keyctrl = 0
ownpal = 1
ignorehitpause = 1
persistent = 0

;燃え小エフェクト
[State 1000, ヘルパ?を出す]
type = null;Helper
trigger1 = movehit = 1
name = "hit"
stateno = 101000
ID = 101000
helpertype = normal
pos = 0,0
postype = p2
keyctrl = 0
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 200, 7]
type = changestate
trigger1 = movecontact
trigger2 = root,numprojID(1400) = 0
value = 1415

;---------------------------------------------------------------------------
; ヘルパ?消滅

[Statedef 1415]
type     = A
movetype = I
physics  = N
juggle   = 0
poweradd = 0
velset   = 0,0
anim     = 1415
ctrl     = 0
sprpriority = 5

[State 170, 無敵]
type = NotHitBy
trigger1 = 1
value = SCA

[State 191, 特殊効果]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 1001, このヘルパ?を消す]
type = DestroySelf
trigger1 = AnimTime = 0

;---------------------------------------------------------------------------
;エアトリガ?強

[Statedef 1450]
type     = A
movetype = A
physics  = N
juggle   = 0
poweradd = 50
anim     = 1400
ctrl     = 0
sprpriority = 2

[state 1000, VarSet];先行入力初期化
type = varset
trigger1 = time = 0
var(31) = 0

[state 1000, VarSet];先行入力初期化
type = varset
trigger1 = time = 0
var(32) = 0

[State 1400, movetype]
type = StateTypeSet
trigger1 = AnimElem = 8
movetype = I

[State 1000, 音を鳴らす]
type = PlaySnd
triggerall = var(7) = 0
trigger1 = AnimElem = 1
value = s10+(var(7)*10),40
channel = 10

[State 1000, 音を鳴らす]
type = PlaySnd
triggerall = var(7) = 1
trigger1 = AnimElem = 5
value = s10+(var(7)*10),12
channel = 10

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 6
value = s12,11

[State 700, エフェクト?示]
type = Explod
trigger1 = AnimElem = 5
anim = 1405
postype = P1
pos = 20, -50
sprpriority = 5
ownpal = 1
bindtime = 5
supermove = 1
ignorehitpause = 0
removeongethit = 1

[State 1000, ]
type = Velset
trigger1 = AnimElem = 6
x = -3
y = -4

[State 1000, ]
type = Veladd
trigger1 = AnimElemtime(6) >= 0
y = .42

[State 1000,4]
type = helper
trigger1 = AnimElem = 6
stateno = 1460
id = 1400
name = "Proj"
pos = 10,-50
postype = P1
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 1000, ステ?ト変更]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= Helper(100000),var(0)
value = 1206

;---------------------------------------------------------------------------
;(HELPER)エアトリガ?・ヘルパ?
[Statedef 1460]
type     = A
movetype = A
physics  = N
ctrl     = 0
anim     = 1410
sprpriority = 5

[State 170, 無敵]
type = NotHitBy
trigger1 = 1
value = SCA

[State 1001, 特殊効果]
type = AssertSpecial
trigger1 = 1
flag = NoShadow ;影を消す

[State -2, AirGuard]
type = AssertSpecial
triggerall = root,var(20) >= 1
trigger1 = p2statetype = A
flag = unguardable

[state a]
type = velset
trigger1 = time = 0
x = 10
y = 9

[State 200, ヒット定?]
type = HitDef
triggerall = root,var(12) = 0
trigger1 = 1
attr = A, SP
damage    = floor(80*root,fvar(5)),10
getpower  = 120,120
givepower = 10,10
animtype = Hard
guardflag = MA
hitflag = MAF
priority = 4, Hit
pausetime = 0,10+root,var(0)
sparkno = s10002+(root,var(11)*10000)
guard.sparkno = s10012+(root,var(11)*10000)
sparkxy = 20,0
hitsound = s1,1+(root,var(11)*10)
guardsound = s2,1+(root,var(11)*10)
ground.type = High
ground.hittime = 17
ground.slidetime = 17
ground.velocity = -3.5,-3.1
guard.velocity = -8
air.velocity = -3.5,-3.1
fall = 1
fall.recover = 0
palfx.time = 30
palfx.add = 30,-40,-140
palfx.sinadd = 60,60,50,10
palfx.color = 0
palfx.invertall = 1
fall.envshake.ampl = 5
fall.envshake.freq = 100
fall.envshake.time = 10

[State 3000]
type = Projectile
trigger1 = time = 0
projID = 1400
projanim = 1411
projremove = 1
projpriority = 1
projhitanim = -1
projremanim = -1
projsprpriority = 0
projshadow = 0,0,0
projremovetime = -1
offset = 0,0
velocity = vel X, vel Y

;ヒット数測定
[State 1000, ]
type = ParentVaradd
trigger1 = movehit = 1
fvar(1) = 1

;ガ?ドクラッシュ値削り
[state a]
type = parentvaradd
trigger1 = moveguarded = 1
fvar(10) = 16

;ガ?ドクラッシュ値回復不?時間
[State 1000, 0]
type = ParentVarSet
triggerall = fvar(11) != 180
triggerall = roundstate = 2
trigger1 = moveguarded = 1
fvar(11) = 180

;ジャグル設定
[State 1000, Juggle]
type = ParentVarSet
trigger1 = p2statetype = A
trigger1 = movehit
var(12) = 2

;スロ?処理
[State 1000, ヘルパ?を出す]
type = Helper
trigger1 = Movehit = 1
name = "Slow"
stateno = 4900
ID = 4900
helpertype = normal
pos = 0,0
postype = p1
keyctrl = 0
ownpal = 1
ignorehitpause = 1
persistent = 0

;燃え小エフェクト
[State 1000, ヘルパ?を出す]
type = null;Helper
trigger1 = movehit = 1
name = "hit"
stateno = 101000
ID = 101000
helpertype = normal
pos = 0,0
postype = p2
keyctrl = 0
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 200, 7]
type = changestate
trigger1 = movecontact
trigger2 = root,numprojID(1400) = 0
value = 1415

;---------------------------------------------------------------------------
; ス?ットパイル

[Statedef 1800]
type     = S
movetype = A
physics  = S
juggle   = 0
velset   = 0,0
ctrl     = 0
anim     = 1800
sprpriority = 2
poweradd = 50
facep2 = 1

[state 1000, VarSet];先行入力初期化
type = varset
trigger1 = time = 0
var(31) = 0

[state 1000, VarSet];先行入力初期化
type = varset
trigger1 = time = 0
var(32) = 0

[State 800, ヒット定?（投げ用）]
type = HitDef
trigger1 = Time = 0
trigger1 = p2stateno != [150,155]
trigger1 = p2bodydist X <= 30
attr = S, ST
hitflag = M
priority = 1, Miss    ;投げなので優先度を低く、かつmissかdodgeの属性でなければなりません
sparkno = -1
p1sprpriority = 1     ;攻撃が当たった時に自分の画像?示優先度を1にします
p2sprpriority = 0     ;攻撃が当たった時に相手の画像?示優先度を0にします
p1facing = 1          ;攻撃が当たった時の自分の向き ★６
p2facing = 1          ;攻撃が当たった時の相手の向き
p1stateno = 1810       ;自分のステ?ト変更
p2stateno = 1820       ;相手を制御するステ?トに行かせる
guard.dist = 0        ;相手がガ?ド状態に移行出来る距離（現在は0なのでガ?ド不可）
fall = 1              ;1にすれば相手が?ウン状態になる
numhits = 0

[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 3
value = s10+(var(7)*10),28
channel = 10

[State 1000, ステ?ト変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-----------------------------------------------------------------------------
; ス?ットパイル?投げ

[Statedef 1810]
type    = S
movetype= A
physics = N
anim = 1810
sprpriority = 0

[State 170, 無敵]
type = NotHitBy
trigger1 = 1
value = SCA

[State 810, 物理的なキャラの幅]
type = Width
trigger1 = 1
edge = 60,0

[State 0, TargetBind]
type = TargetBind
trigger1 = AnimElemtime(1) >= 0 && AnimElemtime(7) < 0
pos = 25,0

[State 1100, エフェクト?示]
type = Explod
trigger1 = AnimElem = 2
persistent = 0
anim = 10021+(var(11)*10000)
postype = P1
pos = 25,-85
sprpriority = 10
ignorehitpause = 1

[State 245, 5]
type = PosAdd
trigger1 = (animelem=12,>0 && animelem=18,<0)
x = 2

[State 810, 1]
type = PlaySnd
Trigger1 = AnimElem = 2
value = s1,6

[State 810, 1]
type = PlaySnd
Trigger1 = AnimElem = 6
Trigger1 = AnimElem = 17
value = s0,4

[State 200, 音を鳴らす]
type = PlaySnd
triggerall = var(7) = 0
trigger1 = AnimElem = 6
value = s10,10
channel = 10

[State 200, 音を鳴らす]
type = PlaySnd
triggerall = var(7) = 1
trigger1 = AnimElem = 6
value = s20,5
channel = 10

[State 810, 1]
type = PlaySnd
Trigger1 = AnimElem = 17
value = s10+(var(7)*10), 1
channel = 10

[State 300 , 1]
type = HitDef
trigger1 = AnimElem = 7
attr = A, SA
damage    = ifelse(movecontact,40,80),10
getpower  = 120,120
givepower = 10,10
animtype = up
hitflag = MAF
priority = 4, Hit
pausetime = 12,12
sparkno = 202
guard.sparkno = s10012+(var(11)*10000)
sparkxy = -25, -75
hitsound = s1,4+(var(11)*10)
ground.type = High
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -2,7
air.velocity = -2,7
airguard.velocity = -5,-5
air.type = High
fall = 1
fall.recover = 0
fall.envshake.ampl = 5
fall.envshake.freq = 90
fall.envshake.time = 15
p2stateno = 5630

[State 300 , 1]
type = HitDef
trigger1 = AnimElem = 17
attr = S, SA
animtype  = diagup
damage    = ifelse(movecontact,40,80),10
getpower  = 120,120
givepower = 10,10
priority = 5
pausetime = 12,12
sparkno = 202
sparkxy = -20,-60
hitsound = s1,4+(var(11)*10)
hitflag = MAFD
ground.type = High
ground.slidetime = 14
ground.hittime  = 14
ground.velocity = -5,-5
air.velocity = -5,-5
fall = 1
fall.recover = 0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
p2stateno = 5620

[State 810, 1]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;投げ１・投げられている（相手の動作）動作
[Statedef 1820]
type    = A
movetype= H
physics = N
velset = 0,0
sprpriority = 1

[State 2120]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 820, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 1820

[State 820, 1]
type = SelfState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; スパイクライド

[Statedef 1850]
type     = A
movetype = A
physics  = A
juggle   = 0
ctrl     = 0
anim     = 1850
sprpriority = 2
poweradd = 50

[State 800, ヒット定?（投げ用）]
type = HitDef
trigger1 = Time = 0
trigger1 = p2stateno != [150,155]
trigger1 = p2bodydist X <= 30
attr = S, ST
hitflag = A-
priority = 1, Miss    ;投げなので優先度を低く、かつmissかdodgeの属性でなければなりません
sparkno = -1
p1sprpriority = 1     ;攻撃が当たった時に自分の画像?示優先度を1にします
p2sprpriority = 0     ;攻撃が当たった時に相手の画像?示優先度を0にします
p1facing = 1          ;攻撃が当たった時の自分の向き ★６
p2facing = 1          ;攻撃が当たった時の相手の向き
p1stateno = 1860       ;自分のステ?ト変更
p2stateno = 1870       ;相手を制御するステ?トに行かせる
guard.dist = 0        ;相手がガ?ド状態に移行出来る距離（現在は0なのでガ?ド不可）
fall = 1              ;1にすれば相手が?ウン状態になる
numhits = 0

[State 1000, ステ?ト変更]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= Helper(100000),var(0)
value = 1201

;---------------------------------------------------------------------------
;投げ１・投げている（自分）
[Statedef 1860]
type    = A
movetype= A
physics = N
velset = 0,0
anim = 1860
poweradd = 50

[State 170, 無敵]
type = NotHitBy
trigger1 = 1
value = SCA

[State 810, 1]
type = PlaySnd
Trigger1 = time = 0
value = s1,6

[State 1100, エフェクト?示]
type = Explod
trigger1 = time = 0
persistent = 0
anim = 10021+(var(11)*10000)
postype = P1
pos = 25,-85
sprpriority = 10
ignorehitpause = 1

[State 810, 1]
type = PlaySnd
Trigger1 = AnimElem = 2
Trigger2 = AnimElem = 5
value = s1,3+(var(11)*10)

[State 810, 1]
type = PlaySnd
Trigger1 = AnimElem = 8
value = s1,4+(var(11)*10)

[State 810, 1]
type = PlaySnd
triggerall = var(7) = 0
Trigger1 = AnimElem = 8
value = s10,10
channel = 10

[State 810, 1]
type = PlaySnd
triggerall = var(7) = 1
Trigger1 = AnimElem = 8
value = s20,4
channel = 10

[State 810, 掴んだ相手の位置１]
type = TargetBind
trigger1 = AnimElemtime(1) > 0
trigger1 = AnimElemtime(3) < 0
pos = 25, 0

[State 810]
type = TargetBind
trigger1 = AnimElemtime(3) > 0
trigger1 = AnimElemtime(5) < 0
pos = 35, 0

[State 810]
type = TargetBind
trigger1 = AnimElemtime(5) > 0
trigger1 = AnimElemtime(7) < 0
pos = 45, 0

[State 1322]
type = velset
trigger1 = AnimElem = 8
x = -1.5
y = -6

[State 821, 速度加算] ;重力
type = VelAdd
Trigger1 = AnimElemtime(8) > 0
y = .5

[State 810, 物理的なキャラの幅]
type = Width
trigger1 = AnimElemTime(2) >= 0 && AnimElemTime(12) < 0
edge = 60,0 ;前方の画面?を押す幅のみを変えています

[State 1000, spark]
type = Explod
trigger1 = AnimElem = 2
anim = 10002+(var(11)*10000)
postype = p1
;offset = 40,-60
pos = 10,-20
sprpriority = 3
removetime = 10
bindtime = -1
ownpal = 1
ID = 4010

[State 1000, spark]
type = Explod
trigger1 = AnimElem = 5
anim = 10002+(var(11)*10000)
postype = p1
pos = 30,-50
sprpriority = 3
removetime = 10
bindtime = -1
ownpal = 1
ID = 4010

[State 1000, spark]
type = Explod
trigger1 = AnimElem = 8
anim = 10002+(var(11)*10000)
postype = p1
pos = 20,-50
sprpriority = 3
removetime = 10
bindtime = -1
ownpal = 1
ID = 4010

[State 810, 掴んだ相手の体力ゲ?ジの増減]
type = TargetLifeAdd
trigger1 = AnimElem = 8
value = -120

[State 810, ステ?ト変更]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= Helper(100000),var(0)
value = 811
ctrl = 0

;---------------------------------------------------------------------------
; 相手側の投げられモ?ション１

[Statedef 1870]
type     = A
movetype = H
physics  = N
velset   = 0,0

[State 820, 制御した相手のアニメ変更]
type = ChangeAnim2
Trigger1 = Time = 0
value = 1870

[State 1322]
type = velset
trigger1 = AnimElem = 8
x = -5
y = -8

[State 821, 速度加算] ;重力
type = VelAdd
Trigger1 = AnimElemtime(8) > 0
y = .5


[State 820, 2];バグ回避用
type = SelfState
trigger1 = Pos Y >= Helper(100000),var(0)
trigger1 = Vel Y > 0
value = 5100

;---------------------------------------------------------------------------
; ここからはEX必殺技のステ?ト
;---------------------------------------------------------------------------
; EXアイントリガ?

[Statedef 11000]
type     = S
movetype = A
physics  = S
juggle   = 0
poweradd = 0
velset   = 0,0
anim     = 11001;11000
ctrl     = 0
sprpriority = 2
facep2 = 1

[state 1000, VarSet];先行入力初期化
type = varset
trigger1 = time = 0
var(31) = 0

[state 1000, VarSet];先行入力初期化
type = varset
trigger1 = time = 0
var(32) = 0

;--------------------------
;EX必殺技?テンプレ
;--------------------------
[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = time = 0
value = s9,6

[state a]
type = poweradd
trigger1 = var(40) = 0
trigger1 = time = 0
value = -500

[State a];MAXゲ?ジ
type = varadd
triggerall = var(40) > 0
trigger1 = time = 0
v = 40
value = -150

[State 1900, Palfx]
type = PalFX
trigger1 = gametime %2=0
time = 1
add = 120,80,0
sinadd = 64,32,5,3
ignorehitpause = 1

[State 1000, 1]
type = AfterImage
trigger1 = AnimElem = 1
time = 999
trans = add
length   = 5
timegap  = 2
framegap = 1
PalBright = 30 , 30 , 0
PalContrast = 255 , 255 , 0
PalAdd = 0 , 0 , 0
PalMul = .6 , .6 , 0
IgnoreHitPause = 1
Persistent = 1

[State 3000, 残像]
type = AfterImage
trigger1 = AnimTime = 0
time = 1
;--------------------------

[state 1000, VarSet]
type = varset
trigger1 = time = 0
var(17) = 0

[State 1000, 音を鳴らす]
type = PlaySnd
triggerall = var(7) = 0
trigger1 = AnimElem = 2
value = s10+(var(7)*10),22
channel = 10

[State 1000, 音を鳴らす]
type = PlaySnd
triggerall = var(7) = 1
trigger1 = AnimElem = 2
value = s10+(var(7)*10),6
channel = 10

[State 1000, ヘルパ?を出す]
type = Helper
trigger1 = AnimElem = 4
name = "AT01"
stateno = 11005
ID = 1005
helpertype = normal
pos = 50,-50
postype = p1
facing = 1
keyctrl = 0
ownpal = 1

[State 1000,]
type = ChangeState
triggerall = var(59) != 1 || var(59) = 1 && var(57) <= 2
triggerall = command = "弱?ニッツスパイク" | command = "強?ニッツスパイク"
trigger1 = AnimElemtime(6) >= 0 && AnimElemtime(8) < 0
value = 11040

[State 1000,]
type = ChangeState
triggerall = var(59) != 1 || var(59) = 1 && var(57) <= 2
triggerall = command = "a"
triggerall = command = "holdfwd"
trigger1 = AnimElemtime(6) >= 0 && AnimElemtime(8) < 0
value = ifelse(var(7)=1,11011,11010)

[State 1000,]
type = ChangeState
triggerall = var(59) != 1 || var(59) = 1 && var(57) <= 2
triggerall = command = "b"
triggerall = command = "holdfwd"
trigger1 = AnimElemtime(6) >= 0 && AnimElemtime(8) < 0
value = ifelse(var(7)=1,11025,11020)

[State 1000,]
type = ChangeState
triggerall = var(59) != 1 || var(59) = 1 && var(57) <= 2
triggerall = command = "a" | command = "b"
triggerall = command = "holdback"
trigger1 = AnimElemtime(6) >= 0 && AnimElemtime(8) < 0
value = 11300

;セカンドシェル(AI)
[State 1000,]
type = ChangeState
triggerall = var(59) = 1
triggerall = RoundState = 2
triggerall =!Enemy,NumProj
triggerall = EnemyNear(var(58)),StateType != L
triggerall = EnemyNear(var(58)),StateNo != [5100,5129]
triggerall = AnimElemtime(6) >= 0 && AnimElemtime(8) < 0
trigger1 = P2BodyDist X > 25
trigger1 = EnemyNear(var(58)),StateType = A
trigger1 = EnemyNear(var(58)),MoveType != H
trigger1 = EnemyNear(var(58)),Vel X > 0
trigger1 = EnemyNear(var(58)),facing != facing
trigger1 = P2BodyDist Y >= -160-EnemyNear(var(58)),Vel Y*8
trigger1 = Random <= ((var(57) * 12.5) * var(56))
trigger1 = Random <= 600 || var(57) >= 8
trigger2 = P2BodyDist X = [-5,50]
trigger2 = EnemyNear(var(58)),MoveType = H
trigger2 = EnemyNear(var(58)),StateType = A || EnemyNear(var(58)),StateNo != [120,159]
trigger3 = EnemyNear(var(58)),Stateno = 5608
trigger3 = EnemyNear(var(58)),MoveType = H
value = ifelse(var(7)=1,11025,11020)
ctrl = 0

;ブラックアウト(AI起き攻め)
[State 1000,]
type = ChangeState
triggerall = var(59) = 1
triggerall = RoundState = 2
triggerall =!EnemyNear(var(58)),HitDefAttr = SCA, NT, ST, HT
triggerall = AnimElemtime(6) >= 0 && AnimElemtime(8) < 0
trigger1 = Abs(EnemyNear(var(58)),Pos X - Pos X) < 150
trigger1 = EnemyNear(var(58)),StateNo = [5120,5129]
trigger1 = EnemyNear(var(58)),BackEdgeBodyDist > 40
trigger1 = random <= var(57) * 125
trigger1 = Random <= 300
value = 11300
ctrl = 0

;ブラックアウト(AI)
[State 1000,]
type = ChangeState
triggerall = var(59) = 1
triggerall = RoundState = 2
triggerall =!EnemyNear(var(58)),HitDefAttr = SCA, NT, ST, HT
triggerall = AnimElemtime(6) >= 0 && AnimElemtime(8) < 0
trigger1 = Abs(EnemyNear(var(58)),Pos X - Pos X) < 90 && EnemyNear(var(58)),Vel X >= 0
trigger1 = EnemyNear(var(58)),MoveType != H
trigger1 =!EnemyNear(var(58)),Ctrl
trigger1 = EnemyNear(var(58)),StateNo != [120,159]
trigger1 = EnemyNear(var(58)),StateNo != [5120,5129]
trigger1 = EnemyNear(var(58)),BackEdgeBodyDist > 40
trigger1 = random <= var(57) * 125
trigger1 = Random <= 600
value = 11300
ctrl = 0

;セカンドスパイク(AI)
[State 1000,]
type = ChangeState
triggerall = var(59) = 1
triggerall = RoundState = 2
triggerall = AnimElemtime(6) >= 0 && AnimElemtime(8) < 0
triggerall = FrontEdgeBodyDist > 60
triggerall = Helper(1005),movehit
trigger1 = P2BodyDist X = [50,140]
trigger1 = EnemyNear(var(58)),MoveType = H
trigger1 = EnemyNear(var(58)),StateNo != [120,159]
value = 11040
ctrl = 0

;セカンドシュ?ト(AI)
[State 1000,]
type = ChangeState
triggerall = var(59) = 1
triggerall = RoundState = 2
triggerall = AnimElemtime(6) >= 0 && AnimElemtime(8) < 0
;triggerall = FrontEdgeBodyDist > 60
trigger1 = P2BodyDist X > 140
trigger1 = Enemy(var(58)),StateType != A
trigger2 = P2BodyDist X > 140
trigger2 = EnemyNear(var(58)),StateType = A
trigger2 = EnemyNear(var(58)),MoveType = H
trigger3 = EnemyNear(var(58)),StateType = A
trigger3 = EnemyNear(var(58)),MoveType != H
trigger3 = EnemyNear(var(58)),Vel X < 0
trigger4 = P2BodyDist X >= 50
trigger4 = EnemyNear(var(58)),MoveType = H
trigger5 = Helper(1005),moveguarded
value = ifelse(var(7)=1,11011,11010)
ctrl = 0

[State 1000, ステ?ト変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
[Statedef 11005]
type     = S
movetype = A
physics  = N
ctrl     = 0
anim     = 11005
sprpriority = 5

[State 1001, 特殊効果]
type = AssertSpecial
trigger1 = 1
flag = NoShadow ;影を消す

[State -2, AirGuard]
type = AssertSpecial
triggerall = root,var(20) >= 1
trigger1 = p2statetype = A
flag = unguardable

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = time = 0
value = s12,1

[State 200, ヒット定?]
type = HitDef
triggerall = root,var(12) = 0
trigger1 = time = 0
attr = A, SP
damage    = floor(110*root,fvar(5)),10
getpower  = 0
givepower = 10,10
animtype = Hard
guardflag = MA
hitflag = MA
priority = 4, Hit
pausetime = 0,10+root,var(0)
sparkno = s10002+(root,var(11)*10000)
guard.sparkno = s10012+(root,var(11)*10000)
sparkxy = -15, -20
hitsound = s1,1+(root,var(11)*10)
guardsound = s2,1+(root,var(11)*10)
ground.type = High
ground.slidetime = 20
ground.hittime  = 21
ground.velocity = -5.5
airguard.velocity = -3,-2
air.type = High
air.velocity = -3.4,-3.8
air.fall = 1
fall.recover = 0
palfx.time = 30
palfx.add = 30,-40,-140
palfx.sinadd = 60,60,50,10
palfx.color = 0
palfx.invertall = 1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0

[State 3000]
type = Projectile
trigger1 = time = 0
projID = 1005
projanim = 11006
projremove = 0
projpriority = 2
projhitanim = -1
projremanim = -1
projsprpriority = 0
projshadow = 0,0,0
projremovetime = 40
offset = 0,0
velocity = 0,0

;ヒット判定
[State 1000, ]
type = ParentVarSet
trigger1 = movehit = 1
var(17) = 1

;ヒット数測定
[State 1000, ]
type = ParentVaradd
trigger1 = movehit = 1
fvar(1) = 1

;ガ?ドクラッシュ値削り
[state a]
type = parentvaradd
trigger1 = moveguarded = 1
fvar(10) = 16

;ガ?ドクラッシュ値回復不?時間
[State 1000, 0]
type = parentvarset
triggerall = fvar(11) != 180
triggerall = roundstate = 2
trigger1 = moveguarded = 1
fvar(11) = 180

;スロ?処理
[State 1000, ヘルパ?を出す]
type = Helper
trigger1 = Movehit = 1
name = "Slow"
stateno = 4900
ID = 4900
helpertype = normal
pos = 0,0
postype = p1
keyctrl = 0
ownpal = 1
ignorehitpause = 1
persistent = 0

;燃え小エフェクト
[State 1000, ヘルパ?を出す]
type = null;Helper
trigger1 = movehit = 1
name = "hit"
stateno = 101000
ID = 101000
helpertype = normal
pos = 0,0
postype = p2
keyctrl = 0
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 1001, このヘルパ?を消す]
type = DestroySelf
trigger1 = AnimTime = 0
trigger2 = Root,Anim = 1015 && Root,AnimElem = 4
trigger3 = Root,Anim = 1030 && Root,AnimElem = 4

;---------------------------------------------------------------------------
; EXセカンドシュ?ト

[Statedef 11010]
type     = S
movetype = A
physics  = S
juggle   = ifelse(var(12),31,1)
poweradd = 0
velset   = 0,0
anim     = 1010
ctrl     = 0
sprpriority = 2

;--------------------------
;EX必殺技?テンプレ
;--------------------------
[State 1900, Palfx]
type = PalFX
trigger1 = gametime %2=0
time = 1
add = 120,80,0
sinadd = 64,32,5,3
ignorehitpause = 1

[State 1000, 1]
type = AfterImage
trigger1 = AnimElem = 1
time = 999
trans = add
length   = 5
timegap  = 2
framegap = 1
PalBright = 30 , 30 , 0
PalContrast = 255 , 255 , 0
PalAdd = 0 , 0 , 0
PalMul = .6 , .6 , 0
IgnoreHitPause = 1
Persistent = 1

[State 3000, 残像]
type = AfterImage
trigger1 = AnimTime = 0
time = 1
;--------------------------

[State 1000, 音を鳴らす]
type = PlaySnd
triggerall = var(7) = 0
trigger1 = AnimElem = 4
value = s10+(var(7)*10),23
channel = 10

[State 1000, 音を鳴らす]
type = PlaySnd
triggerall = var(7) = 1
trigger1 = AnimElem = 4
value = s10+(var(7)*10),7
channel = 10

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 5
value = s12,2

[State 6000, 3]
type = StateTypeSet
trigger1 = AnimElem = 3
statetype = A

[State 6000, 3]
type = StateTypeSet
trigger1 = AnimElem = 11
statetype = S

[State 700, エフェクト?示]
type = Explod
trigger1 = AnimElem = 4
anim = 1011
postype = P1
pos = 50, -60
sprpriority = 5
ownpal = 1

[State 1000,4]
type = helper
trigger1 = AnimElem = 4
stateno = 11015
id = 1010
name = "Proj"
pos = 80,-55
postype = P1
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 1000, ステ?ト変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; EXセカンドシュ?ト(K-BLOOD)

[Statedef 11011]
type     = S
movetype = A
physics  = S
juggle   = ifelse(var(12),31,1)
poweradd = 0
velset   = 0,0
anim     = 1060
ctrl     = 0
sprpriority = 2

;--------------------------
;EX必殺技?テンプレ
;--------------------------
[State 1900, Palfx]
type = PalFX
trigger1 = gametime %2=0
time = 1
add = 120,80,0
sinadd = 64,32,5,3
ignorehitpause = 1

[State 1000, 1]
type = AfterImage
trigger1 = AnimElem = 1
time = 999
trans = add
length   = 5
timegap  = 2
framegap = 1
PalBright = 30 , 30 , 0
PalContrast = 255 , 255 , 0
PalAdd = 0 , 0 , 0
PalMul = .6 , .6 , 0
IgnoreHitPause = 1
Persistent = 1

[State 3000, 残像]
type = AfterImage
trigger1 = AnimTime = 0
time = 1
;--------------------------

[State 1000, 音を鳴らす]
type = PlaySnd
triggerall = var(7) = 0
trigger1 = AnimElem = 4
value = s10+(var(7)*10),23
channel = 10

[State 1000, 音を鳴らす]
type = PlaySnd
triggerall = var(7) = 1
trigger1 = AnimElem = 4
value = s10+(var(7)*10),7
channel = 10

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 5
value = s12,2

[State 6000, 3]
type = StateTypeSet
trigger1 = AnimElem = 3
statetype = A

[State 6000, 3]
type = StateTypeSet
trigger1 = AnimElem = 11
statetype = S

[State 700, エフェクト?示]
type = Explod
trigger1 = AnimElem = 5
anim = 1011
postype = P1
pos = 50, -60
sprpriority = 5
ownpal = 1

[State 1000,4]
type = helper
trigger1 = AnimElem = 5
stateno = 11015
id = 1010
name = "Proj"
pos = 80,-55
postype = P1
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 1000, ステ?ト変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;(HELPER)EXセカンドシュ?ト・ヘルパ?
[Statedef 11015]
type     = A
movetype = A
physics  = N
ctrl     = 0
anim     = 1015
sprpriority = 5

[State 170, 無敵]
type = NotHitBy
trigger1 = 1
value = SCA

[State 1001, 特殊効果]
type = AssertSpecial
trigger1 = 1
flag = NoShadow ;影を消す

[State -2, AirGuard]
type = AssertSpecial
triggerall = root,var(20) >= 1
trigger1 = p2statetype = A
flag = unguardable

[state a]
type = velset
trigger1 = time = 0
x = 8

[State 200, ヒット定?]
type = HitDef
triggerall = root,var(12) = 0
trigger1 = 1
attr = A, SP
damage    = floor(ifelse(root,var(17),55,110)*root,fvar(5)),10
getpower  = 0
givepower = 10,10
animtype = Hard
guardflag = MA
hitflag = MAF
priority = 4, Hit
pausetime = 0,10+root,var(0)
sparkno = s10002+(root,var(11)*10000)
guard.sparkno = s10012+(root,var(11)*10000)
sparkxy = 20,0
hitsound = s1,1+(root,var(11)*10)
guardsound = s2,1+(root,var(11)*10)
ground.type = High
ground.hittime = 17
ground.slidetime = 17
ground.velocity = -9
air.velocity = -3.6,-3.8
yaccel = .35
air.fall = 1
fall.recover = 0
palfx.time = 35
palfx.add = 30,-40,-140
palfx.sinadd = 60,60,50,10
palfx.color = 0
palfx.invertall = 1

[State 3000]
type = Projectile
trigger1 = time = 0
projID = 1010
projanim = 1017
projremove = 1
projpriority = 2
projhitanim = -1
projremanim = -1
projsprpriority = 0
projshadow = 0,0,0
projremovetime = -1
offset = 0,0
velocity = vel X, vel Y

;ヒット数測定
[State 1000, ]
type = ParentVaradd
trigger1 = movehit = 1
fvar(1) = 1

;ガ?ドクラッシュ値削り
[state a]
type = parentvaradd
trigger1 = moveguarded = 1
fvar(10) = 16

;ガ?ドクラッシュ値回復不?時間
[State 1000, 0]
type = ParentVarSet
triggerall = fvar(11) != 180
triggerall = roundstate = 2
trigger1 = moveguarded = 1
fvar(11) = 180

;ジャグル設定
[State 1000, Juggle]
type = ParentVarSet
trigger1 = p2statetype = A
trigger1 = movehit
var(12) = 2

;スロ?処理
[State 1000, ヘルパ?を出す]
type = Helper
trigger1 = Movehit = 1
name = "Slow"
stateno = 4900
ID = 4900
helpertype = normal
pos = 0,0
postype = p1
keyctrl = 0
ownpal = 1
ignorehitpause = 1
persistent = 0

;燃え小エフェクト
[State 1000, ヘルパ?を出す]
type = null;Helper
trigger1 = movehit = 1
name = "hit"
stateno = 101000
ID = 101000
helpertype = normal
pos = 0,0
postype = p2
keyctrl = 0
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 1001, このヘルパ?を消す]
type = DestroySelf
trigger1 = time >= 300
trigger2 = frontedgedist <= -80

[State 200, 7]
type = changestate
trigger1 = movecontact
trigger2 = root,numprojID(1010) = 0
value = 1016

;---------------------------------------------------------------------------
; EXセカンドシェル

[Statedef 11020]
type     = S
movetype = A
physics  = S
juggle   = ifelse(var(12),31,(ifelse(var(13),31,1)))
poweradd = 0
velset   = 0,0
anim     = 1020
ctrl     = 0
sprpriority = 2

;--------------------------
;EX必殺技?テンプレ
;--------------------------
[State 1900, Palfx]
type = PalFX
trigger1 = gametime %2=0
time = 1
add = 120,80,0
sinadd = 64,32,5,3
ignorehitpause = 1

[State 1000, 1]
type = AfterImage
trigger1 = AnimElem = 1
time = 999
trans = add
length   = 5
timegap  = 2
framegap = 1
PalBright = 30 , 30 , 0
PalContrast = 255 , 255 , 0
PalAdd = 0 , 0 , 0
PalMul = .6 , .6 , 0
IgnoreHitPause = 1
Persistent = 1

[State 3000, 残像]
type = AfterImage
trigger1 = AnimTime = 0
time = 1
;--------------------------

[State 1000, 音を鳴らす]
type = PlaySnd
triggerall = var(7) = 0
trigger1 = AnimElem = 3
value = s10+(var(7)*10),24
channel = 10

[State 1000, 音を鳴らす]
type = PlaySnd
triggerall = var(7) = 1
trigger1 = AnimElem = 3
value = s10+(var(7)*10),8
channel = 10

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 4
value = s12,2

[State 700, エフェクト?示]
type = Explod
trigger1 = AnimElem = 5
anim = 1025
postype = p1
offset = 100,-165
sprpriority = 3
removetime = 25
bindtime = 1
ownpal = 1

[State 200, ヒット定?]
type = HitDef
trigger1 = time = 0
attr = S, SA
damage    = ifelse(var(17),55,110),10
getpower  = 0
givepower = 10,10
animtype = up
guardflag = MA
hitflag = MAF
priority = 4, Hit
pausetime = 5, 8
sparkno = 202
guard.sparkno = s10012+(var(11)*10000)
sparkxy = -15, -95
hitsound = s1,3+(var(11)*10)
guardsound = s2,1+(var(11)*10)
ground.type = High
ground.slidetime = 20
ground.hittime  = 21
ground.velocity = -1.5,-10.1
airguard.velocity = -3.2,-4.2
air.type = High
air.velocity = -1.5,-10.1
fall = 1
fall.recover = 0
palfx.time = 70
palfx.add = 30,-40,-140
palfx.sinadd = 60,60,50,10
palfx.color = 0
palfx.invertall = 1

;燃え小エフェクト
[State 1000, ヘルパ?を出す]
type = null;Helper
trigger1 = movehit = 1
name = "hit"
stateno = 101000
ID = 101000
helpertype = normal
pos = 0,0
postype = p2
keyctrl = 0
ownpal = 1

[State 1000, ステ?ト変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; EXセカンドシェル(K-BLOOD)

[Statedef 11025]
type     = S
movetype = A
physics  = S
juggle   = ifelse(var(12),31,(ifelse(var(13),31,1)))
poweradd = 0
velset   = 0,0
anim     = 1070
ctrl     = 0
sprpriority = 2

;--------------------------
;EX必殺技?テンプレ
;--------------------------
[State 1900, Palfx]
type = PalFX
trigger1 = gametime %2=0
time = 1
add = 120,80,0
sinadd = 64,32,5,3
ignorehitpause = 1

[State 1000, 1]
type = AfterImage
trigger1 = AnimElem = 1
time = 999
trans = add
length   = 5
timegap  = 2
framegap = 1
PalBright = 30 , 30 , 0
PalContrast = 255 , 255 , 0
PalAdd = 0 , 0 , 0
PalMul = .6 , .6 , 0
IgnoreHitPause = 1
Persistent = 1

[State 3000, 残像]
type = AfterImage
trigger1 = AnimTime = 0
time = 1
;--------------------------

[State 1000, 音を鳴らす]
type = PlaySnd
triggerall = var(7) = 0
trigger1 = AnimElem = 3
value = s10+(var(7)*10),24
channel = 10

[State 1000, 音を鳴らす]
type = PlaySnd
triggerall = var(7) = 1
trigger1 = AnimElem = 3
value = s10+(var(7)*10),8
channel = 10

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 4
value = s12,2

[State 700, エフェクト?示]
type = Explod
trigger1 = AnimElem = 4
anim = 1075
postype = P1
pos = 66, -88
sprpriority = 5
ownpal = 1
scale = 1,1.25
vel = 1,-1
accel = -.032,.045

[State 200, ヒット定?]
type = HitDef
trigger1 = time = 0
attr = S, SA
damage    = ifelse(var(17),55,110),10
getpower  = 0
givepower = 10,10
animtype = up
guardflag = MA
hitflag = MAF
priority = 4, Hit
pausetime = 5, 8
sparkno = 202
guard.sparkno = s10012+(var(11)*10000)
sparkxy = -15, -95
hitsound = s1,3+(var(11)*10)
guardsound = s2,1+(var(11)*10)
ground.type = High
ground.slidetime = 20
ground.hittime  = 21
ground.velocity = -1.5,-10.1
airguard.velocity = -3.2,-4.2
air.type = High
air.velocity = -1.5,-10.1
fall = 1
fall.recover = 0
palfx.time = 70
palfx.add = 30,-40,-140
palfx.sinadd = 60,60,50,10
palfx.color = 0
palfx.invertall = 1

;燃え小エフェクト
[State 1000, ヘルパ?を出す]
type = null;Helper
trigger1 = movehit = 1
name = "hit"
stateno = 101000
ID = 101000
helpertype = normal
pos = 0,0
postype = p2
keyctrl = 0
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 1000, ステ?ト変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; セカンドスパイク

[Statedef 11040]
type     = S
movetype = A
physics  = N
juggle   = ifelse(var(12),31,(ifelse(var(14),31,1)))
poweradd = 50
velset   = 0,0
anim     = 1040
ctrl     = 0
sprpriority = 2

;--------------------------
;EX必殺技?テンプレ
;--------------------------
[State 1900, Palfx]
type = PalFX
trigger1 = gametime %2=0
time = 1
add = 120,80,0
sinadd = 64,32,5,3
ignorehitpause = 1

[State 1000, 1]
type = AfterImage
trigger1 = AnimElem = 1
time = 999
trans = add
length   = 5
timegap  = 2
framegap = 1
PalBright = 30 , 30 , 0
PalContrast = 255 , 255 , 0
PalAdd = 0 , 0 , 0
PalMul = .6 , .6 , 0
IgnoreHitPause = 1
Persistent = 1

[State 3000, 残像]
type = AfterImage
trigger1 = AnimTime = 0
time = 1
;--------------------------

[State 1000, 音を鳴らす]
type = PlaySnd
triggerall = var(7) = 0
trigger1 = AnimElem = 1
value = s10,27
channel = 10

[State 1000, 音を鳴らす]
type = PlaySnd
triggerall = var(7) = 1
trigger1 = AnimElem = 1
value = s20,8
channel = 10

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 1
value = s12,9

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 3
value = s12,2

[State 0, Explod]
type = Explod
trigger1 = animelemtime(3) = 0
anim = 1041
ID = 1041
pos = 0,0
postype = p1
bindtime = -1
scale = 1,1
sprpriority = 5
ownpal = 1
removeongethit = 1
ignorehitpause = 0

[State 0, Explod]
type = Explod
trigger1 = animelemtime(3) = 1
anim = 1042
ID = 1042
pos = 0,0
postype = p1
bindtime = -1
scale = 1,1
sprpriority = 5
ownpal = 1
removeongethit = 1
ignorehitpause = 0

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = animelem = 4
statetype = A

[State 1001, 3]
type = VelSet
trigger1 = AnimElem = 1
x = 9
y = -4

[State 1001, 4]
type = VelAdd
trigger1 = AnimElem = 1 > 0
y = .28

[State 1200, movetype]
type = StateTypeSet
trigger1 = AnimElem = 11
movetype = I

[State 200, ヒット定?]
type = HitDef
trigger1 = time = 0
attr = A, SA
damage    = ifelse(var(17),60,120),10
getpower  = 0
givepower = 10,10
animtype = Diagup
guardflag = MA
hitflag = MAF
priority = 4, Hit
pausetime = 10, 11
sparkno = 202
guard.sparkno = s10012+(var(11)*10000)
sparkxy = -15, -75
hitsound = s1,4+(var(11)*10)
guardsound = s2,1+(var(11)*10)
ground.type = High
ground.slidetime = 20
ground.hittime  = 21
ground.velocity = -20,-6
airguard.velocity = -3.8,-3.3
air.type = High
air.velocity = -20,-6
fall = 1
fall.recover = 0
palfx.time = 60
palfx.add = 30,-40,-140
palfx.sinadd = 60,60,50,10
palfx.color = 0
palfx.invertall = 1
envshake.time = 10
envshake.ampl = 2
envshake.freq = 100
p2facing = 1
p2stateno = 35605

;燃え小エフェクト
[State 1000, ヘルパ?を出す]
type = null;Helper
trigger1 = movehit = 1
name = "hit"
stateno = 101000
ID = 101000
helpertype = normal
pos = 0,0
postype = p2
keyctrl = 0
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 1000, ステ?ト変更]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >=Helper(100000),var(0)
value = 1201

;-------------------------------------------------------------------------------
; ヘブンズドライブ

[Statedef 11100]
type     = S
movetype = A
physics  = N
juggle   = 0
poweradd = 0
velset   = 0,0
anim     = 11100
ctrl     = 0
sprpriority = 2
facep2 = 1

[state 1000, VarSet];先行入力初期化
type = varset
trigger1 = time = 0
var(31) = 0

[state 1000, VarSet];先行入力初期化
type = varset
trigger1 = time = 0
var(32) = 0

;--------------------------
;EX必殺技?テンプレ
;--------------------------
[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 1
value = s9,6

[state a]
type = poweradd
trigger1 = var(40) = 0
trigger1 = time = 0
value = -500

[State a];MAXゲ?ジ
type = varadd
triggerall = var(40) > 0
trigger1 = time = 0
v = 40
value = -150

[State 1900, Palfx]
type = PalFX
trigger1 = gametime %2=0
time = 1
add = 120,80,0
sinadd = 64,32,5,3
ignorehitpause = 1

[State 1000, 1]
type = AfterImage
trigger1 = AnimElem = 1
time = 999
trans = add
length   = 5
timegap  = 2
framegap = 1
PalBright = 30 , 30 , 0
PalContrast = 255 , 255 , 0
PalAdd = 0 , 0 , 0
PalMul = .6 , .6 , 0
IgnoreHitPause = 1
Persistent = 1

[State 3000, 残像]
type = AfterImage
trigger1 = AnimTime = 0
time = 1
;--------------------------

[State 0, Width]
type = Width
trigger1 = 1
player = 10,10
edge = 10,10

[State 170, 無敵]
type = NotHitBy
trigger1 = time = 0
value = SCA
time = 15

[State 1000, 音を鳴らす]
type = PlaySnd
triggerall = var(7) = 0
trigger1 = AnimElem = 4
value = s10,43
volume = 255
channel = 10

[State 1000, 音を鳴らす]
type = PlaySnd
triggerall = var(7) = 0
trigger1 = AnimElem = 25
value = s10,44

[State 1000, 音を鳴らす]
type = PlaySnd
triggerall = var(7) = 1
trigger1 = AnimElem = 4
value = s20,16
channel = 10

[State 1000, 音を鳴らす]
type = PlaySnd
triggerall = var(7) = 1
trigger1 = AnimElem = 25
value = s20,11

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 4
trigger2 = AnimElem = 14
value = s12,4

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 25
value = s12,2

[State 700, エフェクト?示]
type = Explod
trigger1 = AnimElem = 5
trigger2 = AnimElem = 15
anim = 1110
postype = P1
pos = -25, -10
sprpriority = 3
ownpal = 1
bindtime = -1
supermove = 1
ignorehitpause = 0
removeongethit = 1
ID = 1150

[State 700, エフェクト?示]
type = Explod
trigger1 = AnimElem = 5
trigger2 = AnimElem = 15
anim = 1115
postype = P1
pos = -15,10
sprpriority = 5
ownpal = 1
bindtime = -1
supermove = 1
ignorehitpause = 0
removeongethit = 1
ID = 1150

[State 700, エフェクト?示]
type = Explod
trigger1 = AnimElem = 24
anim = 1165
postype = P1
pos = 0, 0
persistent = 0
sprpriority = 5
ownpal = 1
supermove = 1
ignorehitpause = 0
removeongethit = 1

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = animelem = 27
movetype = I

[State 0, PosAdd]
type = PosAdd
trigger1 = animelem = 7
trigger2 = animelem = 17
x = 26

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 3
x = 2

[State 0, VelMul]
type = VelMul
trigger1 = animelemtime(3) > 0
x = 1

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 17
x = 5.3961334228515625

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 21
x = 2

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = animelem = 17
statetype = A

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 17
y = -9.5

[State 0, VelAdd]
type = VelAdd
trigger1 = animelemtime(17) > 0
y = 0.42

[State 0, Width]
type = Width
trigger1 = 1
player = 10,10
edge = 10,10

[State 200, 1]
type = HitDef
trigger1 = animelem = 4
trigger2 = animelem = 6
trigger3 = animelem = 7
trigger4 = animelem = 15
trigger5 = animelem = 16
trigger6 = animelem = 17
attr = S, HA
damage    = 25,10
getpower  = 0
givepower = 10,10
animtype = Hard
guardflag = M
hitflag = MAF
priority = 5, Hit
pausetime = 3,16
sparkno = 202
guard.sparkno = s10012+(var(11)*10000)
sparkxy = -10, -70
hitsound = s1,1+(var(11)*10)
guardsound = s2,1+(var(11)*10)
ground.type = Low
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -1
guard.velocity = -12
guard.pausetime = 0,11
guard.slidetime = 10
guard.hittime = 18
guard.ctrltime = 18
airguard.velocity = -4,-1
air.type = High
air.velocity = 0, -6.5
air.hittime = 11
air.animtype = back
fall.animtype = back
ground.cornerpush.veloff = -1
air.cornerpush.veloff = 0
guard.cornerpush.veloff = -1
fall = 0
fall.recover = 0
yaccel = .45
palfx.time = 30
palfx.add = 30,-40,-140
palfx.sinadd = 60,60,50,10
palfx.color = 0
palfx.invertall = 1

[State 200, 1]
type = HitDef
trigger1 = animelem = 18
trigger2 = animelem = 19
attr = A, HA
damage    = 25,10
getpower  = 0
givepower = 10,10
animtype = Hard
guardflag = M
hitflag = MAF
priority = 5, Hit
pausetime = 3,4
sparkno = 202
guard.sparkno = s10012+(var(11)*10000)
sparkxy = -10, -70
hitsound = s1,1+(var(11)*10)
guardsound = s2,1+(var(11)*10)
ground.type = Low
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -2,-10
guard.velocity = -12
guard.pausetime = 0,11
guard.slidetime = 10
guard.hittime = 18
guard.ctrltime = 18
airguard.velocity = -4,-1
air.type = High
air.velocity = -2,-10
air.hittime = 11
air.animtype = back
fall.animtype = back
ground.cornerpush.veloff = -1
air.cornerpush.veloff = 0
guard.cornerpush.veloff = -1
fall = 1
fall.recover = 0
yaccel = .5
palfx.time = 30
palfx.add = 30,-40,-140
palfx.sinadd = 60,60,50,10
palfx.color = 0
palfx.invertall = 1

[State 200, ヒット定?]
type = HitDef
trigger1 = AnimElem = 26
attr = A, SA
damage    = 25,10
getpower  = 0
givepower = 10,10
animtype = up
guardflag = MA
hitflag = MAF
priority = 4, Hit
pausetime = 12, 19
sparkno = 202
guard.sparkno = s10012+(var(11)*10000)
sparkxy = -15, -70
hitsound = s1,4+(var(11)*10)
guardsound = s2,1+(var(11)*10)
ground.type = High
ground.slidetime = 20
ground.hittime  = 21
ground.velocity = -8,14
airguard.velocity = -3.7,-3.5
air.type = High
air.velocity = -8,14
fall = 1
fall.recover = 0
palfx.time = 50
palfx.add = 30,-40,-140
palfx.sinadd = 60,60,50,10
palfx.color = 0
palfx.invertall = 1
fall.envshake.ampl = 5
fall.envshake.freq = 100
fall.envshake.time = 10
;p2stateno = ifelse(p2statetype = A,5635,5630)

;燃え小エフェクト
[State 1000, ヘルパ?を出す]
type = null;Helper
trigger1 = movehit = 1
name = "hit"
stateno = 101000
ID = 101000
helpertype = normal
pos = 0,0
postype = p2
keyctrl = 0
ownpal = 1

[State 1000, ステ?ト変更]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= Helper(100000),var(0)
value = 3205

;---------------------------------------------------------------------------
; EXブラックアウト

[Statedef 11300]
type     = S
movetype = I
physics  = S
juggle   = 0
poweradd = 0
velset   = 0,0
anim     = 1350
ctrl     = 0
sprpriority = 1
facep2 = 1

[state 1000, VarSet];先行入力初期化
type = varset
trigger1 = time = 0
var(31) = 0

[state 1000, VarSet];先行入力初期化
type = varset
trigger1 = time = 0
var(32) = 0

;--------------------------
;EX必殺技?テンプレ
;--------------------------
[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = time = 0
value = s9,6

[state a]
type = poweradd
triggerall = prevstateno != 11000
trigger1 = var(40) = 0
trigger1 = time = 0
value = -500

[State a];MAXゲ?ジ
type = varadd
triggerall = prevstateno != 11000
triggerall = var(40) > 0
trigger1 = time = 0
v = 40
value = -150

[State 1900, Palfx]
type = PalFX
trigger1 = gametime %2=0
time = 1
add = 120,80,0
sinadd = 64,32,5,3
ignorehitpause = 1

[State 1000, 1]
type = AfterImage
trigger1 = AnimElem = 1
time = 999
trans = add
length   = 5
timegap  = 2
framegap = 1
PalBright = 30 , 30 , 0
PalContrast = 255 , 255 , 0
PalAdd = 0 , 0 , 0
PalMul = .6 , .6 , 0
IgnoreHitPause = 1
Persistent = 1

[State 3000, 残像]
type = AfterImage
trigger1 = AnimTime = 0
time = 1
;--------------------------

[State 170, 無敵]
type = NotHitBy
trigger1 = AnimElemtime(1) >= 0 && AnimElemtime(11) < 0
value = SCA

[State 1000, 音を鳴らす]
type = PlaySnd
triggerall = var(7) = 0
trigger1 = AnimElem = 2
value = s10+(var(7)*10),25
channel = 10

[State 1000, 音を鳴らす]
type = PlaySnd
triggerall = var(7) = 1
trigger1 = AnimElem = 2
value = s10+(var(7)*10),10
channel = 10

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 3
value = s12,5

[State 1000, ]
type = MakeDust
trigger1 = AnimElemtime(9) >= 0 && AnimElemtime(12) < 0
spacing = 3

[State 1000, ]
type = Veladd
trigger1 = AnimElemtime(2) >= 0 && AnimElemtime(9) < 0
x = 1.5

[State 1000, ]
type = Velset
trigger1 = AnimElem = 8
x = 30

[State 1000, ]
type = Velset
trigger1 = AnimElem = 12
x = 5

[State 1000, ]
type = Velset
trigger1 = AnimElem = 14
x = 0

[State 2110, 相手と重なった時の処理]
type = PlayerPush
trigger1 = AnimElemTime(1) > 0 && AnimElemtime(13) <= 0
value = 0

[State 1000, ステ?ト変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;EXエアトリガ?

[Statedef 11400]
type     = A
movetype = A
physics  = N
juggle   = 0
poweradd = 50
anim     = 11400
ctrl     = 0
sprpriority = 2

[state 1000, VarSet];先行入力初期化
type = varset
trigger1 = time = 0
var(31) = 0

[state 1000, VarSet];先行入力初期化
type = varset
trigger1 = time = 0
var(32) = 0

;--------------------------
;EX必殺技?テンプレ
;--------------------------
[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = time = 0
value = s9,6

[state a]
type = poweradd
trigger1 = var(40) = 0
trigger1 = time = 0
value = -500

[State a];MAXゲ?ジ
type = varadd
triggerall = var(40) > 0
trigger1 = time = 0
v = 40
value = -150

[State 1900, Palfx]
type = PalFX
trigger1 = gametime %2=0
time = 1
add = 120,80,0
sinadd = 64,32,5,3
ignorehitpause = 1

[State 1000, 1]
type = AfterImage
trigger1 = AnimElem = 1
time = 999
trans = add
length   = 5
timegap  = 2
framegap = 1
PalBright = 30 , 30 , 0
PalContrast = 255 , 255 , 0
PalAdd = 0 , 0 , 0
PalMul = .6 , .6 , 0
IgnoreHitPause = 1
Persistent = 1

[State 3000, 残像]
type = AfterImage
trigger1 = AnimTime = 0
time = 1
;--------------------------

[State 1400, movetype]
type = StateTypeSet
trigger1 = AnimElem = 16
movetype = I

[State 1000, 音を鳴らす]
type = PlaySnd
triggerall = var(7) = 0
trigger1 = AnimElem = 1
value = s10+(var(7)*10),40
channel = 10

[State 1000, 音を鳴らす]
type = PlaySnd
triggerall = var(7) = 1
trigger1 = AnimElem = 5
value = s10+(var(7)*10),12
channel = 10

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 6
trigger2 = AnimElem = 14
value = s12,11

[State 1000, ]
type = Velset
trigger1 = AnimElem = 6
trigger2 = AnimElem = 14
x = -3
y = -4

[State 1000, ]
type = Veladd
trigger1 = AnimElemtime(6) >= 0
y = .42

[State 700, エフェクト?示]
type = Explod
trigger1 = AnimElem = 5
trigger2 = AnimElem = 13
anim = 1405
postype = P1
pos = 20, -50
sprpriority = 5
ownpal = 1
bindtime = 5
supermove = 1
ignorehitpause = 0
removeongethit = 1

[State 1000,4]
type = helper
trigger1 = AnimElem = 6
stateno = 11410
id = 1400
name = "Proj"
pos = 10,-50
postype = P1
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 1000,4]
type = helper
trigger1 = AnimElem = 14
stateno = 11411
id = 1400
name = "Proj"
pos = 10,-50
postype = P1
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 1000, ステ?ト変更]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= Helper(100000),var(0)
value = 1201

;---------------------------------------------------------------------------
;(HELPER)エアトリガ?・ヘルパ?
[Statedef 11410]
type     = A
movetype = A
physics  = N
ctrl     = 0
anim     = 1410
sprpriority = 5

[State 170, 無敵]
type = NotHitBy
trigger1 = 1
value = SCA

[State 1001, 特殊効果]
type = AssertSpecial
trigger1 = 1
flag = NoShadow ;影を消す

[State -2, AirGuard]
type = AssertSpecial
triggerall = root,var(20) >= 1
trigger1 = p2statetype = A
flag = unguardable

[state a]
type = velset
trigger1 = time = 0
x = 11
y = 10

[State 200, ヒット定?]
type = HitDef
trigger1 = 1
attr = A, SP
damage    = floor(80*root,fvar(5)),10
getpower  = 0
givepower = 10,10
animtype = Hard
guardflag = MA
hitflag = MAF
priority = 4, Hit
pausetime = 0,10+root,var(0)
sparkno = s10002+(root,var(11)*10000)
guard.sparkno = s10012+(root,var(11)*10000)
sparkxy = 20,0
hitsound = s1,1+(root,var(11)*10)
guardsound = s2,1+(root,var(11)*10)
ground.type = High
ground.hittime = 17
ground.slidetime = 17
ground.velocity = -8
guard.velocity = -8
air.velocity = -3.5,-3.1
air.fall = 1
fall.recover = 0
palfx.time = 30
palfx.add = 30,-40,-140
palfx.sinadd = 60,60,50,10
palfx.color = 0
palfx.invertall = 1
fall.envshake.ampl = 5
fall.envshake.freq = 100
fall.envshake.time = 10

[State 3000]
type = Projectile
trigger1 = time = 0
projID = 1400
projanim = 1411
projremove = 1
projpriority = 1
projhitanim = -1
projremanim = -1
projsprpriority = 0
projshadow = 0,0,0
projremovetime = -1
offset = 0,0
velocity = vel X, vel Y

;ヒット数測定
[State 1000, ]
type = ParentVaradd
trigger1 = movehit = 1
fvar(1) = 1

;ガ?ドクラッシュ値削り
[state a]
type = parentvaradd
trigger1 = moveguarded = 1
fvar(10) = 16

;ガ?ドクラッシュ値回復不?時間
[State 1000, 0]
type = ParentVarSet
triggerall = fvar(11) != 180
triggerall = roundstate = 2
trigger1 = moveguarded = 1
fvar(11) = 180

;スロ?処理
[State 1000, ヘルパ?を出す]
type = Helper
trigger1 = Movehit = 1
name = "Slow"
stateno = 4900
ID = 4900
helpertype = normal
pos = 0,0
postype = p1
keyctrl = 0
ownpal = 1
ignorehitpause = 1
persistent = 0

;燃え小エフェクト
[State 1000, ヘルパ?を出す]
type = null;Helper
trigger1 = movehit = 1
name = "hit"
stateno = 101000
ID = 101000
helpertype = normal
pos = 0,0
postype = p2
keyctrl = 0
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 200, 7]
type = changestate
trigger1 = movecontact
trigger2 = root,numprojID(1400) = 0
value = 1415

;---------------------------------------------------------------------------
;(HELPER)エアトリガ?・ヘルパ?
[Statedef 11411]
type     = A
movetype = A
physics  = N
ctrl     = 0
anim     = 1410
sprpriority = 5

[State 170, 無敵]
type = NotHitBy
trigger1 = 1
value = SCA

[State 1001, 特殊効果]
type = AssertSpecial
trigger1 = 1
flag = NoShadow ;影を消す

[State -2, AirGuard]
type = AssertSpecial
triggerall = root,var(20) >= 1
trigger1 = p2statetype = A
flag = unguardable

[state a]
type = velset
trigger1 = time = 0
x = 13
y = 10

[State 200, ヒット定?]
type = HitDef
trigger1 = 1
attr = A, SP
damage    = floor(80*root,fvar(5)),10
getpower  = 0
givepower = 10,10
animtype = Hard
guardflag = MA
hitflag = MAF
priority = 4, Hit
pausetime = 0,10+root,var(0)
sparkno = s10002+(root,var(11)*10000)
guard.sparkno = s10012+(root,var(11)*10000)
sparkxy = 20,0
hitsound = s1,1+(root,var(11)*10)
guardsound = s2,1+(root,var(11)*10)
ground.type = High
ground.hittime = 17
ground.slidetime = 17
ground.velocity = -3.5,-3.1
air.velocity = -3.5,-3.1
fall = 1
fall.recover = 0
palfx.time = 30
palfx.add = 30,-40,-140
palfx.sinadd = 60,60,50,10
palfx.color = 0
palfx.invertall = 1
fall.envshake.ampl = 5
fall.envshake.freq = 100
fall.envshake.time = 10

[State 3000]
type = Projectile
trigger1 = time = 0
projID = 1400
projanim = 1411
projremove = 1
projpriority = 1
projhitanim = -1
projremanim = -1
projsprpriority = 0
projshadow = 0,0,0
projremovetime = -1
offset = 0,0
velocity = vel X, vel Y

;ヒット数測定
[State 1000, ]
type = ParentVaradd
trigger1 = movehit = 1
fvar(1) = 1

;ガ?ドクラッシュ値削り
[state a]
type = parentvaradd
trigger1 = moveguarded = 1
fvar(10) = 16

;ガ?ドクラッシュ値回復不?時間
[State 1000, 0]
type = ParentVarSet
triggerall = fvar(11) != 180
triggerall = roundstate = 2
trigger1 = moveguarded = 1
fvar(11) = 180

;スロ?処理
[State 1000, ヘルパ?を出す]
type = Helper
trigger1 = Movehit = 1
name = "Slow"
stateno = 4900
ID = 4900
helpertype = normal
pos = 0,0
postype = p1
keyctrl = 0
ownpal = 1
ignorehitpause = 1
persistent = 0

;燃え小エフェクト
[State 1000, ヘルパ?を出す]
type = null;Helper
trigger1 = movehit = 1
name = "hit"
stateno = 101000
ID = 101000
helpertype = normal
pos = 0,0
postype = p2
keyctrl = 0
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 200, 7]
type = changestate
trigger1 = movecontact
trigger2 = root,numprojID(1400) = 0
value = 1415

;この下、一行以上空ける事…
