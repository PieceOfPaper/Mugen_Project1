;---------------------------------------------------------------------------
; ここからは超必殺技のステート
;---------------------------------------------------------------------------
; ヒートドライブ

[Statedef 3000]
type     = S
movetype = A
physics  = S
juggle   = 0
velset   = 0,0
anim     = 3000
ctrl     = 0
sprpriority = 2
facep2 = 1

[State 1000, ]
type = Varset
trigger1 = time = 0
var(30) = 0

[State 3000, SC]
type = Varset
trigger1 = (prevstateno = [1000,2999])
trigger2 = (prevstateno = [11000,12999])
var(30) = 1

[state 1000, VarSet];先行入力初期化
type = varset
trigger1 = time = 0
var(31) = 0

[state 1000, VarSet];先行入力初期化
type = varset
trigger1 = time = 0
var(32) = 0

[State 3000, Juggle]
type = Varset
trigger1 = var(30)
var(12) = 0

[State 3000, スキルゲージ消費]
type = varadd
triggerall = var(40) = 0
triggerall = fvar(35) >= 100
triggerall = time = 0
trigger1 = (prevstateno = [1000,2999]) || (prevstateno = [11000,12999])
trigger2 = prevstateno = [3000,3999]
fvar(35) = -101

[State 3000, パワーゲージ消費]
type = poweradd
trigger1 = var(40) = 0
trigger1 = time = 0
value = -1000

[State 3000, パワーMAX解除]
type = varset
trigger1 = time = 0
v = 40
value = 0

[State 810, 物理的なキャラの幅]
type = Width
trigger1 = 1
edge = 15,0

[State 170, 無敵]
type = NotHitBy
trigger1 = time = 0
value = SCA
time = 30

[State 700,];点滅
type = palfx
triggerall = time = 0
trigger1 = (prevstateno = [1000,2999]) || (prevstateno = [11000,12999])
time = 5
add = 230,230,230

[State 2000, 超必殺技発動の時間停止]
type = SuperPause
trigger1 = time = 0
anim = -1
movetime = 30
time = 30
p2defmul = 1.0
darken = 0

[State 2000]
type = AssertSpecial
trigger1 = Time = [0,30]
flag = NoFG
;flag2 = NOBG
ignorehitpause = 1

[State 2000]
type = null;Explod
trigger1 = AnimElem = 1
anim = 10500+(var(11)*10000)
pos = 0,-80
sprpriority = -3
ownpal = 1
bindtime = 1
supermove = 1

[State 2000]
type = null;Explod
trigger1 = AnimElem = 1
anim = 10501+(var(11)*10000)
pos = 0,-80
sprpriority = 20
ownpal = 1
bindtime = 1
supermove = 1

[State 2000]
type = Explod
trigger1 = AnimElem = 1
anim = F276
pos = 0,-80
sprpriority = 20
ownpal = 1
bindtime = 1
supermove = 1

;SC------------------
[State 1]
type = null;Helper
triggerall = Numhelper(10550)=0
trigger1 = (prevstateno = [1000,2999]) || (prevstateno = [11000,12999])
trigger1 = time = 0
helpertype = normal
name = "SC"
stateno = 10550
ID = 10550
pos = 0,0
postype = left
keyctrl = 0
ownpal = 1
facing = 1
supermovetime = 99
pausemovetime = 99
size.xscale = 1
size.yscale = 1
size.shadowoffset = 0
ignorehitpause = 0

[State -2, ????]
type = Helper
triggerall = time = 0
trigger1 = prevstateno = [1000,2999]
ID = 100500
name = "SuperCancel"
postype = P1
pos = 0,0
sprpriority = -9
stateno = 100500
helpertype = normal
keyctrl = 0
persistent = 1
ignorehitpause = 1
ownpal = 1

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 1
value = s9,0+(var(11)*10)

[State 1000, 音を鳴らす]
type = PlaySnd
triggerall = var(7) = 0
trigger1 = AnimElem = 1
value = s10+(var(7)*10),30
channel = 10

[State 700, エフェクト表示]
type = Explod
trigger1 = AnimElem = 4
anim = 3005
postype = P1
pos = 0, 0
bindtime = -1
removetime = -1
sprpriority = 5
ownpal = 1
supermove = 1
removeongethit = 1
ID = 3000

[State 181,]
type = PlaySnd
trigger1 = AnimElem = 54
value = s12,0

[State 1000, ]
type = Varset
trigger1 = time = 0
trigger1 = command = "x"
var(15) = 0

[State 1000, ]
type = Varset
trigger1 = time = 0
trigger1 = command = "y"
var(15) = 1

[State 3000, ステート変更]
type = ChangeState
triggerall = Time >= 33
trigger1 = !var(59)
trigger1 = var(15) = 0
trigger1 = command != "holdx"
trigger2 = !var(59)
trigger2 = var(15) = 1
trigger2 = command != "holdy"
trigger3 = var(59)
trigger3 = enemynear(var(58)),statetype != A
trigger3 = enemynear(var(58)),movetype = H || enemynear(var(58)),movetype = A || (p2stateno = [40,60])
trigger3 = enemynear(var(58)),stateno != [120,159]
trigger4 = var(59)
trigger4 = enemynear(var(58)),statetype = A
trigger4 = enemynear(var(58)),statetype != L
trigger4 = enemynear(var(58)),Vel Y > 0
trigger4 = p2bodydist y = [-60-floor(7*(enemynear(var(58)),vel y)+(7*(7+1)/2)*fvar(20)),0-floor(7*(enemynear(var(58)),vel y)+(7*(7+1)/2)*fvar(20))]
trigger5 = enemynear(var(58)),movetype = H
trigger5 = (p2stateno = [5650,5659]) || (p2stateno = [5690,5693])
trigger6 = AnimTime = 0
value = 3010

;---------------------------------------------------------------------------
; ヒートドライブ　攻撃

[Statedef 3010]
type     = S
movetype = A
physics  = S
juggle   = ifelse(var(30),0,(ifelse(var(12),31,1)))
velset   = 0,0
anim     = 3010
ctrl     = 0
sprpriority = 2

[State 810, 物理的なキャラの幅]
type = Width
trigger1 = 1
edge = 15,0

[State 1000, 音を鳴らす]
type = PlaySnd
triggerall = var(7) = 1
trigger1 = AnimElem = 1
value = s10+(var(7)*10),13
channel = 10

[State 181,]
type = PlaySnd
trigger1 = AnimElem = 1
value = s12,0

[State 1001,]
type = RemoveExplod
trigger1 = AnimElem = 1
ID = 3000

[State 700, エフェクト表示]
type = Explod
trigger1 = AnimElem = 1
anim = 3015
postype = P1
pos = 0, 0
sprpriority = 5
ownpal = 1
supermove = 1
removeongethit = 1

[State -2]
Type = Explod
Trigger1 = AnimElem = 7
persistent = 0
anim = 3016
postype = P1
pos = 0, 0
sprpriority = 5
ownpal = 1
supermove = 1
bindtime = 1
removeongethit = 1

[State -2]
Type = Explod
Trigger1 = AnimElem = 6
anim = 3017
postype = P1
pos = 0, 0
sprpriority = 5
ownpal = 1
supermove = 1
bindTime = 1
removeongethit = 1

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 2
value = s12,7

[State 1000, ]
type = Velset
trigger1 = AnimElemtime(3) > 0 && AnimElemtime(7) <= 0
x = 16

[State 2100]
type = VelAdd
Trigger1 = AnimElemtime(7) > 0 && AnimElemtime(10) < 5
x = -1

[State 1000, ]
type = Velset
trigger1 = AnimElemtime(10) = 5
Trigger2 = Vel X <= 0
x = 0

[State 2110, 相手と重なった時の処理]
type = PlayerPush
trigger1 = AnimElemTime(3) > 0 && AnimElemtime(10) <= 0
value = 0

[State -3, 成功したときの残像]
type = AfterImage
trigger1 = AnimElem = 2
time = 12
trans = add1
timegap = 4
framegap = 1
length = 3
palbright = 50,50,50
palcontrast = 0,0,0

[State 200, ヒット定義]
type = HitDef
trigger1 = time = 0
attr = S, HA
damage    = 275,10
getpower  = 0
givepower = 10,10
animtype = Hard
guardflag = MA
hitflag = MAF
priority = 4, Hit
pausetime = 0, 0
guard.pausetime = 0,15
sparkno = 202
guard.sparkno = s10012+(var(11)*10000)
sparkxy = -20, -70
hitsound = s13,1+(var(11)*10)
guardsound = s2,1+(var(11)*10)
ground.type = High
ground.slidetime = 20
ground.hittime  = 21
air.type = High
ground.velocity = -8,-8
air.velocity = -8,-8
fall = 1
fall.recover = 0
palfx.time = 95
palfx.add = 30,-40,-140
palfx.sinadd = 60,60,50,10
palfx.color = 0
palfx.invertall = 1
;p2stateno = 5640
p2stateno = 2020

[State 810, エフェクト表示]
type = Explod
trigger1 = MoveHit
anim = 10075
postype = P2
pos = 0,-70
sprpriority = 10
;scale = 0.85,0.85
ignorehitpause = 1
persistent = 0

;スロー処理
[State 1000, ヘルパーを出す]
type = Helper
trigger1 = Movehit = 1
name = "Slow"
stateno = 4900
ID = 4900
helpertype = normal
pos = 0,0
postype = p1
keyctrl = 0
ownpal = 1
ignorehitpause = 1
persistent = 0

;燃え小エフェクト
[State 1000, ヘルパーを出す]
type = null;Helper
trigger1 = movehit = 1
name = "hit"
stateno = 4910
ID = 4910
helpertype = normal
pos = 0,0
postype = p2
keyctrl = 0
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 2000, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;相手動作(上方回転吹き飛び)
[Statedef 2020]
type    = A
movetype= H
physics = N
velset = 0,0
facep2 = 1

[State 1500,]
type = NotHitBy
trigger1 = time < 50
value = SCA

[State 2120]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 52, 1]
type = VelSet
trigger1 = AnimElem = 4
x = -2.4
y = -18

[State 52, 2]
type = Veladd
trigger1 = AnimElemtime(4) >= 0
y = .52

[State 810,]
type = EnvShake
trigger1 = Pos Y >= Helper(100000),var(0)
trigger1 = Vel Y > 0
ampl = 10
freq = 100
time = 15

[State 1830]
type = ChangeAnim2
Trigger1 = Time = 0
value = 2020

[State 1830]
type = SelfState
triggerall = AnimElemtime(5) >= 0
trigger1 = Pos Y >= Helper(100000),var(0)
trigger1 = Vel Y > 0
value = 5100
;---------------------------------------------------------------------------
; チェーンドライブ

[Statedef 3100]
type     = S
movetype = A
physics  = S
juggle   = 0
velset   = 0,0
anim     = 3100
ctrl     = 0
sprpriority = 2
facep2 = 1

[State 1000, ]
type = Varset
trigger1 = time = 0
var(30) = 0

[State 3000, SC]
type = Varset
trigger1 = (prevstateno = [1000,2999])
trigger2 = (prevstateno = [11000,12999])
var(30) = 1

[state 1000, VarSet];先行入力初期化
type = varset
trigger1 = time = 0
var(31) = 0

[state 1000, VarSet];先行入力初期化
type = varset
trigger1 = time = 0
var(32) = 0

[State 3000, Juggle]
type = Varset
trigger1 = var(30)
var(12) = 0

[State 3000, スキルゲージ消費]
type = varadd
triggerall = var(40) = 0
triggerall = fvar(35) >= 100
triggerall = time = 0
trigger1 = (prevstateno = [1000,2999]) || (prevstateno = [11000,12999])
trigger2 = prevstateno = [3000,3999]
fvar(35) = -101

[State 3000, パワーゲージ消費]
type = poweradd
trigger1 = var(40) = 0
trigger1 = time = 0
value = -1000

[State 3000, パワーMAX解除]
type = varset
trigger1 = time = 0
v = 40
value = 0

[State 170, 無敵]
type = NotHitBy
trigger1 = time = 0
value = SCA
time = 30

[State 700,];点滅
type = palfx
triggerall = time = 0
trigger1 = (prevstateno = [1000,2999]) || (prevstateno = [11000,12999])
time = 5
add = 230,230,230

[State 3000, 残像]
type = AfterImage
trigger1 = time = 0
time = 1

[State 2000, 超必殺技発動の時間停止]
type = SuperPause
trigger1 = time = 0
anim = -1
movetime = 30
time = 30
p2defmul = 1.0
darken = 0

[State 2000]
type = AssertSpecial
trigger1 = Time = [0,30]
flag = NoFG
;flag2 = NOBG
ignorehitpause = 1

[State 2000]
type = null;Explod
trigger1 = time = 0
anim = 10500+(var(11)*10000)
pos = -10,-105
sprpriority = -3
ownpal = 1
bindtime = 1
supermove = 1

[State 2000]
type = Explod
trigger1 = time = 0
anim = F276;10501+(var(11)*10000)
pos = -10,-105
sprpriority = 20
ownpal = 1
bindtime = 1
supermove = 1

;SC------------------
[State 1]
type = null;Helper
triggerall = Numhelper(10550)=0
trigger1 = (prevstateno = [1000,2999]) || (prevstateno = [11000,12999])
trigger1 = time = 0
helpertype = normal
name = "SC"
stateno = 10550
ID = 10550
pos = 0,0
postype = left
keyctrl = 0
ownpal = 1
facing = 1
supermovetime = 99
pausemovetime = 99
size.xscale = 1
size.yscale = 1
size.shadowoffset = 0
ignorehitpause = 0

[State -2, ????]
type = Helper
triggerall = time = 0
trigger1 = prevstateno = [1000,2999]
ID = 100500
name = "SuperCancel"
postype = P1
pos = 0,0
sprpriority = -9
stateno = 100500
helpertype = normal
keyctrl = 0
persistent = 1
ignorehitpause = 1
ownpal = 1

[State 2000,]
type = PlaySnd
trigger1 = AnimElem = 1
value = s9,0+(var(11)*10)

[State 1300, 0]
type = Width
trigger1 = AnimElem = 1,>=0
player = 15,25

[State 2200,1];サングラス部分相殺ヘルパー
type = Helper
trigger1 = AnimElem = 11,=1
ID = 3150
offset = 0,0
postype = P1
stateno = 3150
keyctrl = 0
ownpal = 1

[State 1302, 6];チェーンドライブ移動
type = Changestate
trigger1 = AnimElem = 12,>=5
trigger1 = NumHelper(3150) = 0
Value = 3110

[State 3000, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 3105

;---------------------------------------------------------------------------
; グラサン掛け直し

[Statedef 3105]
type     = S
movetype = I
physics  = S
anim     = 3105
velset   = 0,0
ctrl     = 0
sprpriority = 2 ;ここで表示優先度を決定できます。　範囲は-5〜5、大きいほど手前に表示される

[State 3000, 残像]
type = AfterImage
trigger1 = time = 0
time = 1

[State 195, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;チェーンドライブ[移動]
[Statedef 3110]
type    = S
movetype= A
physics = S
anim = 3110

[State 2000,]
type = PlaySnd
trigger1 = AnimElem = 2
value = s12,7

[State 810,1]
type = Width
trigger1 = 1
value = 15,15

[State 0, VelSet]
type = VelSet
trigger1 = animelemtime(8) > 0 && animelemtime(10) < 0
x = 20

[State 1030, 3]
type = VelSet
trigger1 = MoveContact = 1
trigger2 = animelem = 12
x = 0
ignorehitpause = 1

[State 1950]
type = HitDef
trigger1 = Time = 0
attr = S,HA
damage    = 10, 0
getpower  = 0
givepower = 10,10
animtype = Hard
hitflag = MAF
guardflag = MA
priority = 5
pausetime = 3,5
sparkno = 202
sparkxy = -30,-40
hitsound = s1,4+(var(11)*10)
guardsound = s2,1+(var(11)*10)
guard.sparkno = s10012+(var(11)*10000)
guard.velocity = -9
ground.type = High
ground.slidetime = 10
ground.hittime = 25
ground.velocity = 0,0
air.velocity = 0,0
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
p2facing = 1
p2stateno = 35655
kill = 0

[State 3000, ステート変更]
type = ChangeState
trigger1 = movehit
trigger1 = p2movetype = H
value = 3120

[State 1452, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 3115

;---------------------------------------------------------------------------
; グラサン掛け直し
; CNS レベル: 基本
[Statedef 3115]
type     = S
movetype = I
physics  = S
anim     = 3115
velset   = 0,0
ctrl     = 0
sprpriority = 2 ;ここで表示優先度を決定できます。　範囲は-5〜5、大きいほど手前に表示される
facep2 = 1      ;相手の方を向いてから挑発（結構重要）

[State 3000, 残像]
type = AfterImage
trigger1 = time = 0
time = 1

[State 195, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; チェーンドライブ　発動

[Statedef 3120]
type     = S
movetype = A
physics  = S
juggle   = 0
velset   = 0,0
anim     = 3120
ctrl     = 0
sprpriority = 5

[State 170, 無敵]
type = NotHitBy
trigger1 = 1
value = SCA

[State 1302, 6]
type = ChangeAnim
triggerall = Anim = 3120
triggerall = AnimElem = 2
trigger1 = NumHelper(3155) = 0
Value = 3121

[State 810, 1]
type = TargetBind
trigger1 = 1
pos = 45,0

[State 1100, エフェクト表示]
type = Explod
triggerall = Anim = 3120
trigger1 = AnimElem = 5
persistent = 0
anim = 10021+(var(11)*10000)
postype = P1
pos = 35,-85
sprpriority = 10
ignorehitpause = 1

[State 810, 1]
type = PlaySnd
triggerall = Anim = 3120
Trigger1 = AnimElem = 5
value = s1,5

[State 200, ヒット定義]
type = HitDef
trigger1 = AnimElem = 1
attr = S, HA
damage    = 10, 0
getpower  = 0
givepower = 10,10
animtype = Hard
hitflag = MAF
priority = 4, Hit
pausetime = 30,30+var(0)
sparkno = 202
sparkxy = -20,-60
hitsound = s1,4+(var(11)*10)
ground.type = Low
ground.slidetime = 10
ground.hittime  = 20
ground.velocity = 0
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
p2stateno = 3190
kill = 0

[State 52, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 3130

;---------------------------------------------------------------------------
; チェーンドライブ　乱舞

[Statedef 3130]
type     = S
movetype = A
physics  = S
juggle   = 0
velset   = 0,0
anim     = 3130
ctrl     = 0
sprpriority = 5

[State 170, 無敵]
type = NotHitBy
trigger1 = 1
value = SCA

[State 2000,]
type = PlaySnd
trigger1 = AnimElem = 3
trigger2 = AnimElem = 5
trigger3 = AnimElem = 10
trigger4 = AnimElem = 14
trigger5 = AnimElem = 18
trigger6 = AnimElem = 20
trigger7 = AnimElem = 23
trigger8 = AnimElem = 28
trigger9 = AnimElem = 32
trigger10 = AnimElem = 37
trigger11 = AnimElem = 39
trigger12 = AnimElem = 44
value = s0,1

[State 2000,]
type = PlaySnd
triggerall = var(7) = 0
trigger1 = AnimElem = 2
value = s10,48
channel = 10

[State 2000,]
type = PlaySnd
triggerall = var(7) = 0
trigger1 = AnimElem = 43
value = s10,29
channel = 10

[State 52, 1]
type = VelSet
trigger1 = AnimElemtime(2) >= 0 && AnimElemtime(39) < 0
x = 1

[State 52, 1]
type = VelSet
trigger1 = AnimElem = 40
x = 0

[State 810, 1]
type = TargetBind
trigger1 = AnimElemtime(1) >= 0 && AnimElemtime(43) < 0
pos = 45,0

[State 200, ヒット定義]
type = HitDef
trigger1 = animelem = 3
attr = S, HA
damage    = 18, 0
getpower  = 0
givepower = 10,10
animtype = Hard
hitflag = MAF
priority = 4, Hit
pausetime = 3,5
sparkno = 202
sparkxy = -20, -80
hitsound = s1,1+(var(11)*10)
ground.type = High
ground.slidetime = 10
ground.hittime  = 20
ground.velocity = 0
;p2stateno = 35650
kill = 0

[State 200, ヒット定義]
type = HitDef
trigger1 = animelem = 5
attr = S, HA
damage    = 18, 0
getpower  = 0
givepower = 10,10
animtype = Hard
hitflag = MAF
priority = 4, Hit
pausetime = 3,5
sparkno = 202
sparkxy = -10, -85
hitsound = s1,1+(var(11)*10)
ground.type = High
ground.slidetime = 10
ground.hittime  = 20
ground.velocity = 0
;p2stateno = 35650
kill = 0

[State 200, ヒット定義]
type = HitDef
trigger1 = animelem = 10
attr = S, HA
damage    = 18, 0
getpower  = 0
givepower = 10,10
animtype = Hard
hitflag = MAF
priority = 4, Hit
pausetime = 3,5
sparkno = 202
sparkxy = -15, -20
hitsound = s1,3+(var(11)*10)
ground.type = low
ground.slidetime = 10
ground.hittime  = 20
ground.velocity = 0
;p2stateno = 35655
kill = 0

[State 200, ヒット定義]
type = HitDef
trigger1 = animelem = 14
attr = S, HA
damage    = 18, 0
getpower  = 0
givepower = 10,10
animtype = Hard
hitflag = MAF
priority = 4, Hit
pausetime = 3,5
sparkno = 202
sparkxy = -20, -70
hitsound = s1,3+(var(11)*10)
ground.type = low
ground.slidetime = 10
ground.hittime  = 20
ground.velocity = 0
;p2stateno = 35655
kill = 0

[State 200, ヒット定義]
type = HitDef
trigger1 = animelem = 18
attr = S, HA
damage    = 18, 0
getpower  = 0
givepower = 10,10
animtype = Hard
hitflag = MAF
priority = 4, Hit
pausetime = 3,5
sparkno = 202
sparkxy = -15, -70
hitsound = s1,1+(var(11)*10)
ground.type = High
ground.slidetime = 10
ground.hittime  = 20
ground.velocity = 0
;p2stateno = 35650
kill = 0

[State 200, ヒット定義]
type = HitDef
trigger1 = animelem = 20
attr = S, HA
damage    = 18, 0
getpower  = 0
givepower = 10,10
animtype = Hard
hitflag = MAF
priority = 4, Hit
pausetime = 3,5
sparkno = 202
sparkxy = -20, -80
hitsound = s1,1+(var(11)*10)
ground.type = High
ground.slidetime = 10
ground.hittime  = 20
ground.velocity = 0
;p2stateno = 35650
kill = 0

[State 200, ヒット定義]
type = HitDef
trigger1 = animelem = 23
attr = S, HA
damage    = 18, 0
getpower  = 0
givepower = 10,10
animtype = Hard
hitflag = MAF
priority = 4, Hit
pausetime = 3,5
sparkno = 202
sparkxy = -10, -60
hitsound = s1,3+(var(11)*10)
ground.type = low
ground.slidetime = 10
ground.hittime  = 20
ground.velocity = 0
;p2stateno = 35655
kill = 0

[State 200, ヒット定義]
type = HitDef
trigger1 = animelem = 28
attr = S, HA
damage    = 18, 0
getpower  = 0
givepower = 10,10
animtype = Hard
hitflag = MAF
priority = 4, Hit
pausetime = 3,5
sparkno = 202
sparkxy = -15, -80
hitsound = s1,1+(var(11)*10)
ground.type = High
ground.slidetime = 10
ground.hittime  = 20
ground.velocity = 0
;p2stateno = 35650
kill = 0

[State 200, ヒット定義]
type = HitDef
trigger1 = animelem = 32
attr = S, HA
damage    = 18, 0
getpower  = 0
givepower = 10,10
animtype = Hard
hitflag = MAF
priority = 4, Hit
pausetime = 3,5
sparkno = 202
sparkxy = -25, -85
hitsound = s1,3+(var(11)*10)
ground.type = High
ground.slidetime = 10
ground.hittime  = 20
ground.velocity = 0
;p2stateno = 35650
kill = 0

[State 200, ヒット定義]
type = HitDef
trigger1 = animelem = 37
trigger2 = animelem = 39
attr = S, HA
damage    = 18, 0
getpower  = 0
givepower = 10,10
animtype = Hard
hitflag = MAF
priority = 4, Hit
pausetime = 3,5
sparkno = 202
sparkxy = -13, -80
hitsound = s1,1+(var(11)*10)
ground.type = High
ground.slidetime = 10
ground.hittime  = 20
ground.velocity = 0
;p2stateno = 35650
kill = 0

[State 200, ヒット定義]
type = HitDef
trigger1 = AnimElem = 44
attr = S, HA
damage    = 22, 0
getpower  = 0
givepower = 10,10
animtype = High
hitflag = MAF
priority = 4, Hit
pausetime = 20,20
sparkno = 202
guard.sparkno = s10012+(var(11)*10000)
sparkxy = -20, -65
hitsound = s1,4+(var(11)*10)
guardsound = s2,1+(var(11)*10)
ground.type = Low
ground.slidetime = 23
ground.hittime  = 23
ground.velocity = -6,-6
airguard.velocity = -2.3,-1.8
air.type = High
air.velocity = -6,-6
fall = 1
fall.recover = 0
envshake.time = 5
envshake.ampl = 3
envshake.freq = 85
p2stateno = 35620

[State 52, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Slide Down (P2 - Shaking from the hit)

[Statedef 35620]
type    = A
movetype= H
physics = N
velset = 0,0

[State 5620, 1]
type = ChangeAnim2
trigger1 = 1
value = 5620

[State 5620, 2]
type = ChangeState
trigger1 = HitShakeOver = 1
value = 35621

;---------------------------------------------------------------------------
;吹っ飛び動作
[Statedef 35621]
type    = A
movetype= H
physics = N
velset = 0,0

[State 5621, 無敵]
type = NotHitBy
trigger1 = 1
value = SCA

[State 5621, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 5621

[State 5621, 移動終了]
type = VelSet
trigger1 = AnimElem = 1
x = ifelse(gethitvar(xvel)<0,-1,1)*facing*7
y = -4

[State 5621, 移動終了]
type = Veladd
trigger1 = AnimElemtime(1) >= 0
y = .42

[State 5621, 1]
type = ChangeState
trigger1 = Pos Y >= Helper(100000),var(0)
trigger1 = Vel Y > 0
value = 35622

;---------------------------------------------------------------------------
;スライド?ウン
[Statedef 35622]
type    = L
movetype= H
physics = N
velset = ifelse(gethitvar(xvel)<0,-1,1)*facing*4, 0

[State 5622, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 5622

[State 5622, 移動]
type = PosSet
trigger1 = time = 0
y = Helper(100000),var(0)

[State 5622, 移動]
type = Veladd
trigger1 = time >= 0 && AnimElemtime(8) <= 4
x = ifelse(gethitvar(xvel)<0,-1,1)*facing*-0.1

[State 5622, 移動終了]
type = VelSet
trigger1 = AnimElemtime(8) = 5
x = 0

[State 5622,]
type = MakeDust
trigger1 = vel x < 0
spacing = 4

[State 5622, 1]
type = SelfState
trigger1 = Animtime = 0
trigger1 = Alive
value = 5120

[State 5622, 1]
type = SelfState
trigger1 = Animtime = 0
trigger1 = !Alive
value = 5150

;---------------------------------------------------------------------------
; 相手動作(上段やられ)
; P2 - Shaking from the hit

[Statedef 35650]
type    = S;A
movetype= H
physics = N
velset = 0,0

[State 52, 1]
type = Hitfallset
trigger1 = time = 0
value = 0

[State 52, 1]
type = VelSet
trigger1 = time = 0
x = 0
y = 0

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = Helper(100000),var(0)

[State 1830]
type = ChangeAnim2
Trigger1 = Time = 0
value = 5650

[State 261, 2]
type = ChangeState
trigger1 = HitShakeOver = 1
value = 35651

;---------------------------------------------------------------------------
; 相手動作(上段やられ)

[Statedef 35651]
type    = S;A
movetype= H
physics = N
velset = 0,0

[State 1830]
type = ChangeAnim2
Trigger1 = Time = 0
value = 5651

[State 1830]
type = SelfState
trigger1 = time = 60
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; 相手動作(下段やられ)
; P2 - Shaking from the hit

[Statedef 35655]
type    = S;A
movetype= H
physics = N
velset = 0,0

[State 52, 1]
type = Hitfallset
trigger1 = time = 0
value = 0

[State 52, 1]
type = VelSet
trigger1 = time = 0
x = 0
y = 0

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = Helper(100000),var(0)

[State 1830]
type = ChangeAnim2
Trigger1 = Time = 0
value = 5655

[State 261, 2]
type = ChangeState
trigger1 = HitShakeOver = 1
value = 35656

;---------------------------------------------------------------------------
; 相手動作(下段やられ)

[Statedef 35656]
type    = S;A
movetype= H
physics = N
velset = 0,0

[State 1830]
type = ChangeAnim2
Trigger1 = Time = 0
value = 5656

[State 1830]
type = SelfState
trigger1 = time = 60
value = 0
ctrl = 1

;------------------------------------------------------------------------
;サングラス部分相殺ヘルパー
[Statedef 3150]
type = A
movetype = A
physics = N
anim = 3150

[State -2, AirGuard]
type = AssertSpecial
triggerall = root,var(20) >= 1
trigger1 = p2statetype = A
flag = unguardable

[State 1001, 3]
type = VelSet
trigger1 = Time = 0
x = 7.8
y = -2.7

[State 1101, 5]
type = VelAdd
trigger1 = Time > 0
y = .3

[State 1100, 2]
type = ReversalDef
trigger1 = time >= 0
reversal.attr = SCA,NP, SP, HP
hitflag = P
numhits = 0
pausetime = 1,1
P1stateno = 3157

[State 1110,1];サングラス部分攻撃用ヘルパー
type = Helper
trigger1 = time = 0
ID = 3151
pos = 0,0
postype = P1
stateno = 3151
keyctrl = 0
ownpal = 1

[State 1000, 1]
type = HitBy
trigger1 = 1
value = SCA, AP
time = 2

[state 100,0]
type = hitoverride
trigger1 = 1
attr = SCA, AA, AP, AT
stateno = 3157

[State end]
type = destroyself
trigger1 = MoveContact
trigger2 = time = 120
trigger3 = NumHelper(3151) = 0

;------------------------------------------------------------------------
;;サングラス部分攻撃用ヘルパー
[Statedef 3151]
type = A
movetype = A
physics = N
anim = 3150

[State 1000, 1]
type = NotHitBy
trigger1 = 1
value = SCA

[State 1001, 3]
type = VelSet
trigger1 = Time = 0
x = 7.8
y = -2.7

[State 1101, 5]
type = VelAdd
trigger1 = Time > 0
y = .3

[State 2350,5]
type = HitDef
triggerall = root,var(12) = 0
trigger1 = time = 0
hitflag = MAF
guardflag = MA
attr = S, HP
damage    = 10,0
getpower  = 0
givepower = 10,10
animtype = hard
air.animtype = up
pausetime = 0,12
guard.pausetime = 0,12
sparkno = 202
guard.sparkno = s10012+(root,var(11)*10000)
sparkxy = -15,-50
hitsound = s1,1+(var(11)*10)+(root,var(11)*10)
guardsound = s2,1+(var(11)*10)+(root,var(11)*10)
ground.type = High
ground.slidetime = 20
ground.hittime = 30
ground.velocity = -4,0
guard.hittime = 14
guard.slidetime = 12
;guard.velocity = -3,0
air.velocity = -3.6,-6.6
air.fall = 1
yaccel = .6
fall.recover = 0
kill = 0

[State 1110,1]
type = Helper
trigger1 = MoveContact
helpertype = player
ID = 3155
pos = 0,0
postype = P1
stateno = 3155
keyctrl = 0
ownpal = 1

[State end]
type = destroyself
trigger1 = MoveContact
trigger2 = time = 120
trigger3 = NumHelper(3150) = 0

;------------------------------------------------------------------------
;相殺ステート
[Statedef 3155]
type = A
physics = N
ctrl = 0
anim = 3155

[State 2120]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 0,0

[State 810, 物理的なキャラの幅]
type = Width
trigger1 = 1
edge = 60,0

[State 1000, 1]
type = NotHitBy
trigger1 = 1
value = SCA

[State 1000, ]
type = Velset
trigger1 = time = 1
x = .75
y = -5.5

[State 1000, ]
type = Veladd
trigger1 = time > 1
y = .18

[State 3605, 2]
type = DestroySelf
trigger1 = Time = 600
trigger2 = Root,MoveType = H
trigger3 = Root,Anim = 3110 && Root,AnimElem = 11
trigger4 = Root,Anim = 3115
trigger5 = Root,Anim = 3120 && Root,AnimElem = 5

[State 1000, ステート変更]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= Helper(100000),var(0)+20
value = 3156

;------------------------------------------------------------------------
;相殺ステート
[Statedef 3156]
type = A
physics = N
ctrl = 0
anim = 3155

[State 2120]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 0,0

[State 810, 物理的なキャラの幅]
type = Width
trigger1 = 1
edge = 60,0

[State 1000, 1]
type = NotHitBy
trigger1 = 1
value = SCA

[State 1000,]
type = Posset
trigger1 = time = 0
y = Helper(100000),var(0)+20

[State 1000, 軸位置移動]
type = Velset
trigger1 = time = 0
x = 0
y = 0

[State 3605, 2]
type = DestroySelf
trigger1 = Time = 120
trigger2 = Root,MoveType = H
trigger3 = Root,Anim = 3110 && Root,AnimElem = 11
trigger4 = Root,Anim = 3115
trigger5 = Root,Anim = 3120 && Root,AnimElem = 5

;------------------------------------------------------------------------
;相殺ステート
[Statedef 3157]
type = A
physics = N
ctrl = 0
anim = 10003+(root,var(11)*10000)

[State 1000, 1]
type = NotHitBy
trigger1 = 1
value = SCA

[State 3605, 2]
type = DestroySelf
trigger1 = animtime = 0

;---------------------------------------------------------------------------
; 肘打ちヒット
; P2 - Shaking from the hit

[Statedef 3190]
type    = A
movetype= H
physics = N
velset = 0,0

[State 52, 1]
type = Hitfallset
trigger1 = time = 0
value = 0

[State 52, 1]
type = VelSet
trigger1 = time = 0
x = 0
y = 0

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = Helper(100000),var(0)

[State 1830]
type = ChangeAnim2
Trigger1 = Time = 0
value = 5655

[State 261, 2]
type = ChangeState
trigger1 = HitShakeOver = 1
value = 3191

;---------------------------------------------------------------------------
; 相手動作(下段やられ)

[Statedef 3191]
type    = S;A
movetype= H
physics = N
velset = 0,0

[State 1000, 1]
type = NotHitBy
trigger1 = time = 0
value = SCA
time = 70

[State 1830]
type = SelfState
trigger1 = time = 120
value = 0
ctrl = 1

;-------------------------------------------------------------------------------
; ヘブンズドライブ

[Statedef 3200]
type     = S
movetype = A
physics  = N
juggle   = 0
velset   = 0,0
anim     = 3200
ctrl     = 0
sprpriority = 2
facep2 = 1

[State 1000, ]
type = Varset
trigger1 = time = 0
var(30) = 0

[State 3000, SC]
type = Varset
trigger1 = (prevstateno = [1000,2999])
trigger2 = (prevstateno = [11000,12999])
var(30) = 1

[state 1000, VarSet];先行入力初期化
type = varset
trigger1 = time = 0
var(31) = 0

[state 1000, VarSet];先行入力初期化
type = varset
trigger1 = time = 0
var(32) = 0

[State 3000, Juggle]
type = Varset
trigger1 = var(30)
var(12) = 0

[State 3000, スキルゲージ消費]
type = varadd
triggerall = var(40) = 0
triggerall = fvar(35) >= 100
triggerall = time = 0
trigger1 = (prevstateno = [1000,2999]) || (prevstateno = [11000,12999])
trigger2 = prevstateno = [3000,3999]
fvar(35) = -101

[State 3000, パワーゲージ消費]
type = poweradd
trigger1 = var(40) = 0
trigger1 = time = 0
value = -1000

[State 3000, パワーMAX解除]
type = varset
trigger1 = time = 0
v = 40
value = 0

[State 170, 無敵]
type = NotHitBy
trigger1 = time = 0
value = SCA
time = 41

[State 700,];点滅
type = palfx
triggerall = time = 0
trigger1 = (prevstateno = [1000,2999]) || (prevstateno = [11000,12999])
time = 5
add = 230,230,230

[State 3000, 残像]
type = AfterImage
trigger1 = time = 0
time = 1

[State 2000, 超必殺技発動の時間停止]
type = SuperPause
trigger1 = time = 0
anim = -1
movetime = 30
time = 30
p2defmul = 1.0

[State 2000]
type = AssertSpecial
trigger1 = Time = [0,30]
flag = NoFG
flag2 = NOBG
ignorehitpause = 1

[State 2000]
type = Explod
trigger1 = AnimElem = 1
anim = 10500+(var(11)*10000)
pos = -40,-95
sprpriority = -3
ownpal = 1
bindtime = 1
supermove = 1

[State 2000]
type = Explod
trigger1 = AnimElem = 1
anim = 10501+(var(11)*10000)
pos = -40,-95
sprpriority = 20
ownpal = 1
bindtime = 1
supermove = 1

;SC------------------
[State 1]
type = Helper
triggerall = Numhelper(10550)=0
trigger1 = (prevstateno = [1000,2999]) || (prevstateno = [11000,12999])
trigger1 = time = 0
helpertype = normal
name = "SC"
stateno = 10550
ID = 10550
pos = 0,0
postype = left
keyctrl = 0
ownpal = 1
facing = 1
supermovetime = 99
pausemovetime = 99
size.xscale = 1
size.yscale = 1
size.shadowoffset = 0
ignorehitpause = 0

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 1
value = s9,0+(var(11)*10)

[State 1000, 音を鳴らす]
type = PlaySnd
triggerall = var(7) = 0
trigger1 = AnimElem = 1
value = s10,42
channel = 10

[State 1000, 音を鳴らす]
type = PlaySnd
triggerall = var(7) = 0
trigger1 = AnimElem = 4
value = s10,43
volume = 255
channel = 10

[State 1000, 音を鳴らす]
type = PlaySnd
triggerall = var(7) = 0
trigger1 = AnimElem = 25
value = s10,44

[State 1000, 音を鳴らす]
type = PlaySnd
triggerall = var(7) = 1
trigger1 = AnimElem = 1
value = s20,29
channel = 10

[State 1000, 音を鳴らす]
type = PlaySnd
triggerall = var(7) = 1
trigger1 = AnimElem = 25
value = s20,30
channel = 10

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 4
trigger2 = AnimElem = 14
value = s12,4

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 25
value = s12,2

[State 700, エフェクト表示]
type = Explod
trigger1 = AnimElem = 5
trigger2 = AnimElem = 15
anim = 1110
postype = P1
pos = -25, -10
sprpriority = 3
ownpal = 1
bindtime = -1
supermove = 1
ignorehitpause = 0
removeongethit = 1
ID = 1150

[State 700, エフェクト表示]
type = Explod
trigger1 = AnimElem = 5
trigger2 = AnimElem = 15
anim = 1115
postype = P1
pos = -15,10
sprpriority = 5
ownpal = 1
bindtime = -1
supermove = 1
ignorehitpause = 0
removeongethit = 1
ID = 1150

[State 700, エフェクト表示]
type = Explod
trigger1 = AnimElem = 24
anim = 1165
postype = P1
pos = 0, 0
persistent = 0
sprpriority = 5
ownpal = 1
supermove = 1
ignorehitpause = 0
removeongethit = 1

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = animelem = 27
movetype = I

[State 0, PosAdd]
type = PosAdd
trigger1 = animelem = 7
trigger2 = animelem = 17
x = 26

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 3
x = 2

[State 0, VelMul]
type = VelMul
trigger1 = animelemtime(3) > 0
x = 1

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 17
x = 5.3961334228515625

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 21
x = 2

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = animelem = 17
statetype = A

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 17
y = -9.5

[State 0, VelAdd]
type = VelAdd
trigger1 = animelemtime(17) > 0
y = 0.42

[State 0, Width]
type = Width
trigger1 = 1
player = 10,10
edge = 10,10

[State 810, 1]
type = TargetBind
triggerall = var(30)
trigger1 = AnimElemtime(4) >= 0 && AnimElemtime(17) < 0
trigger1 = movehit
pos = 40,0

[State 200, 1]
type = HitDef
trigger1 = animelem = 4
trigger2 = animelem = 6
trigger3 = animelem = 7
trigger4 = animelem = 15
trigger5 = animelem = 16
trigger6 = animelem = 17
attr = S, HA
damage    = 25,0
getpower  = 0
givepower = 10,10
animtype = Hard
guardflag = M
hitflag = MAF
priority = 5, Hit
pausetime = 3,16
sparkno = 202
guard.sparkno = s10012+(var(11)*10000)
sparkxy = -10, -70
hitsound = s1,1+(var(11)*10)
guardsound = s2,1+(var(11)*10)
ground.type = Low
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -1
guard.velocity = -12
guard.pausetime = 0,11
guard.slidetime = 10
guard.hittime = 18
guard.ctrltime = 18
airguard.velocity = -4,-1
air.type = High
air.velocity = 0, -6.5
air.hittime = 11
air.animtype = back
fall.animtype = back
ground.cornerpush.veloff = -1
air.cornerpush.veloff = 0
guard.cornerpush.veloff = -1
fall = 0
air.fall = 1
air.recover = 0
fall.recover = 0
yaccel = .45
palfx.time = 30
palfx.add = 30,-40,-140
palfx.sinadd = 60,60,50,10
palfx.color = 0
palfx.invertall = 1

[State 200, 1]
type = HitDef
trigger1 = animelem = 18
trigger2 = animelem = 19
attr = A, HA
damage    = 25,0
getpower  = 0
givepower = 10,10
animtype = Hard
guardflag = M
hitflag = MAF
priority = 5, Hit
pausetime = 3,4
sparkno = 202
guard.sparkno = s10012+(var(11)*10000)
sparkxy = -10, -70
hitsound = s1,1+(var(11)*10)
guardsound = s2,1+(var(11)*10)
ground.type = Low
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -2,-10
guard.velocity = -12
guard.pausetime = 0,11
guard.slidetime = 10
guard.hittime = 18
guard.ctrltime = 18
airguard.velocity = -4,-1
air.type = High
air.velocity = -2,-10
air.hittime = 11
air.animtype = back
fall.animtype = back
ground.cornerpush.veloff = -1
air.cornerpush.veloff = 0
guard.cornerpush.veloff = -1
fall = 1
air.fall = 1
air.recover = 0
fall.recover = 0
yaccel = .5
palfx.time = 30
palfx.add = 30,-40,-140
palfx.sinadd = 60,60,50,10
palfx.color = 0
palfx.invertall = 1

[State 200, ヒット定義]
type = HitDef
trigger1 = AnimElem = 26
attr = A, SA
damage    = 50,0
getpower  = 0
givepower = 10,10
animtype = up
guardflag = MA
hitflag = MAF
priority = 4, Hit
pausetime = 12, 19
sparkno = 202
guard.sparkno = s10012+(var(11)*10000)
sparkxy = -15, -70
hitsound = s1,4+(var(11)*10)
guardsound = s2,1+(var(11)*10)
ground.type = High
ground.slidetime = 20
ground.hittime  = 21
ground.velocity = -8,14
airguard.velocity = -3.7,-3.5
air.type = High
air.velocity = -8,14
fall = 1
fall.recover = 0
palfx.time = 50
palfx.add = 30,-40,-140
palfx.sinadd = 60,60,50,10
palfx.color = 0
palfx.invertall = 1
envshake.ampl = 5
envshake.freq = 100
envshake.time = 10
p2stateno = ifelse(p2statetype = A,5635,5630)

;燃え小エフェクト
[State 1000, ヘルパーを出す]
type = null;Helper
trigger1 = movehit = 1
name = "hit"
stateno = 4910
ID = 4910
helpertype = normal
pos = 0,0
postype = p2
keyctrl = 0
ownpal = 1

[State 1000, ステート変更]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= Helper(100000),var(0)
value = 3205

;---------------------------------------------------------------------------
;着地

[Statedef 3205]
type     = S
movetype = I
physics  = S
juggle   = 0
poweradd = 0
velset   = 0,0
anim     = 3205
ctrl     = 0
sprpriority = 2

[State 300,]
type = AfterImage
trigger1 = time = 0
time = 1

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = time = 0
value = s4,0+(var(11)*10)

[State 1000,]
type = Posset
trigger1 = time = 0
y = Helper(100000),var(0)

[State 1000, 軸位置移動]
type = Velset
trigger1 = time = 0
x = 0
y = 0

[State 1000, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; ヤクザドライブ(仮)

[Statedef 3300]
type     = S
movetype = A
physics  = S
juggle   = ifelse(var(30),0,(ifelse(var(12),31,1)))
velset   = 0,0
anim     = 3300
ctrl     = 0
sprpriority = 2
facep2 = 1

[State 1000, ]
type = Varset
trigger1 = time = 0
var(30) = 0

[State 3000, SC]
type = Varset
trigger1 = (prevstateno = [1000,2999])
trigger2 = (prevstateno = [11000,12999])
var(30) = 1

[state 1000, VarSet];先行入力初期化
type = varset
trigger1 = time = 0
var(31) = 0

[state 1000, VarSet];先行入力初期化
type = varset
trigger1 = time = 0
var(32) = 0

[State 3000, Juggle]
type = Varset
trigger1 = var(30)
var(12) = 0

[State 3000, スキルゲージ消費]
type = varadd
triggerall = var(40) = 0
triggerall = fvar(35) >= 100
triggerall = time = 0
trigger1 = (prevstateno = [1000,2999]) || (prevstateno = [11000,12999])
trigger2 = prevstateno = [3000,3999]
fvar(35) = -101

[State 3000, パワーゲージ消費]
type = poweradd
trigger1 = var(40) = 0
trigger1 = time = 0
value = -1000

[State 3000, パワーMAX解除]
type = varset
trigger1 = time = 0
v = 40
value = 0

[State 170, 無敵]
type = NotHitBy
trigger1 = time = 0
value = SCA
time = 48

[State 700,];点滅
type = palfx
triggerall = time = 0
trigger1 = (prevstateno = [1000,2999]) || (prevstateno = [11000,12999])
time = 5
add = 230,230,230

[State 3000, 残像]
type = AfterImage
trigger1 = time = 0
time = 1

[State 2000, 超必殺技発動の時間停止]
type = SuperPause
trigger1 = time = 0
anim = -1
movetime = 30
time = 30
p2defmul = 1.0
darken = 0

[State 2000]
type = AssertSpecial
trigger1 = Time = [0,30]
flag = NoFG
;flag2 = NOBG
ignorehitpause = 1

[State 2000]
type = null;Explod
trigger1 = time = 0
anim = 10500+(var(11)*10000)
pos = -2,-90
sprpriority = -3
ownpal = 1
bindtime = 1
supermove = 1

[State 2000]
type = Explod
trigger1 = time = 0
anim = F276;10501+(var(11)*10000)
pos = -2,-90
sprpriority = 20
ownpal = 1
bindtime = 1
supermove = 1

;SC------------------
[State 1]
type = null;Helper
triggerall = Numhelper(10550)=0
trigger1 = (prevstateno = [1000,2999]) || (prevstateno = [11000,12999])
trigger1 = time = 0
helpertype = normal
name = "SC"
stateno = 10550
ID = 10550
pos = 0,0
postype = left
keyctrl = 0
ownpal = 1
facing = 1
supermovetime = 99
pausemovetime = 99
size.xscale = 1
size.yscale = 1
size.shadowoffset = 0
ignorehitpause = 0

[State -2, ????]
type = Helper
triggerall = time = 0
trigger1 = prevstateno = [1000,2999]
ID = 100500
name = "SuperCancel"
postype = P1
pos = 0,0
sprpriority = -9
stateno = 100500
helpertype = normal
keyctrl = 0
persistent = 1
ignorehitpause = 1
ownpal = 1

[State 2000,]
type = PlaySnd
trigger1 = AnimElem = 1
value = s9,0+(var(11)*10)

[State 3000, 残像]
type = AfterImage
trigger1 = AnimElem = 7
trans = add
timegap = 2
framegap = 2
length = 8
palbright = 0,0,50
time = 200

[State 3000]
type = explod
trigger1 = AnimElem = 9
anim = 10061
pos = 0,0
postype = p1
sprpriority = 10
ownpal = 1

[State 3000, 残像]
type = AfterImage
trigger1 = AnimTime = 0
time = 1

[State 245, 5]
type = PosAdd
trigger1 = (animelem=8,>0 && animelem=14,<0)
x = 2

[State 1030]
type = VelSet
Trigger1 = AnimElem = 9
x = 10

[State 300, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 9
value = s12,9

[State 300, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 10
value = s10+(var(7)*10),37
channel = 10
volume = 255

[State 300, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 11
value = s0,4

[State 300 , 1]
type = HitDef
trigger1 = AnimElem = 13
attr = S, HA
animtype  = Diagup
damage    = 250,10
getpower  = 0
givepower = 10,10
priority = 6,Hit
pausetime = 30,30+var(0)
sparkno = 202
guard.sparkno = s10012+(var(11)*10000)
sparkxy = -20,-60
hitsound = s1,4+(var(11)*10)
hitflag = MAF
guardflag = MA
guardsound = s2,1+(var(11)*10)
ground.slidetime = 22
ground.hittime  = 21
ground.velocity = -8,-6
air.velocity = -8,-6
fall = 1
fall.recover = 0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
envshake.time = 30
envshake.freq = 90
envshake.ampl = -3
envshake.phase = -2

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = Movehit = 1
value = s12,13
persistent = 0
ignorehitpause = 1
volume = 255

[State 300, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; メテオドライブ

[Statedef 3600]
type     = A
movetype = A
physics  = N
juggle   = 0
velset   = 0,0
anim     = 3600
ctrl     = 0
sprpriority = 2

[State 1000, ]
type = Varset
trigger1 = time = 0
var(30) = 0

[State 3000, SC]
type = Varset
trigger1 = (prevstateno = [1000,2999])
trigger2 = (prevstateno = [11000,12999])
var(30) = 1

[state 1000, VarSet];先行入力初期化
type = varset
trigger1 = time = 0
var(31) = 0

[state 1000, VarSet];先行入力初期化
type = varset
trigger1 = time = 0
var(32) = 0

[State 3000, Juggle]
type = Varset
trigger1 = var(30)
var(12) = 0

[State 3000, スキルゲージ消費]
type = varadd
triggerall = var(40) = 0
triggerall = fvar(35) >= 100
triggerall = time = 0
trigger1 = (prevstateno = [1000,2999]) || (prevstateno = [11000,12999])
fvar(35) = -101

[State 3000, パワーゲージ消費]
type = poweradd
trigger1 = var(40) = 0
trigger1 = time = 0
value = -1000

[State 3000, パワーMAX解除]
type = varset
trigger1 = time = 0
v = 40
value = 0

[State 170, 無敵]
type = NotHitBy
trigger1 = time = 0
value = SCA
time = 30

[State 2000, 超必殺技発動の時間停止]
type = SuperPause
trigger1 = time = 0
anim = -1
movetime = 30
time = 30
p2defmul = 1.0

[State 2000]
type = AssertSpecial
trigger1 = Time = [0,30]
flag = NoFG
flag2 = NOBG
ignorehitpause = 1

[State 2000]
type = Explod
trigger1 = AnimElem = 1
anim = 10500+(var(11)*10000)
pos = -5,-90
sprpriority = -3
ownpal = 1
bindtime = 1
supermove = 1

[State 2000]
type = Explod
trigger1 = AnimElem = 1
anim = 10501+(var(11)*10000)
pos = -5,-90
sprpriority = 20
ownpal = 1
bindtime = 1
supermove = 1

;SC------------------
[State 1]
type = Helper
triggerall = Numhelper(10550)=0
trigger1 = (prevstateno = [1000,2999]) || (prevstateno = [11000,12999])
trigger1 = time = 0
helpertype = normal
name = "SC"
stateno = 10550
ID = 10550
pos = 0,0
postype = left
keyctrl = 0
ownpal = 1
facing = 1
supermovetime = 99
pausemovetime = 99
size.xscale = 1
size.yscale = 1
size.shadowoffset = 0
ignorehitpause = 0

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 1
value = s9,0+(var(11)*10)

[State 700, エフェクト表示]
type = Explod
trigger1 = AnimElem = 5
anim = 1405
postype = P1
pos = 20, -50
sprpriority = 5
ownpal = 1
bindtime = 5
supermove = 1
ignorehitpause = 0
removeongethit = 1

[State 1000, ]
type = Velset
trigger1 = AnimElem = 3
x = -3
y = -5

[State 1000, ]
type = Veladd
trigger1 = AnimElemtime(3) >= 0
y = .37

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 2
value = s10+(var(7)*10),15

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 4
value = s12,9

[State 1000, ヘルパーを出す]
type = Helper
trigger1 = AnimElem = 5
name = "MD"
stateno = 3605
ID = 3605
helpertype = normal
pos = 60,0
postype = p1
facing = 1
keyctrl = 0
ownpal = 1

[State -3, 成功したときの残像]
type = AfterImage
trigger1 = AnimElem = 1
time = 60
trans = add1
timegap = 4
framegap = 1
length = 3
palbright = 50,50,50
palcontrast = 0,0,0

[State 1000, ステート変更]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= Helper(100000),var(0)
value = 1201

;---------------------------------------------------------------------------
;メテオドライブ地上版

[Statedef 3650]
type     = S
movetype = I
physics  = S
juggle   = 0
ctrl     = 0
velset   = 0,0
anim     = 3650
sprpriority = 5

[State 1000, ]
type = Varset
trigger1 = time = 0
var(30) = 0

[State 3000, SC]
type = Varset
trigger1 = (prevstateno = [1000,2999])
trigger2 = (prevstateno = [11000,12999])
var(30) = 1

[state 1000, VarSet];先行入力初期化
type = varset
trigger1 = time = 0
var(31) = 0

[state 1000, VarSet];先行入力初期化
type = varset
trigger1 = time = 0
var(32) = 0

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 3
value = s5,1

[State 1000, ]
type = Velset
trigger1 = AnimElem = 3
x = -4
y = -4

[State 1000, ]
type = Veladd
trigger1 = AnimElemtime(3) >= 0
y = .4

[State 6000, 3]
type = StateTypeSet
trigger1 = AnimElem = 4
statetype = A

[State 1000, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
trigger1 = (prevstateno != [1000,2999]) && (prevstateno != [11000,12999])
value = 3600

[State 1000, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
trigger1 = (prevstateno = [1000,2999]) || (prevstateno = [11000,12999])
value = 3601

;---------------------------------------------------------------------------
; メテオドライブ　スパキャン版

[Statedef 3601]
type     = A
movetype = A
physics  = N
juggle   = 0
velset   = 0,0
anim     = 3600
ctrl     = 0
sprpriority = 2

[State 3000, Juggle]
type = Varset
trigger1 = var(30)
var(12) = 0

[State 3000, スキルゲージ消費]
type = varadd
triggerall = var(40) = 0
triggerall = fvar(35) >= 100
triggerall = time = 0
trigger1 = var(30)
fvar(35) = -101

[State 3000, パワーゲージ消費]
type = poweradd
trigger1 = var(40) = 0
trigger1 = time = 0
value = -1000

[State 3000, パワーMAX解除]
type = varset
trigger1 = time = 0
v = 40
value = 0

[State 170, 無敵]
type = NotHitBy
trigger1 = time = 0
value = SCA
time = 30

[State 700,];点滅
type = palfx
trigger1 = time = 0
time = 5
add = 230,230,230

[State 3000, 残像]
type = AfterImage
trigger1 = time = 0
time = 1

[State 2000, 超必殺技発動の時間停止]
type = SuperPause
trigger1 = time = 0
anim = -1
movetime = 30
time = 30
p2defmul = 1.0

[State 2000]
type = AssertSpecial
trigger1 = Time = [0,30]
flag = NoFG
flag2 = NOBG
ignorehitpause = 1

[State 2000]
type = Explod
trigger1 = AnimElem = 1
anim = 10500+(var(11)*10000)
pos = -5,-90
sprpriority = -3
ownpal = 1
bindtime = 1
supermove = 1

[State 2000]
type = Explod
trigger1 = AnimElem = 1
anim = 10501+(var(11)*10000)
pos = -5,-90
sprpriority = 20
ownpal = 1
bindtime = 1
supermove = 1

;SC------------------
[State 1]
type = Helper
triggerall = Numhelper(10550)=0
trigger1 = (prevstateno = [1000,2999]) || (prevstateno = [11000,12999])
trigger1 = time = 0
helpertype = normal
name = "SC"
stateno = 10550
ID = 10550
pos = 0,0
postype = left
keyctrl = 0
ownpal = 1
facing = 1
supermovetime = 99
pausemovetime = 99
size.xscale = 1
size.yscale = 1
size.shadowoffset = 0
ignorehitpause = 0

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 1
value = s9,0+(var(11)*10)

[State 700, エフェクト表示]
type = Explod
trigger1 = AnimElem = 5
anim = 1405
postype = P1
pos = 20, -50
sprpriority = 5
ownpal = 1
bindtime = 5
supermove = 1
ignorehitpause = 0
removeongethit = 1

[State 1000, ]
type = Velset
trigger1 = AnimElem = 3
x = -3
y = -5

[State 1000, ]
type = Veladd
trigger1 = AnimElemtime(3) >= 0
y = .37

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 2
value = s10+(var(7)*10),15

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 4
value = s12,9

[State 1000, ヘルパーを出す]
type = Helper
trigger1 = AnimElem = 5
name = "MD"
stateno = 3605
ID = 3605
helpertype = normal
pos = 60,0
postype = p1
facing = 1
keyctrl = 0
ownpal = 1

[State -3, 成功したときの残像]
type = AfterImage
trigger1 = AnimElem = 1
time = 60
trans = add1
timegap = 4
framegap = 1
length = 3
palbright = 50,50,50
palcontrast = 0,0,0

[State 1000, ステート変更]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= Helper(100000),var(0)
value = 1201

;---------------------------------------------------------------------------
;メテオドライブヘルパー

[Statedef 3605]
type     = A
movetype = A
physics  = N
juggle   = 0
ctrl     = 0
anim     = 3605
sprpriority = 5

[State 1001, 特殊効果]
type = AssertSpecial
trigger1 = 1
flag = NoShadow ;影を消す

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = time = 0
value = s12,1

[State 1000, ]
type = Velset
trigger1 = time >= 0
x = 12
y = 15

[State 1000, ステート変更]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >=Helper(100000),var(0)
value = 3610

;---------------------------------------------------------------------------
;メテオドライブヘルパー(爆発)

[Statedef 3610]
type     = S
movetype = A
physics  = S
juggle   = 0
ctrl     = 0
velset   = 0,0
anim     = 3610
sprpriority = 5

[State 1001, 特殊効果]
type = AssertSpecial
trigger1 = 1
flag = NoShadow ;影を消す

[State -2, AirGuard]
type = AssertSpecial
triggerall = root,var(20) >= 1
trigger1 = p2statetype = A
flag = unguardable

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = time = 0
value = s13,1

[State 1000 ]
type = Posset
trigger1 = time = 0
y = Helper(100000),var(0)+7

[State 810,]
type = EnvShake
trigger1 = time = 0
ampl = 7
freq = 110
time = 15

[State 200, ヒット定義]
type = HitDef
triggerall = root,var(12) = 0
trigger1 = time = 0
attr = S, HP
damage    = ceil(220*root,fvar(5)),10
getpower  = 0
givepower = 10,10
animtype = Diagup
guardflag = MA
hitflag = MAF
priority = 4, Hit
pausetime = 0,10+root,var(0)
sparkno = s10003+(root,var(11)*10000)
guard.sparkno = s10012+(root,var(11)*10000)
sparkxy = -20, -60
hitsound = s13,2
guardsound = s2,1+(var(11)*10)+(root,var(11)*10)
ground.type = High
ground.slidetime = 20
ground.hittime  = 21
ground.velocity = -6,-8
airguard.velocity = -3.7,-4.3
air.type = High
air.velocity = -6,-8
fall = 1
fall.recover = 0
palfx.time = 80
palfx.add = 30,-40,-140
palfx.sinadd = 60,60,50,10
palfx.color = 0
palfx.invertall = 1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0

[State 3000]
type = Projectile
trigger1 = AnimElem = 3
projID = 3615
projanim = 3615
projremove = 0
projpriority = 5
projhitanim = -1
projremanim = -1
projsprpriority = 0
projshadow = 0,0,0
projremovetime = 19
offset = 0,0
velocity = 0,0

[State 1000, ]
type = ParentVarset
trigger1 = p2statetype = A
trigger1 = movehit
var(12) = 2

;ガードクラッシュ値削り
[state a]
type = parentvaradd
trigger1 = moveguarded = 1
fvar(10) = 16

;ガードクラッシュ値回復不能時間
[State 1000, 0]
type = ParentVarSet
triggerall = fvar(11) != 180
triggerall = roundstate = 2
trigger1 = moveguarded = 1
fvar(11) = 180

;スロー処理
[State 1000, ヘルパーを出す]
type = Helper
trigger1 = Movehit = 1
name = "Slow"
stateno = 4900
ID = 4900
helpertype = normal
pos = 0,0
postype = p1
keyctrl = 0
ownpal = 1
ignorehitpause = 1
persistent = 0

;燃え小エフェクト
[State 1000, ヘルパーを出す]
type = null;Helper
trigger1 = movehit = 1
name = "hit"
stateno = 4910
ID = 4910
helpertype = normal
pos = 0,0
postype = p2
keyctrl = 0
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 1001, このヘルパーを消す]
type = DestroySelf
trigger1 = AnimTime = 0

;---------------------------------------------------------------------------
;2ゲージ超必殺技
;---------------------------------------------------------------------------
; ヒートドライブ

[Statedef 4000]
type     = S
movetype = A
physics  = S
juggle   = 0
velset   = 0,0
anim     = 3000
ctrl     = 0
sprpriority = 2
poweradd = -1000
facep2 = 1

[State 1000, ]
type = Varset
trigger1 = time = 0
var(30) = 0

[State 3000, SC]
type = Varset
trigger1 = (prevstateno = [1000,2999])
trigger2 = (prevstateno = [11000,12999])
var(30) = 1

[State 3000, DC]
type = Varset
trigger1 = (prevstateno = [3000,3999])
var(30) = 2

[state 1000, VarSet];先行入力初期化
type = varset
trigger1 = time = 0
var(31) = 0

[state 1000, VarSet];先行入力初期化
type = varset
trigger1 = time = 0
var(32) = 0

[State 3000, Juggle]
type = Varset
trigger1 = var(30)
var(12) = 0

[State 3000, スキルゲージ消費]
type = varadd
triggerall = var(40) = 0
triggerall = fvar(35) >= 100
triggerall = time = 0
trigger1 = (prevstateno = [1000,2999]) || (prevstateno = [11000,12999])
trigger2 = prevstateno = [3000,3999]
fvar(35) = -101

[State 3000, パワーゲージ消費]
type = poweradd
trigger1 = var(40) = 0
trigger1 = time = 0
value = -1000

[State 3000, パワーMAX解除]
type = varset
trigger1 = time = 0
v = 40
value = 0

[State 810, 物理的なキャラの幅]
type = Width
trigger1 = 1
edge = 15,0

[State 170, 無敵]
type = NotHitBy
trigger1 = time = 0
value = SCA
time = 30

[State 700,];点滅
type = palfx
triggerall = time = 0
trigger1 = (prevstateno = [1000,2999]) || (prevstateno = [11000,12999])
time = 5
add = 230,230,230

[State 700,];点滅
type = palfx
triggerall = time = 0
trigger1 = prevstateno = [3000,3999]
time = 5
add = 250,120,210

[State 3000, 残像]
type = AfterImage
trigger1 = time = 0
time = 1

[State 2000, 超必殺技発動の時間停止]
type = SuperPause
trigger1 = time = 0
anim = -1
movetime = 30
time = 30
p2defmul = 1.0
darken = 0

[State 2000]
type = AssertSpecial
trigger1 = Time = [0,30]
flag = NoFG
;flag2 = NOBG
ignorehitpause = 1

[State 2000]
type = null;Explod
trigger1 = AnimElem = 1
anim = 10510+(var(11)*10000)
pos = 0,-80
sprpriority = -3
ownpal = 1
bindtime = 1
supermove = 1

[State 2000]
type = Explod
trigger1 = AnimElem = 1
anim = F277;10511+(var(11)*10000)
pos = 0,-80
sprpriority = 20
ownpal = 1
bindtime = 1
supermove = 1

;SC------------------
[State 1]
type = null;Helper
triggerall = Numhelper(10550)=0
trigger1 = (prevstateno = [1000,2999]) || (prevstateno = [11000,12999])
trigger1 = time = 0
helpertype = normal
name = "SC"
stateno = 10550
ID = 10550
pos = 0,0
postype = left
keyctrl = 0
ownpal = 1
facing = 1
supermovetime = 99
pausemovetime = 99
size.xscale = 1
size.yscale = 1
size.shadowoffset = 0
ignorehitpause = 0

[State -2, ????]
type = Helper
triggerall = time = 0
trigger1 = prevstateno = [1000,2999]
ID = 100500
name = "SuperCancel"
postype = P1
pos = 0,0
sprpriority = -9
stateno = 100500
helpertype = normal
keyctrl = 0
persistent = 1
ignorehitpause = 1
ownpal = 1

;DC------------------
[State 1]
type = Helper
triggerall = Numhelper(10560)=0
trigger1 = prevstateno = [3000,3999]
trigger1 = time = 0
helpertype = normal
name = "DC"
stateno = 10560
ID = 10560
pos = 0,0
postype = left
keyctrl = 0
ownpal = 1
facing = 1
supermovetime = 99
pausemovetime = 99
size.xscale = 1
size.yscale = 1
ignorehitpause = 0

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 1
value = s9,1+(var(11)*10)

[State 3050, BGPalfx]
type = null;BGPalfx
trigger1 = 1
invertall = 1
time = 1
mul = 120,120,120
ignorehitpause = 1

[State 1000, 音を鳴らす]
type = PlaySnd
triggerall = var(7) = 0
trigger1 = AnimElem = 1
value = s10+(var(7)*10),30
channel = 10

[State 700, エフェクト表示]
type = Explod
trigger1 = AnimElem = 4
anim = 3005
postype = P1
pos = 0, 0
bindtime = -1
removetime = -1
sprpriority = 5
ownpal = 1
supermove = 1
removeongethit = 1
ID = 3000

[State 181,]
type = PlaySnd
trigger1 = AnimElem = 54
value = s12,0

[State 3000, ステート変更]
type = ChangeState
triggerall = Time = [33,160]
trigger1 = !var(59)
trigger1 = command != "holdxy"
trigger2 = var(59)
trigger2 = enemynear(var(58)),statetype != A
trigger2 = enemynear(var(58)),movetype = H || enemynear(var(58)),movetype = A || (p2stateno = [40,60])
trigger2 = enemynear(var(58)),stateno != [120,159]
trigger3 = var(59)
trigger3 = enemynear(var(58)),statetype = A
trigger3 = enemynear(var(58)),statetype != L
trigger3 = enemynear(var(58)),Vel Y > 0
trigger3 = p2bodydist y = [-60-floor(7*(enemynear(var(58)),vel y)+(7*(7+1)/2)*fvar(20)),-10-floor(7*(enemynear(var(58)),vel y)+(7*(7+1)/2)*fvar(20))]
trigger4 = enemynear(var(58)),movetype = H
trigger4 = (p2stateno = [5650,5659]) || (p2stateno = [5690,5693])
value = 4010

[State 3000, ステート変更]
type = ChangeState
triggerall = Time >= 161
trigger1 = !var(59)
trigger1 = command != "holdxy"
trigger2 = var(59)
trigger2 = enemynear(var(58)),statetype != A
trigger2 = enemynear(var(58)),movetype = H || enemynear(var(58)),movetype = A || (p2stateno = [40,60])
trigger2 = enemynear(var(58)),stateno != [120,159]
trigger3 = var(59)
trigger3 = enemynear(var(58)),statetype = A
trigger3 = enemynear(var(58)),statetype != L
trigger3 = enemynear(var(58)),Vel Y > 0
trigger3 = p2bodydist y = [-60-floor(7*(enemynear(var(58)),vel y)+(7*(7+1)/2)*fvar(20)),-10-floor(7*(enemynear(var(58)),vel y)+(7*(7+1)/2)*fvar(20))]
trigger4 = enemynear(var(58)),movetype = H
trigger4 = (p2stateno = [5650,5659]) || (p2stateno = [5690,5693])
trigger5 = AnimTime = 0
value = 4020

;---------------------------------------------------------------------------
; MAXヒートドライブ　攻撃

[Statedef 4010]
type     = S
movetype = A
physics  = S
juggle   = ifelse(var(30),0,(ifelse(var(12),31,1)))
velset   = 0,0
anim     = 3010
ctrl     = 0
sprpriority = 2

[State 3050, BGPalfx]
type = null;BGPalfx
trigger1 = 1
invertall = 1
time = 1
mul = 120,120,120
ignorehitpause = 1

[State 810, 物理的なキャラの幅]
type = Width
trigger1 = 1
edge = 15,0

[State 1000, 音を鳴らす]
type = PlaySnd
triggerall = var(7) = 1
trigger1 = AnimElem = 1
value = s10+(var(7)*10),13
channel = 10

[State 181,]
type = PlaySnd
trigger1 = AnimElem = 1
value = s12,0

[State 1001,]
type = RemoveExplod
trigger1 = AnimElem = 1
ID = 3000

[State 700, エフェクト表示]
type = Explod
trigger1 = AnimElem = 1
anim = 3015
postype = P1
pos = 0, 0
sprpriority = 5
ownpal = 1
supermove = 1
removeongethit = 1

[State -2]
Type = Explod
Trigger1 = AnimElem = 6
anim = 3017
postype = P1
pos = 0, 0
sprpriority = 5
ownpal = 1
supermove = 1
bindTime = 1
removeongethit = 1

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 2
value = s12,7

[State 1000, ]
type = Velset
trigger1 = AnimElemtime(3) > 0 && AnimElemtime(7) <= 0
x = 16

[State 2100]
type = VelAdd
Trigger1 = AnimElemtime(7) > 0 && AnimElemtime(10) < 5
x = -1

[State 1000, ]
type = Velset
trigger1 = AnimElemtime(10) = 5
Trigger2 = Vel X <= 0
x = 0

[State 2110, 相手と重なった時の処理]
type = PlayerPush
trigger1 = AnimElemTime(3) > 0 && AnimElemtime(10) <= 0
value = 0

[State -3, 成功したときの残像]
type = AfterImage
trigger1 = AnimElem = 2
time = 12
trans = add1
timegap = 4
framegap = 1
length = 3
palbright = 50,50,50
palcontrast = 0,0,0

[State 200, ヒット定義]
type = HitDef
trigger1 = time = 0
attr = S, HA
damage    = 150,10
getpower  = 0
givepower = 10,10
animtype = up
guardflag = MA
hitflag = MAF
priority = 4, Hit
pausetime = 0, 0
guard.pausetime = 0,15
sparkno = 202
guard.sparkno = s10012+(var(11)*10000)
sparkxy = -20, -70
hitsound = s13,1+(var(11)*10)
guardsound = s2,1+(var(11)*10)
ground.type = High
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = 0,-12
air.velocity = 0,-12
yaccel = .6
fall = 1
fall.recover = 0
palfx.time = 95
palfx.add = 30,-40,-140
palfx.sinadd = 60,60,50,10
palfx.color = 0
palfx.invertall = 1

[State 810, エフェクト表示]
type = Explod
trigger1 = movehit = 1
anim = 10075
postype = P2
pos = 0,-70
sprpriority = 10
;scale = 0.85,0.85
ignorehitpause = 1
persistent = 0

;スロー処理
[State 1000, ヘルパーを出す]
type = null;Helper
trigger1 = movehit = 1
name = "Slow"
stateno = 4905
ID = 4900
helpertype = normal
pos = 0,0
postype = p1
keyctrl = 0
ownpal = 1
ignorehitpause = 1
persistent = 0

;燃え小エフェクト
[State 1000, ヘルパーを出す]
type = null;Helper
trigger1 = movehit = 1
name = "hit"
stateno = 4910
ID = 4910
helpertype = normal
pos = 0,0
postype = p2
keyctrl = 0
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 2000, ステート変更]
type = ChangeState
trigger1 = MoveHit
value = 4050

[State 2000, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; MAXヒートドライブ　攻撃(ガード不能)

[Statedef 4020]
type     = S
movetype = A
physics  = S
juggle   = ifelse(var(30),0,(ifelse(var(12),31,1)))
velset   = 0,0
anim     = 3010
ctrl     = 0
sprpriority = 2

[State 3050, BGPalfx]
type = null;BGPalfx
trigger1 = 1
invertall = 1
time = 1
mul = 120,120,120
ignorehitpause = 1

[State 810, 物理的なキャラの幅]
type = Width
trigger1 = 1
edge = 15,0

[State 1000, 音を鳴らす]
type = PlaySnd
triggerall = var(7) = 1
trigger1 = AnimElem = 1
value = s10+(var(7)*10),13
channel = 10

[State 181,]
type = PlaySnd
trigger1 = AnimElem = 1
value = s12,0

[State 1001,]
type = RemoveExplod
trigger1 = AnimElem = 1
ID = 3000

[State 700, エフェクト表示]
type = Explod
trigger1 = AnimElem = 1
anim = 3015
postype = P1
pos = 0, 0
sprpriority = 5
ownpal = 1
supermove = 1
removeongethit = 1

[State -2]
Type = Explod
Trigger1 = AnimElem = 6
anim = 3017
postype = P1
pos = 0, 0
sprpriority = 5
ownpal = 1
supermove = 1
bindTime = 1
removeongethit = 1

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 2
value = s12,7

[State 1000, ]
type = Velset
trigger1 = AnimElemtime(3) > 0 && AnimElemtime(7) <= 0
x = 16

[State 2100]
type = VelAdd
Trigger1 = AnimElemtime(7) > 0 && AnimElemtime(10) < 5
x = -1

[State 1000, ]
type = Velset
trigger1 = AnimElemtime(10) = 5
Trigger2 = Vel X <= 0
x = 0

[State 2110, 相手と重なった時の処理]
type = PlayerPush
trigger1 = AnimElemTime(1) > 0 && AnimElemtime(9) <= 0
value = 0

[State -3, 成功したときの残像]
type = AfterImage
trigger1 = AnimElem = 2
time = 12
trans = add1
timegap = 4
framegap = 1
length = 3
palbright = 50,50,50
palcontrast = 0,0,0

[State 200, ヒット定義]
type = HitDef
trigger1 = time = 0
attr = S, HA
damage    = 275,10
getpower  = 0
givepower = 10,10
animtype = diagup
;guardflag = MA
hitflag = MAF
priority = 4, Hit
pausetime = 0, 0
guard.pausetime = 0,15
sparkno = 202
guard.sparkno = s10012+(var(11)*10000)
sparkxy = -20, -70
hitsound = s13,1+(var(11)*10)
guardsound = s2,1+(var(11)*10)
ground.type = High
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = 0,-12
air.velocity = 0,-12
yaccel = .6
fall = 1
fall.recover = 0
palfx.time = 95
palfx.add = 30,-40,-140
palfx.sinadd = 60,60,50,10
palfx.color = 0
palfx.invertall = 1

[State 810, エフェクト表示]
type = Explod
trigger1 = movehit = 1
anim = 10075
postype = P2
pos = 0,-70
sprpriority = 10
;scale = 0.85,0.85
ignorehitpause = 1
persistent = 0

;スロー処理
[State 1000, ヘルパーを出す]
type = null;Helper
trigger1 = movehit = 1
name = "Slow"
stateno = 4905
ID = 4900
helpertype = normal
pos = 0,0
postype = p1
keyctrl = 0
ownpal = 1
ignorehitpause = 1
persistent = 0

;燃え小エフェクト
[State 1000, ヘルパーを出す]
type = null;Helper
trigger1 = movehit = 1
name = "hit"
stateno = 4910
ID = 4910
helpertype = normal
pos = 0,0
postype = p2
keyctrl = 0
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 2000, ステート変更]
type = ChangeState
trigger1 = MoveHit
value = 4050

[State 2000, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; MAXヒートドライブ　フィニッシュ

[Statedef 4050]
type     = S
movetype = A
physics  = S
juggle   = 0
velset   = 0,0
anim     = 4000
ctrl     = 0
sprpriority = 2

[State 3050, BGPalfx]
type = null;BGPalfx
trigger1 = 1
invertall = 1
time = 1
mul = 120,120,120
ignorehitpause = 1

[State 810, 物理的なキャラの幅]
type = Width
trigger1 = 1
edge = 15,0

[State 170, 無敵]
type = NotHitBy
trigger1 = 1
value = SCA

[state エフェクト]
type = Helper
trigger1 = AnimElem = 1
name = "finish"
id = 4050
pos = 0,0
postype = P1
StateNo = 4051
helpertype = Normal
keyctrl = 0 
ownpal = 1
IgnoreHitPause = 1
persistent = 0
SuperMoveTime = 999999999999

[State 700, エフェクト表示]
type = Explod
trigger1 = AnimElem = 1
anim = 3015
postype = P1
pos = 0, 0
sprpriority = 5
ownpal = 1
supermove = 1
removeongethit = 1

[State -2]
Type = Explod
Trigger1 = AnimElem = 6
persistent = 0
anim = 3016
postype = P1
pos = 0, 0
sprpriority = 5
ownpal = 1
supermove = 1
bindtime = 1
removeongethit = 1

[State -2]
Type = Explod
Trigger1 = AnimElem = 5
anim = 3017
postype = P1
pos = 0, 0
sprpriority = 5
ownpal = 1
supermove = 1
bindTime = 1
removeongethit = 1

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 2
value = s12,7

[State 振り向き]
type = Turn
trigger1 = AnimElem = 2

[State 2100]
type = VelSet
trigger1 = AnimElemtime(1) > 0 && AnimElemtime(2) <= 0
x = 4

[State 1000, ]
type = Velset
trigger1 = AnimElemtime(2) > 0 && AnimElemtime(6) <= 0
x = 16

[State 2100]
type = VelAdd
Trigger1 = AnimElemtime(6) > 0 && AnimElemtime(9) < 5
x = -1

[State 1000, ]
type = Velset
trigger1 = AnimElemtime(9) = 5
Trigger2 = Vel X <= 0
x = 0

[State -3, 成功したときの残像]
type = AfterImage
trigger1 = AnimElem = 2
time = 12
trans = add1
timegap = 4
framegap = 1
length = 3
palbright = 50,50,50
palcontrast = 0,0,0

[State 200, ヒット定義]
type = HitDef
trigger1 = time = 0
attr = S, HA
damage    = 275,10
getpower  = 0
givepower = 10,10
animtype = Hard
guardflag = MA
hitflag = MAF
priority = 4, Hit
pausetime = 0, 0
guard.pausetime = 0,15
sparkno = 202
guard.sparkno = s10012+(var(11)*10000)
sparkxy = -20, -70
hitsound = s13,1+(var(11)*10)
guardsound = s2,1+(var(11)*10)
ground.type = High
ground.slidetime = 20
ground.hittime  = 21
ground.velocity = -8,-8
air.type = High
air.velocity = -8,-8
fall = 1
fall.recover = 0
palfx.time = 95
palfx.add = 30,-40,-140
palfx.sinadd = 60,60,50,10
palfx.color = 0
palfx.invertall = 1
EnvShake.Time = 20
envshake.ampl = 10
envshake.freq = 150
p2stateno = 35640

[State 810, エフェクト表示]
type = Explod
trigger1 = MoveHit
anim = 10075
postype = P2
pos = 0,-70
sprpriority = 10
;scale = 0.85,0.85
ignorehitpause = 1
persistent = 0

;スロー処理
[State 1000, ヘルパーを出す]
type = Helper
trigger1 = Movehit = 1
name = "Slow"
stateno = 4905
ID = 4900
helpertype = normal
pos = 0,0
postype = p1
keyctrl = 0
ownpal = 1
ignorehitpause = 1
persistent = 0

;燃え小エフェクト
[State 1000, ヘルパーを出す]
type = null;Helper
trigger1 = movehit = 1
name = "hit"
stateno = 4910
ID = 4910
helpertype = normal
pos = 0,0
postype = p2
keyctrl = 0
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 1000]
type = PlaySnd
trigger1 = movehit = 1
value = s12,13
ignorehitpause = 1
persistent = 0

[State 2000, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;ヒートドライブ(アニメ)
[Statedef 4051]
type = A
ctrl = 0
VelSet = 30,0
anim = 4001

[State 影の無効化]
Type = AssertSpecial
Trigger1 = 1
Flag = Noshadow
IgnoreHitPause = 1

[State カメラの判定]
type = ScreenBound
trigger1 = 1
value = 0
MoveCamera = 1,0

[State 残像]
type = AfterImage
trigger1 = time = 0
time = 30
PalBright = 0, 0, 0
PalContrast = 128,128,128
PalAdd = -50, -50, -50
PalMul = 1,1,1
Length = 8
FrameGap = 1
TimeGap = 2
Trans = Add1

[State すり抜け判定]
type = PlayerPush
trigger1 = 1
value = 0
IgnoreHitPause = 1
persistent = 1

[State 無敵]
type = nothitby
trigger1 = 1
value = SCA
time = 1
IgnoreHitPause = 1
persistent = 1

[State 速度]
type = VelSet
trigger1 = AnimElem = 5
x = 0

[State 振り向き]
type = Turn
trigger1 = AnimElem = 6

[State 速度]
type = VelSet
trigger1 = AnimElem = 6
x = 30

[State 10000]
type = destroyself
trigger1 = Animtime = 0

;---------------------------------------------------------------------------
; チェーンドライブ

[Statedef 4100]
type     = S
movetype = A
physics  = S
juggle   = 0
velset   = 0,0
anim     = 4100
ctrl     = 0
sprpriority = 2
poweradd = -1000
facep2 = 1

[State 1000, ]
type = Varset
trigger1 = time = 0
var(30) = 0

[State 3000, SC]
type = Varset
trigger1 = (prevstateno = [1000,2999])
trigger2 = (prevstateno = [11000,12999])
var(30) = 1

[State 3000, DC]
type = Varset
trigger1 = (prevstateno = [3000,3999])
var(30) = 2

[state 1000, VarSet];先行入力初期化
type = varset
trigger1 = time = 0
var(31) = 0

[state 1000, VarSet];先行入力初期化
type = varset
trigger1 = time = 0
var(32) = 0

[State 3000, Juggle]
type = Varset
trigger1 = var(30)
var(12) = 0

[State 3000, スキルゲージ消費]
type = varadd
triggerall = var(40) = 0
triggerall = fvar(35) >= 100
triggerall = time = 0
trigger1 = (prevstateno = [1000,2999]) || (prevstateno = [11000,12999])
trigger2 = prevstateno = [3000,3999]
fvar(35) = -101

[State 3000, パワーゲージ消費]
type = poweradd
trigger1 = var(40) = 0
trigger1 = time = 0
value = -1000

[State 3000, パワーMAX解除]
type = varset
trigger1 = time = 0
v = 40
value = 0

[State 170, 無敵]
type = NotHitBy
trigger1 = time = 0
value = SCA
time = 50

[State 700,];点滅
type = palfx
triggerall = time = 0
trigger1 = (prevstateno = [1000,2999]) || (prevstateno = [11000,12999])
time = 5
add = 230,230,230

[State 700,];点滅
type = palfx
triggerall = time = 0
trigger1 = prevstateno = [3000,3999]
time = 5
add = 250,120,210

[State 3000, 残像]
type = AfterImage
trigger1 = time = 0
time = 1

[State 2000, 超必殺技発動の時間停止]
type = SuperPause
trigger1 = time = 0
anim = -1
movetime = 30
time = 30
p2defmul = 1.0
darken = 0

[State 2000]
type = AssertSpecial
trigger1 = Time = [0,30]
flag = NoFG
;flag2 = NOBG
ignorehitpause = 1

[State 2000]
type = null;Explod
trigger1 = time = 0
anim = 10510+(var(11)*10000)
pos = -10,-105
sprpriority = -3
ownpal = 1
bindtime = 1
supermove = 1

[State 2000]
type = Explod
trigger1 = time = 0
anim = F277;10511+(var(11)*10000)
pos = -10,-105
sprpriority = 20
ownpal = 1
bindtime = 1
supermove = 1

;SC------------------
[State 1]
type = null;Helper
triggerall = Numhelper(10550)=0
trigger1 = (prevstateno = [1000,2999]) || (prevstateno = [11000,12999])
trigger1 = time = 0
helpertype = normal
name = "SC"
stateno = 10550
ID = 10550
pos = 0,0
postype = left
keyctrl = 0
ownpal = 1
facing = 1
supermovetime = 99
pausemovetime = 99
size.xscale = 1
size.yscale = 1
size.shadowoffset = 0
ignorehitpause = 0

[State -2, ????]
type = Helper
triggerall = time = 0
trigger1 = prevstateno = [1000,2999]
ID = 100500
name = "SuperCancel"
postype = P1
pos = 0,0
sprpriority = -9
stateno = 100500
helpertype = normal
keyctrl = 0
persistent = 1
ignorehitpause = 1
ownpal = 1

;DC------------------
[State 1]
type = Helper
triggerall = Numhelper(10560)=0
trigger1 = prevstateno = [3000,3999]
trigger1 = time = 0
helpertype = normal
name = "DC"
stateno = 10560
ID = 10560
pos = 0,0
postype = left
keyctrl = 0
ownpal = 1
facing = 1
supermovetime = 99
pausemovetime = 99
size.xscale = 1
size.yscale = 1
ignorehitpause = 0

[State 2000,]
type = PlaySnd
trigger1 = AnimElem = 1
value = s9,1+(var(11)*10)

[State 3050, BGPalfx]
type = null;BGPalfx
trigger1 = 1
invertall = 1
time = 1
mul = 120,120,120
ignorehitpause = 1

[State 1300, 0]
type = Width
trigger1 = AnimElem = 1,>=0
player = 15,25

[State 2200,1];サングラス部分相殺ヘルパー
type = Helper
trigger1 = AnimElem = 11,=1
ID = 3150
offset = 0,0
postype = P1
stateno = 4150
keyctrl = 0
ownpal = 1

[State 1302, 6];チェーンドライブ移動
type = Changestate
trigger1 = AnimElem = 12,>=5
trigger1 = NumHelper(3150) = 0
Value = 4110

[State 3000, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 3105

;---------------------------------------------------------------------------
;チェーンドライブ[移動]
[Statedef 4110]
type    = S
movetype= A
physics = S
anim = 3110

[State 3050, BGPalfx]
type = null;BGPalfx
trigger1 = 1
invertall = 1
time = 1
mul = 120,120,120
ignorehitpause = 1

[State 2000,]
type = PlaySnd
trigger1 = AnimElem = 2
value = s12,7

[State 810,1]
type = Width
trigger1 = 1
value = 15,15

[State 0, VelSet]
type = VelSet
trigger1 = animelemtime(8) > 0 && animelemtime(10) < 0
x = 20

[State 1030, 3]
type = VelSet
trigger1 = MoveContact = 1
trigger2 = animelem = 12
x = 0
ignorehitpause = 1

[State 1950]
type = HitDef
trigger1 = Time = 0
attr = S,HA
damage    = 10, 0
getpower  = 0
givepower = 10,10
animtype = Hard
hitflag = MAF
guardflag = MA
priority = 5
pausetime = 3,5
sparkno = 202
sparkxy = -30,-40
hitsound = s1,4+(var(11)*10)
guardsound = s2,1+(var(11)*10)
guard.sparkno = s10012+(var(11)*10000)
guard.velocity = -9
ground.type = High
ground.slidetime = 10
ground.hittime = 25
ground.velocity = 0,0
air.velocity = 0,0
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
p2facing = 1
p2stateno = 35655
kill = 0

[State 3000, ステート変更]
type = ChangeState
trigger1 = movehit
value = 4120
ctrl = 0

[State 1452, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 3115

;---------------------------------------------------------------------------
; チェーンドライブ　発動

[Statedef 4120]
type     = S
movetype = A
physics  = S
juggle   = 0
velset   = 0,0
anim     = 3120
ctrl     = 0
sprpriority = 5

[State 170, 無敵]
type = NotHitBy
trigger1 = 1
value = SCA

[State 1302, 6]
type = ChangeAnim
triggerall = Anim = 3120
triggerall = AnimElem = 2
trigger1 = NumHelper(3155) = 0
Value = 3121

[State 3050, BGPalfx]
type = null;BGPalfx
trigger1 = 1
invertall = 1
time = 1
mul = 120,120,120
ignorehitpause = 1

[State 810, 1]
type = TargetBind
trigger1 = 1
pos = 45,0

[State 1100, エフェクト表示]
type = Explod
triggerall = Anim = 3120
trigger1 = AnimElem = 5
persistent = 0
anim = 10021+(var(11)*10000)
postype = P1
pos = 35,-85
sprpriority = 10
ignorehitpause = 1

[State 810, 1]
type = PlaySnd
triggerall = Anim = 3120
Trigger1 = AnimElem = 5
value = s1,5

[State 2000,]
type = PlaySnd
triggerall = var(7) = 0
trigger1 = AnimElem = 9
value = s10+(var(7)*10),32
channel = 10

[State 200, ヒット定義]
type = HitDef
trigger1 = AnimElem = 1
attr = S, HA
damage    = 10, 0
getpower  = 0
givepower = 10,10
animtype = Hard
hitflag = MAF
priority = 4, Hit
pausetime = 30,30+var(0)
sparkno = 202
sparkxy = -20,-60
hitsound = s1,4+(var(11)*10)
ground.type = Low
ground.slidetime = 10
ground.hittime  = 20
ground.velocity = 0
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
envshake.time = 18
envshake.ampl = 6
envshake.freq = 90
p2stateno = 3190
kill = 0

[State 52, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 4140

;---------------------------------------------------------------------------
; MAXチェーンドライブ　乱舞(新)

[Statedef 4140]
type     = S
movetype = A
physics  = S
juggle   = 0
velset   = 0,0
anim     = 4110
ctrl     = 0
sprpriority = 5

[State 170, 無敵]
type = NotHitBy
trigger1 = 1
value = SCA

[State 3050, BGPalfx]
type = null;BGPalfx
trigger1 = 1
invertall = 1
time = 1
mul = 120,120,120
ignorehitpause = 1

[State 2000,]
type = PlaySnd
trigger1 = AnimElem = 3
trigger2 = AnimElem = 5
trigger3 = AnimElem = 10
trigger4 = AnimElem = 14
trigger5 = AnimElem = 18
trigger6 = AnimElem = 23
trigger7 = AnimElem = 28
trigger8 = AnimElem = 31
trigger9 = AnimElem = 36
trigger10 = AnimElem = 41
trigger11 = AnimElem = 43
trigger12 = AnimElem = 48
trigger13 = AnimElem = 52
trigger14 = AnimElem = 56
trigger15 = AnimElem = 61
trigger16 = AnimElem = 66
trigger17 = AnimElem = 70
trigger18 = AnimElem = 75
trigger19 = AnimElem = 81
value = s0,1

[State 2000,]
type = PlaySnd
trigger1 = AnimElem = 95
value = s0,4

[State 2000,]
type = PlaySnd
triggerall = var(7) = 0
trigger1 = AnimElem = 2
value = s10,48
channel = 10

[State 1000, 音を鳴らす]
type = PlaySnd
triggerall = var(7) = 0
trigger1 = AnimElem = 81
value = s10,50
channel = 10

[State 1000, 音を鳴らす]
type = PlaySnd
triggerall = var(7) = 0
trigger1 = AnimElem = 97
value = s10,10
channel = 10

[State 52, 1]
type = VelSet
trigger1 = AnimElemtime(2) >= 0 && AnimElemtime(80) < 0
x = 1

[State 0, PosAdd]
type = PosAdd
trigger1 = animelem = 89
x = 16

[State 0, PosAdd]
type = PosAdd
trigger1 = animelem = 90
x = 12

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 91
x = 5
ignorehitpause = 0

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 79
trigger2 = animelem = 95
x = 0

[State 810, 1]
type = TargetBind
trigger1 = 1
pos = 45,0

[State 200, ヒット定義]
type = HitDef
trigger1 = animelem = 3
attr = S, HA
damage    = 12, 0
getpower  = 0
givepower = 10,10
animtype = Hard
hitflag = MAF
priority = 4, Hit
pausetime = 3,5
sparkno = 202
sparkxy = -20, -80
hitsound = s1,1+(var(11)*10)
ground.type = High
ground.slidetime = 10
ground.hittime  = 20
ground.velocity = 0
;p2stateno = 5650
kill = 0

[State 200, ヒット定義]
type = HitDef
trigger1 = animelem = 5
attr = S, HA
damage    = 12, 0
getpower  = 0
givepower = 10,10
animtype = Hard
hitflag = MAF
priority = 4, Hit
pausetime = 3,5
sparkno = 202
sparkxy = -10, -85
hitsound = s1,1+(var(11)*10)
ground.type = High
ground.slidetime = 10
ground.hittime  = 20
ground.velocity = 0
;p2stateno = 5650
kill = 0

[State 200, ヒット定義]
type = HitDef
trigger1 = animelem = 10
attr = S, HA
damage    = 12, 0
getpower  = 0
givepower = 10,10
animtype = Hard
hitflag = MAF
priority = 4, Hit
pausetime = 3,5
sparkno = 202
sparkxy = -15, -20
hitsound = s1,3+(var(11)*10)
ground.type = Low
ground.slidetime = 10
ground.hittime  = 20
ground.velocity = 0
;p2stateno = 5655
kill = 0

[State 200, ヒット定義]
type = HitDef
trigger1 = animelem = 14
attr = S, HA
damage    = 12, 0
getpower  = 0
givepower = 10,10
animtype = Hard
hitflag = MAF
priority = 4, Hit
pausetime = 3,5
sparkno = 202
sparkxy = -20, -70
hitsound = s1,3+(var(11)*10)
ground.type = Low
ground.slidetime = 10
ground.hittime  = 20
ground.velocity = 0
;p2stateno = 5655
kill = 0

[State 200, ヒット定義]
type = HitDef
trigger1 = animelem = 18
attr = S, HA
damage    = 12, 0
getpower  = 0
givepower = 10,10
animtype = Hard
hitflag = MAF
priority = 4, Hit
pausetime = 3,5
sparkno = 202
sparkxy = -15, -70
hitsound = s1,1+(var(11)*10)
ground.type = High
ground.slidetime = 10
ground.hittime  = 20
ground.velocity = 0
;p2stateno = 5650
kill = 0

[State 200, ヒット定義]
type = HitDef
trigger1 = animelem = 20
attr = S, HA
damage    = 12, 0
getpower  = 0
givepower = 10,10
animtype = Hard
hitflag = MAF
priority = 4, Hit
pausetime = 3,5
sparkno = 202
sparkxy = -20, -80
hitsound = s1,1+(var(11)*10)
ground.type = High
ground.slidetime = 10
ground.hittime  = 20
ground.velocity = 0
;p2stateno = 5650
kill = 0

[State 200, ヒット定義]
type = HitDef
trigger1 = animelem = 23
attr = S, HA
damage    = 12, 0
getpower  = 0
givepower = 10,10
animtype = Hard
hitflag = MAF
priority = 4, Hit
pausetime = 3,5
sparkno = 202
sparkxy = -10, -60
hitsound = s1,3+(var(11)*10)
ground.type = Low
ground.slidetime = 10
ground.hittime  = 20
ground.velocity = 0
;p2stateno = 5655
kill = 0

[State 200, ヒット定義]
type = HitDef
trigger1 = animelem = 28
attr = S, HA
damage    = 12, 0
getpower  = 0
givepower = 10,10
animtype = Hard
hitflag = MAF
priority = 4, Hit
pausetime = 3,5
sparkno = 202
sparkxy = -15, -80
hitsound = s1,1+(var(11)*10)
ground.type = High
ground.slidetime = 10
ground.hittime  = 20
ground.velocity = 0
;p2stateno = 5650
kill = 0

[State 200, ヒット定義]
type = HitDef
trigger1 = animelem = 31
attr = S, HA
damage    = 12, 0
getpower  = 0
givepower = 10,10
animtype = Hard
hitflag = MAF
priority = 4, Hit
pausetime = 3,5
sparkno = 202
sparkxy = -25, -85
hitsound = s1,3+(var(11)*10)
ground.type = High
ground.slidetime = 10
ground.hittime  = 20
ground.velocity = 0
;p2stateno = 5650
kill = 0

[State 200, ヒット定義]
type = HitDef
trigger1 = animelem = 36
trigger2 = animelem = 38
attr = S, HA
damage    = 12, 0
getpower  = 0
givepower = 10,10
animtype = Hard
hitflag = MAF
priority = 4, Hit
pausetime = 3,5
sparkno = 202
sparkxy = -13, -80
hitsound = s1,1+(var(11)*10)
ground.type = High
ground.slidetime = 10
ground.hittime  = 20
ground.velocity = 0
;p2stateno = 5650
kill = 0

[State 200, ヒット定義]
type = HitDef
trigger1 = animelem = 41
attr = S, HA
damage    = 12, 0
getpower  = 0
givepower = 10,10
animtype = Hard
hitflag = MAF
priority = 4, Hit
pausetime = 3,5
sparkno = 202
sparkxy = -20, -80
hitsound = s1,1+(var(11)*10)
ground.type = High
ground.slidetime = 10
ground.hittime  = 20
ground.velocity = 0
palfx.time = 60
palfx.add = 30,-40,-140
palfx.sinadd = 60,60,50,10
palfx.color = 0
palfx.invertall = 1
;p2stateno = 5650
kill = 0

[State 200, ヒット定義]
type = HitDef
trigger1 = animelem = 43
attr = S, HA
damage    = 12, 0
getpower  = 0
givepower = 10,10
animtype = Hard
hitflag = MAF
priority = 4, Hit
pausetime = 3,5
sparkno = 202
sparkxy = -10, -85
hitsound = s1,1+(var(11)*10)
ground.type = High
ground.slidetime = 10
ground.hittime  = 20
ground.velocity = 0
palfx.time = 60
palfx.add = 30,-40,-140
palfx.sinadd = 60,60,50,10
palfx.color = 0
palfx.invertall = 1
;p2stateno = 5650
kill = 0

[State 200, ヒット定義]
type = HitDef
trigger1 = animelem = 48
attr = S, HA
damage    = 12, 0
getpower  = 0
givepower = 10,10
animtype = Hard
hitflag = MAF
priority = 4, Hit
pausetime = 3,5
sparkno = 202
sparkxy = -15, -20
hitsound = s1,3+(var(11)*10)
ground.type = Low
ground.slidetime = 10
ground.hittime  = 20
ground.velocity = 0
palfx.time = 60
palfx.add = 30,-40,-140
palfx.sinadd = 60,60,50,10
palfx.color = 0
palfx.invertall = 1
;p2stateno = 5655
kill = 0

[State 200, ヒット定義]
type = HitDef
trigger1 = animelem = 52
attr = S, HA
damage    = 12, 0
getpower  = 0
givepower = 10,10
animtype = Hard
hitflag = MAF
priority = 4, Hit
pausetime = 3,5
sparkno = 202
sparkxy = -20, -70
hitsound = s1,3+(var(11)*10)
ground.type = Low
ground.slidetime = 10
ground.hittime  = 20
ground.velocity = 0
palfx.time = 60
palfx.add = 30,-40,-140
palfx.sinadd = 60,60,50,10
palfx.color = 0
palfx.invertall = 1
;p2stateno = 5655
kill = 0

[State 200, ヒット定義]
type = HitDef
trigger1 = animelem = 56
trigger2 = animelem = 81
attr = S, HA
damage    = 12, 0
getpower  = 0
givepower = 10,10
animtype = Hard
hitflag = MAF
priority = 4, Hit
pausetime = 3,5
sparkno = 202
sparkxy = -15, -70
hitsound = s1,1+(var(11)*10)
ground.type = High
ground.slidetime = 10
ground.hittime  = 20
ground.velocity = 0
palfx.time = 60
palfx.add = 30,-40,-140
palfx.sinadd = 60,60,50,10
palfx.color = 0
palfx.invertall = 1
;p2stateno = 5650
kill = 0

[State 200, ヒット定義]
type = HitDef
trigger1 = animelem = 58
attr = S, HA
damage    = 12, 0
getpower  = 0
givepower = 10,10
animtype = Hard
hitflag = MAF
priority = 4, Hit
pausetime = 3,5
sparkno = 202
sparkxy = -20, -80
hitsound = s1,1+(var(11)*10)
ground.type = High
ground.slidetime = 10
ground.hittime  = 20
ground.velocity = 0
palfx.time = 60
palfx.add = 30,-40,-140
palfx.sinadd = 60,60,50,10
palfx.color = 0
palfx.invertall = 1
;p2stateno = 5650
kill = 0

[State 200, ヒット定義]
type = HitDef
trigger1 = animelem = 61
attr = S, HA
damage    = 12, 0
getpower  = 0
givepower = 10,10
animtype = Hard
hitflag = MAF
priority = 4, Hit
pausetime = 3,5
sparkno = 202
sparkxy = -10, -60
hitsound = s1,3+(var(11)*10)
ground.type = Low
ground.slidetime = 10
ground.hittime  = 20
ground.velocity = 0
palfx.time = 60
palfx.add = 30,-40,-140
palfx.sinadd = 60,60,50,10
palfx.color = 0
palfx.invertall = 1
;p2stateno = 5655
kill = 0

[State 200, ヒット定義]
type = HitDef
trigger1 = animelem = 66
attr = S, HA
damage    = 12, 0
getpower  = 0
givepower = 10,10
animtype = Hard
hitflag = MAF
priority = 4, Hit
pausetime = 3,5
sparkno = 202
sparkxy = -15, -80
hitsound = s1,1+(var(11)*10)
ground.type = High
ground.slidetime = 10
ground.hittime  = 20
ground.velocity = 0
palfx.time = 60
palfx.add = 30,-40,-140
palfx.sinadd = 60,60,50,10
palfx.color = 0
palfx.invertall = 1
;p2stateno = 5650
kill = 0

[State 200, ヒット定義]
type = HitDef
trigger1 = animelem = 70
attr = S, HA
damage    = 12, 0
getpower  = 0
givepower = 10,10
animtype = Hard
hitflag = MAF
priority = 4, Hit
pausetime = 3,5
sparkno = 202
sparkxy = -25, -85
hitsound = s1,3+(var(11)*10)
ground.type = High
ground.slidetime = 10
ground.hittime  = 20
ground.velocity = 0
palfx.time = 60
palfx.add = 30,-40,-140
palfx.sinadd = 60,60,50,10
palfx.color = 0
palfx.invertall = 1
;p2stateno = 5650
kill = 0

[State 200, ヒット定義]
type = HitDef
trigger1 = animelem = 75
trigger2 = animelem = 77
attr = S, HA
damage    = 12, 0
getpower  = 0
givepower = 10,10
animtype = Hard
hitflag = MAF
priority = 4, Hit
pausetime = 3,5
sparkno = 202
sparkxy = -13, -80
hitsound = s1,1+(var(11)*10)
ground.type = High
ground.slidetime = 10
ground.hittime  = 20
ground.velocity = 0
palfx.time = 60
palfx.add = 30,-40,-140
palfx.sinadd = 60,60,50,10
palfx.color = 0
palfx.invertall = 1
;p2stateno = 5650
kill = 0

[State 200, ヒット定義]
type = HitDef
trigger1 = animelem = 83
attr = S, HA
damage    = 24, 0
getpower  = 0
givepower = 10,10
animtype = Hard
hitflag = MAF
priority = 4, Hit
pausetime = 14,100
sparkno = 202
sparkxy = -20, -80
hitsound = s1,4+(var(11)*10)
ground.type = High
ground.slidetime = 10
ground.hittime  = 20
ground.velocity = 0
palfx.time = 120
palfx.add = 30,-40,-140
palfx.sinadd = 60,60,50,10
palfx.color = 0
palfx.invertall = 1
EnvShake.Time = 18
envshake.ampl = 9
envshake.freq = 135
;p2stateno = 5650
kill = 0

[State 200, ヒット定義]
type = HitDef
trigger1 = animelem = 97
attr = S, HA
damage    = 24, 0
getpower  = 0
givepower = 10,10
animtype = Hard
hitflag = MAF
priority = 4, Hit
pausetime = 14,14
sparkno = 202
sparkxy = -20, -80
hitsound = s1,4+(var(11)*10)
ground.type = High
ground.slidetime = 10
ground.hittime  = 20
ground.velocity = 0
palfx.time = 120
palfx.add = 30,-40,-140
palfx.sinadd = 60,60,50,10
palfx.color = 0
palfx.invertall = 1
EnvShake.Time = 18
envshake.ampl = 9
envshake.freq = 135
p2stateno = 35690
kill = 0

;燃え小エフェクト
[State 1000, ヘルパーを出す]
type = Helper
triggerall = AnimElemtime(40) >= 0
trigger1 = Movehit = 1
name = "hit"
stateno = 4910
ID = 4910
helpertype = normal
pos = 0,0
postype = p2
keyctrl = 0
ownpal = 1

[State 52, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 4145
ctrl = 0

;---------------------------------------------------------------------------
; 崩れ落ち?ウン
; P2 - Shaking from the hit

[Statedef 35690]
type    = A
movetype= H
physics = N
velset = 0,0

[State 52, 1]
type = Hitfallset
trigger1 = time = 0
value = 0

[State 52, 1]
type = VelSet
trigger1 = time = 0
x = 0
y = 0

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = Helper(100000),var(0)

[State 1830]
type = ChangeAnim2
Trigger1 = Time = 0
value = 5655

[State 261, 2]
type = ChangeState
trigger1 = HitShakeOver = 1
value = 35691

;---------------------------------------------------------------------------
; 崩れ落ち?ウン

[Statedef 35691]
type    = A
movetype= H
physics = N
velset = 0,0

[State 5690, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 5691

[State 5690, 3]
type = SelfState
trigger1 = animtime = 0
value = 5110

;---------------------------------------------------------------------------
; MAXチェーンドライブ　フィニッシュ

[Statedef 4145]
type     = S
movetype = A
physics  = S
juggle   = 0
velset   = 0,0
anim     = 4115
ctrl     = 0
sprpriority = 2

[State 170, 無敵]
type = NotHitBy
trigger1 = 1
value = SCA

[State 2302,1]
type = PlayerPush
trigger1 = AnimElemTime(1) > 0
value = 1

[State 2200,Voice]
type = PlaySnd
trigger1 = AnimElem = 1
value = s10,51
volume = 255

[State 1300, 5]
type = Envcolor
trigger1 = Time = 0
persistent = 0
ignorehitpause = 1
value = 2, 0, 0
time = 30
under = 1
supermove = 1

[State 3050, BGPalfx]
type = null;BGPalfx
trigger1 = time = 0
invertall = 1
time = 30
mul = 120,120,120
ignorehitpause = 1

[State 3500, 13]
type = AssertSpecial
trigger1 = Time = [0,30]
flag = Nofg
flag1 = noshadow
ignorehitpause = 1

[State -2, ??? ??]
type = Explod
trigger1 = Time = [0,30]
ID = 100006
postype = P1
pos = 0,0
sprpriority = -9
anim = F100000
persistent = 1
ignorehitpause = 1
removetime = 1

[State 710, 移動量]
type = VelSet
trigger1 = (animelem=1,>0 && animelem=9,<0)
x = -6;7.3

[State 1000, ]
type = Velset
trigger1 = AnimElemtime(10) > 0 && AnimElemtime(15) <= 0
x = 20

[State 1000, ]
type = Velset
trigger1 = AnimElemtime(15) = 5
x = 0

[State 200, ヒット定義]
type = HitDef
trigger1 = time = 0
attr = S, HA
damage    = 48, 0
getpower  = 0
givepower = 10,10
animtype = Hard
guardflag = MA
hitflag = MAF
priority = 4, Hit
pausetime = 0, 0
guard.pausetime = 0,15
sparkno = 202
guard.sparkno = s10012+(var(11)*10000)
sparkxy = -20, -70
hitsound = s13,1+(var(11)*10)
guardsound = s2,1+(var(11)*10)
ground.type = High
ground.slidetime = 20
ground.hittime  = 21
ground.velocity = -8,-8
air.type = High
air.velocity = -8,-8
fall = 1
fall.recover = 0
palfx.time = 95
palfx.add = 30,-40,-140
palfx.sinadd = 60,60,50,10
palfx.color = 0
palfx.invertall = 1
EnvShake.Time = 20
envshake.ampl = 10
envshake.freq = 150
p2stateno = 35640

[State 810, エフェクト表示]
type = Explod
trigger1 = MoveHit
anim = 10075
postype = P2
pos = 0,-70
sprpriority = 10
;scale = 0.85,0.85
ignorehitpause = 1
persistent = 0

;スロー処理
[State 1000, ヘルパーを出す]
type = Helper
trigger1 = Movehit = 1
name = "Slow"
stateno = 4900
ID = 4900
helpertype = normal
pos = 0,0
postype = p1
keyctrl = 0
ownpal = 1
ignorehitpause = 1
persistent = 0

;燃え小エフェクト
[State 1000, ヘルパーを出す]
type = null;Helper
trigger1 = movehit = 1
name = "hit"
stateno = 4910
ID = 4910
helpertype = normal
pos = 0,0
postype = p2
keyctrl = 0
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 1000]
type = PlaySnd
trigger1 = movehit = 1
value = s12,13
ignorehitpause = 1
persistent = 0

[State 3000, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; きりもみ吹っ飛び (P2 - Shaking from the hit)

[Statedef 35640]
type = A
movetype = H
physics = N
velset = 0,0

[State 5640, 3]
type = ChangeAnim2
trigger1 = Time = 0
value = 5640

[State 5640, 4]
type = Changestate
trigger1 = HitShakeOver
value = 35641

;---------------------------------------------------------------------------
; きりもみ吹っ飛び

[Statedef 35641]
type = A
movetype = H
physics = N
velset = 0,0

[State 5641, 1]
type = VelSet
trigger1 = Time = 0
x = ifelse(gethitvar(xvel)<0,-1,1)*facing*1
y = -14

[State 5641, 1]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 5641, 3]
type = ChangeAnim2
trigger1 = Time = 0
value = 5641

[State 5641, 4]
type = Changestate
trigger1 = Animtime = 0
value = 35642

;---------------------------------------------------------------------------
; きりもみ吹っ飛び - 回?開始

[Statedef 35642]
type = A
movetype = H
physics = N

[State 5642, 1]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 5642, 4]
type = ChangeAnim2
trigger1 = Time = 0
value = 5642

[State 5642, 5]
type = VelAdd
trigger1 = 1
y = 0.57

[State 5642, 6]
type = ChangeAnim
trigger1 = (Vel y > 0) && (Pos y >= Helper(100000),var(0))
trigger1 = SelfAnimExist(5062)
value = 5062

[State 5642, 7]
type = SelfState
trigger1 = (Vel y > 0) && (Pos y >= Helper(100000),var(0))
value = 5100

;------------------------------------------------------------------------
;サングラス部分相殺ヘルパー
[Statedef 4150]
type = S
movetype = A
physics = N
anim = 3150

[State 1001, 3]
type = VelSet
trigger1 = Time = 0
x = 7.8
y = -2.7

[State 1101, 5]
type = VelAdd
trigger1 = Time > 0
y = .3

[State 1100, 2]
type = ReversalDef
trigger1 = time >= 0
reversal.attr = SCA,NP, SP, HP
hitflag = P
numhits = 0
pausetime = 1,1
P1stateno = 3157

[State 1110,1];サングラス部分攻撃用ヘルパー
type = Helper
trigger1 = time = 0
ID = 3151
pos = 0,0
postype = P1
stateno = 4151
keyctrl = 0
ownpal = 1

[State 1000, 1]
type = HitBy
trigger1 = 1
value = SCA, AP
time = 2

[state 100,0]
type = hitoverride
trigger1 = 1
attr = SCA, AA, AP, AT
stateno = 3157

[State end]
type = destroyself
trigger1 = MoveContact
trigger2 = time = 120
trigger3 = NumHelper(3151) = 0

;------------------------------------------------------------------------
;;サングラス部分攻撃用ヘルパー
[Statedef 4151]
type = S
movetype = A
physics = N
anim = 3150

[State -2, AirGuard]
type = AssertSpecial
triggerall = root,var(20) >= 1
trigger1 = p2statetype = A
flag = unguardable

[State 1000, 1]
type = NotHitBy
trigger1 = 1
value = SCA

[State 1001, 3]
type = VelSet
trigger1 = Time = 0
x = 7.8
y = -2.7

[State 1101, 5]
type = VelAdd
trigger1 = Time > 0
y = .3

[State 2350,5]
type = HitDef
trigger1 = time = 0
hitflag = MAF
guardflag = MA
attr = S, HP
damage    = 10, 0
getpower  = 0
givepower = 10,10
animtype = hard
air.animtype = up
pausetime = 0,12
guard.pausetime = 0,12
sparkno = 202
guard.sparkno = s10012+(root,var(11)*10000)
sparkxy = -15,-50
hitsound = s1,1+(var(11)*10)+(root,var(11)*10)
guardsound = s2,1+(var(11)*10)+(root,var(11)*10)
ground.type = High
ground.slidetime = 20
ground.hittime = 30
ground.velocity = -4,0
guard.hittime = 14
guard.slidetime = 12
;guard.velocity = -3,0
air.velocity = -3.6,-6.6
air.fall = 1
yaccel = .6
fall.recover = 0
kill = 0

[State 1110,1]
type = Helper
trigger1 = MoveContact
helpertype = player
ID = 3155
pos = 0,0
postype = P1
stateno = 3155
keyctrl = 0
ownpal = 1

[State end]
type = destroyself
trigger1 = MoveContact
trigger2 = time = 120
trigger3 = NumHelper(3150) = 0

;---------------------------------------------------------------------------
; チェーンドライブ改

[Statedef 4300]
type     = S
movetype = A
physics  = S
juggle   = ifelse(var(30),0,(ifelse(var(12),31,1)))
velset   = 0,0
anim     = 4300
ctrl     = 0
sprpriority = 2
poweradd = -1000
facep2 = 1

[State 1000, ]
type = Varset
trigger1 = time = 0
var(30) = 0

[State 3000, SC]
type = Varset
trigger1 = (prevstateno = [1000,2999])
trigger2 = (prevstateno = [11000,12999])
var(30) = 1

[State 3000, DC]
type = Varset
trigger1 = (prevstateno = [3000,3999])
var(30) = 2

[state 1000, VarSet];先行入力初期化
type = varset
trigger1 = time = 0
var(31) = 0

[state 1000, VarSet];先行入力初期化
type = varset
trigger1 = time = 0
var(32) = 0

[State 3000, Juggle]
type = Varset
trigger1 = var(30)
var(12) = 0

[State 3000, スキルゲージ消費]
type = varadd
triggerall = var(40) = 0
triggerall = fvar(35) >= 100
triggerall = time = 0
trigger1 = (prevstateno = [1000,2999]) || (prevstateno = [11000,12999])
trigger2 = prevstateno = [3000,3999]
fvar(35) = -101

[State 3000, パワーゲージ消費]
type = poweradd
trigger1 = var(40) = 0
trigger1 = time = 0
value = -1000

[State 3000, パワーMAX解除]
type = varset
trigger1 = time = 0
v = 40
value = 0

[State 170, 無敵]
type = NotHitBy
trigger1 = time = 0
value = SCA
time = 38

[State 700,];点滅
type = palfx
triggerall = time = 0
trigger1 = (prevstateno = [1000,2999]) || (prevstateno = [11000,12999])
time = 5
add = 230,230,230

[State 700,];点滅
type = palfx
triggerall = time = 0
trigger1 = prevstateno = [3000,3999]
time = 5
add = 250,120,210

[State 3000, 残像]
type = AfterImage
trigger1 = time = 0
time = 1

[State 2000, 超必殺技発動の時間停止]
type = SuperPause
trigger1 = time = 0
anim = -1
movetime = 30
time = 30
p2defmul = 1.0

[State 2000]
type = AssertSpecial
trigger1 = Time = [0,30]
flag = NoFG
flag2 = NOBG
ignorehitpause = 1

[State 2000]
type = Explod
trigger1 = AnimElem = 1
anim = 10510+(var(11)*10000)
pos = -2,-90
sprpriority = -3
ownpal = 1
bindtime = 1
supermove = 1

[State 2000]
type = Explod
trigger1 = AnimElem = 1
anim = 10511+(var(11)*10000)
pos = -2,-90
sprpriority = 20
ownpal = 1
bindtime = 1
supermove = 1

;SC------------------
[State 1]
type = Helper
triggerall = Numhelper(10550)=0
trigger1 = (prevstateno = [1000,2999]) || (prevstateno = [11000,12999])
trigger1 = time = 0
helpertype = normal
name = "SC"
stateno = 10550
ID = 10550
pos = 0,0
postype = left
keyctrl = 0
ownpal = 1
facing = 1
supermovetime = 99
pausemovetime = 99
size.xscale = 1
size.yscale = 1
size.shadowoffset = 0
ignorehitpause = 0

;DC------------------
[State 1]
type = Helper
triggerall = Numhelper(10560)=0
trigger1 = prevstateno = [3000,3999]
trigger1 = time = 0
helpertype = normal
name = "DC"
stateno = 10560
ID = 10560
pos = 0,0
postype = left
keyctrl = 0
ownpal = 1
facing = 1
supermovetime = 99
pausemovetime = 99
size.xscale = 1
size.yscale = 1
ignorehitpause = 0

[State 2000,]
type = PlaySnd
trigger1 = AnimElem = 1
value = s9,1+(var(11)*10)

[State 3050, BGPalfx]
type = null;BGPalfx
trigger1 = 1
invertall = 1
time = 1
mul = 120,120,120
ignorehitpause = 1

[State 2000,]
type = PlaySnd
trigger1 = AnimElem = 2
value = s10+(var(7)*10),16

[State 2000,]
type = PlaySnd
trigger1 = AnimElem = 10
value = s12,7

[State 3000, 軸位置移動]
type = VelSet
trigger1 = AnimElemtime(10) >= 0 && AnimElemtime(16) <= 0
x = 16

[State 3000, 軸位置移動]
type = VelSet
trigger1 = AnimElem = 18
x = 0

[State 3000, 軸位置移動]
type = VelSet
triggerall = MoveGuarded
trigger1 = AnimElemtime(16) <= 0
x = 3

[State -3, 成功したときの残像]
type = AfterImage
trigger1 = AnimElem = 1
time = 65
trans = add1
timegap = 4
framegap = 1
length = 3
palbright = 50,50,50
palcontrast = 0,0,0

[State 1950]
type = HitDef
trigger1 = Time = 0
attr = S,HA
damage    = 0
getpower  = 0
givepower = 10,10
animtype = Hard
hitflag = MAF
guardflag = LA
priority = 5
pausetime = 3,5
sparkno = 202
sparkxy = -30,-40
hitsound = s1,3+(var(11)*10)
guardsound = s2,1+(var(11)*10)
guard.sparkno = s10012+(var(11)*10000)
guard.velocity = -9
ground.type = High
ground.slidetime = 10
ground.hittime = 25
ground.velocity = 0,0
air.velocity = 0,0
p2facing = 1
p1stateno = 4310
p2stateno = 5655

[State 3000, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; チェーンドライブ改　発動

[Statedef 4310]
type     = S
movetype = A
physics  = S
juggle   = 0
velset   = 0,0
anim     = 4305
ctrl     = 0
sprpriority = 5

[State 3050, BGPalfx]
type = null;BGPalfx
trigger1 = 1
invertall = 1
time = 1
mul = 120,120,120
ignorehitpause = 1

[State 810, 物理的なキャラの幅]
type = Width
trigger1 = 1
edge = 60,0

[State 2000,]
type = PlaySnd
trigger1 = AnimElem = 12
value = s7,15

[State 2000,]
type = PlaySnd
trigger1 = AnimElem = 79
value = s10+(var(7)*10),1

[State 2000,]
type = PlaySnd
trigger1 = AnimElem = 2
trigger2 = AnimElem = 8
trigger3 = AnimElem = 44
trigger4 = AnimElem = 49
trigger5 = AnimElem = 79
value = s0,1

[State 2000,]
type = PlaySnd
trigger1 = AnimElem = 18
trigger2 = AnimElem = 24
trigger3 = AnimElem = 32
trigger4 = AnimElem = 57
trigger5 = AnimElem = 69
value = s0,3

[State 52, 1]
type = VelSet
trigger1 = AnimElemtime(1) >= 0 && AnimElemtime(80) < 0
x = 1

[State 810, 1]
type = TargetBind
trigger1 = AnimElemtime(1) >= 0 && AnimElemtime(80) < 0
pos = 45,0

[State -3, 成功したときの残像]
type = AfterImage
trigger1 = AnimElem = 1
time = 130
trans = add1
timegap = 4
framegap = 1
length = 4
palbright = 50,50,50
palcontrast = 0,0,0

[State 200, ヒット定義]
type = HitDef
trigger1 = AnimElem = 2
attr = S, HA
damage    = 20, 0
getpower  = 0
givepower = 10,10
animtype = Hard
hitflag = MAF
priority = 4, Hit
pausetime = 3,5
sparkno = 202
sparkxy = -20,-60
hitsound = s1,1+(var(11)*10)
ground.type = Low
ground.slidetime = 10
ground.hittime  = 20
ground.velocity = 0
p2stateno = 5655
kill = 0

[State 200, ヒット定義]
type = HitDef
trigger1 = AnimElem = 8
attr = S, HA
damage    = 20, 0
getpower  = 0
givepower = 10,10
animtype = Hard
hitflag = MAF
priority = 4, Hit
pausetime = 2,10
sparkno = 202
sparkxy = -25,-55
hitsound = s1,1+(var(11)*10)
ground.type = High
ground.slidetime = 10
ground.hittime  = 20
ground.velocity = 0
p2stateno = 5650
kill = 0

[State 200, ヒット定義]
type = HitDef
trigger1 = AnimElem = 18
attr = S, HA
damage    = 15, 0
getpower  = 0
givepower = 10,10
animtype = Hard
hitflag = MAF
priority = 4, Hit
pausetime = 1,10
sparkno = 202
sparkxy = -15,-20
hitsound = s1,3+(var(11)*10)
ground.type = High
ground.slidetime = 10
ground.hittime  = 20
ground.velocity = 0
p2stateno = 5655
kill = 0

[State 200, ヒット定義]
type = HitDef
trigger1 = AnimElem = 24
attr = S, HA
damage    = 20, 0
getpower  = 0
givepower = 10,10
animtype = Hard
hitflag = MAF
priority = 4, Hit
pausetime = 1,12
sparkno = 202
sparkxy = -20,-65
hitsound = s1,3+(var(11)*10)
ground.type = Low
ground.slidetime = 10
ground.hittime  = 20
ground.velocity = 0
p2stateno = 5655
kill = 0
envshake.time = 3
envshake.ampl = 3
envshake.freq = 100

[State 200, ヒット定義]
type = HitDef
trigger1 = AnimElem = 33
attr = S, HA
damage    = 25, 0
getpower  = 0
givepower = 10,10
animtype = Hard
hitflag = MAF
priority = 4, Hit
pausetime = 0,12
sparkno = 202
sparkxy = -25,-90
hitsound = s1,3+(var(11)*10)
ground.type = High
ground.slidetime = 10
ground.hittime  = 20
ground.velocity = 0
p2stateno = 5650
kill = 0
envshake.time = 3
envshake.ampl = 3
envshake.freq = 100

[State 200, ヒット定義]
type = HitDef
trigger1 = AnimElem = 44
attr = S, HA
damage    = 15, 0
getpower  = 0
givepower = 10,10
animtype = Hard
hitflag = MAF
priority = 4, Hit
pausetime = 0,10+var(0)
sparkno = 202
sparkxy = -15,-80
hitsound = s1,1+(var(11)*10)
ground.type = High
ground.slidetime = 10
ground.hittime  = 20
ground.velocity = 0
p2stateno = 5650
kill = 0
envshake.time = 4
envshake.ampl = 4
envshake.freq = 100

[State 200, ヒット定義]
type = HitDef
trigger1 = AnimElem = 49
attr = S, HA
damage    = 20, 0
getpower  = 0
givepower = 10,10
animtype = Hard
hitflag = MAF
priority = 4, Hit
pausetime = 0,10+var(0)
sparkno = 202
sparkxy = -20,-70
hitsound = s1,1+(var(11)*10)
ground.type = High
ground.slidetime = 10
ground.hittime  = 20
ground.velocity = 0
p2stateno = 5650
kill = 0
envshake.time = 4
envshake.ampl = 4
envshake.freq = 100

[State 200, ヒット定義]
type = HitDef
trigger1 = AnimElem = 57
attr = S, HA
damage    = 25, 0
getpower  = 0
givepower = 10,10
animtype = Hard
hitflag = MAF
priority = 4, Hit
pausetime = 0,10+var(0)
sparkno = 202
sparkxy = -20,-75
hitsound = s1,3+(var(11)*10)
ground.type = High
ground.slidetime = 10
ground.hittime  = 20
ground.velocity = 0
p2stateno = 5650
kill = 0
envshake.time = 5
envshake.ampl = 5
envshake.freq = 100

[State 200, ヒット定義]
type = HitDef
trigger1 = AnimElem = 69
attr = S, HA
damage    = 20, 0
getpower  = 0
givepower = 10,10
animtype = Hard
hitflag = MAF
priority = 4, Hit
pausetime = 0,10+var(0)
sparkno = 202
sparkxy = -25,-65
hitsound = s1,3+(var(11)*10)
ground.type = High
ground.slidetime = 10
ground.hittime  = 20
ground.velocity = 0
p2stateno = 5655
kill = 0
envshake.time = 5
envshake.ampl = 5
envshake.freq = 100

[State 200, ヒット定義]
type = HitDef
trigger1 = AnimElem = 80
attr = S, HA
damage    = 50, 0
getpower  = 0
givepower = 10,10
animtype = up
hitflag = MAF
priority = 4, Hit
pausetime = 20,20
sparkno = 202
sparkxy = -20,-80
hitsound = s1,4+(var(11)*10)
ground.type = High
ground.slidetime = 10
ground.hittime  = 20
ground.velocity = -5,-8
air.velocity = -5,-8
fall = 1
fall.recover = 0
envshake.time = 10
envshake.ampl = 7
envshake.freq = 100
kill = 0

[State 52, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 4350

;---------------------------------------------------------------------------
;チェーンドライブ改　トドメ

[Statedef 4350]
type     = S
movetype = A
physics  = S
juggle   = 0
velset   = 0,0
anim     = 3500
ctrl     = 0
sprpriority = 2

[State 810, 物理的なキャラの幅]
type = Width
trigger1 = 1
edge = 15,0

[State 170, 無敵]
type = NotHitBy
trigger1 = 1
value = SCA

[State 2000, 超必殺技発動の時間停止]
type = SuperPause
trigger1 = time = 0
anim = -1
movetime = 52
time = 52
p2defmul = 1.0

[State 2000]
type = AssertSpecial
trigger1 = Time = [0,52]
flag = NoFG
flag2 = NOBG
ignorehitpause = 1

[State 2000]
type = Explod
trigger1 = AnimElem = 1
anim = 10510+(var(11)*10000)
pos = 0,-80
sprpriority = -3
ownpal = 1
bindtime = 1
supermove = 1

[State 2000]
type = Explod
trigger1 = AnimElem = 1
anim = 10511+(var(11)*10000)
pos = 0,-80
sprpriority = 20
ownpal = 1
bindtime = 1
supermove = 1

[State 2000,]
type = PlaySnd
trigger1 = AnimElem = 1
value = s9,1+(var(11)*10)

[State 181,]
type = PlaySnd
trigger1 = AnimElem = 4
value = s12,12
volume = -50

[State 181,]
type = PlaySnd
trigger1 = AnimElem = 16
value = s12,0

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 12
value = s10+(var(7)*10),17

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 17
value = s12,7

[State 700, エフェクト表示]
type = Explod
trigger1 = AnimElem = 4
anim = 3005
postype = P1
pos = 0, 0
bindtime = -1
removetime = -1
sprpriority = 5
ownpal = 1
supermove = 1
removeongethit = 1
ID = 3000

[State 1001,]
type = RemoveExplod
trigger1 = AnimElem = 16
ID = 3000

[State 700, エフェクト表示]
type = Explod
trigger1 = AnimElem = 16
anim = 3505
postype = P1
pos = 0, 0
sprpriority = 5
ownpal = 1
supermove = 1

[State 700, エフェクト表示]
type = Explod
trigger1 = AnimElem = 17
anim = 3510
postype = P1
pos = 80, 0
sprpriority = 5
ownpal = 1
supermove = 1
vel = -5,0
scale = 1.5,1

[State 1000, ]
type = Velset
trigger1 = AnimElemtime(17) > 0 && AnimElemtime(24) <= 0
x = 24

[State 1000, ]
type = Velset
trigger1 = AnimElemtime(24) = 10
x = 0

[State 2110, 相手と重なった時の処理]
type = PlayerPush
trigger1 = AnimElemTime(18) > 0 && AnimElemtime(24) <= 5
value = 0

[State -3, 成功したときの残像]
type = AfterImage
trigger1 = AnimElem = 17
time = 12
trans = add1
timegap = 4
framegap = 1
length = 3
palbright = 50,50,50
palcontrast = 0,0,0

[State 2100,]
type = Envcolor
trigger1 = MoveHit =1
time = 2
value = 255,255,255
under = 0

[State 200, ヒット定義]
type = HitDef
trigger1 = time = 0
attr = S, HA
damage    = 200, 0
getpower  = 0
givepower = 10,10
animtype = Hard
hitflag = MAF
priority = 4, Hit
pausetime = 0, 0
sparkno = 202
sparkxy = -20, -70
hitsound = s13,1+(var(11)*10)
ground.type = High
ground.slidetime = 20
ground.hittime  = 21
ground.velocity = -8,-8
air.type = High
air.velocity = -8,-8
fall = 1
fall.recover = 0
envshake.time = 10
envshake.ampl = 5
envshake.freq = 100
palfx.time = 95
palfx.add = 30,-40,-140
palfx.sinadd = 60,60,50,10
palfx.color = 0
palfx.invertall = 1
p2stateno = 5640

[State 810, エフェクト表示]
type = Explod
trigger1 = MoveHit
anim = 10075
postype = P2
pos = 0,-70
sprpriority = 10
;scale = 0.85,0.85
ignorehitpause = 1
persistent = 0

;スロー処理
[State 1000, ヘルパーを出す]
type = Helper
trigger1 = Movehit = 1
name = "Slow"
stateno = 4900
ID = 4900
helpertype = normal
pos = 0,0
postype = p1
keyctrl = 0
ownpal = 1
ignorehitpause = 1
persistent = 0

;燃え小エフェクト
[State 1000, ヘルパーを出す]
type = null;Helper
trigger1 = movehit = 1
name = "hit"
stateno = 4910
ID = 4910
helpertype = normal
pos = 0,0
postype = p2
keyctrl = 0
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 1000]
type = PlaySnd
trigger1 = movehit = 1
value = s12,13
ignorehitpause = 1
persistent = 0

[State 2000, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;3ゲージ超必殺技
;---------------------------------------------------------------------------
; クリムゾンスターロード

[Statedef 4500]
type     = S
movetype = A
physics  = S
juggle   = 0
velset   = 0,0
anim     = 4500
ctrl     = 0
sprpriority = 5
poweradd = -2000
facep2 = 1

[State 1000, ]
type = Varset
trigger1 = time = 0
var(30) = 0

[State 3000, SC]
type = Varset
trigger1 = (prevstateno = [1000,2999])
trigger2 = (prevstateno = [11000,12999])
var(30) = 1

[State 3000, DC]
type = Varset
trigger1 = (prevstateno = [3000,3999])
var(30) = 2

[state 1000, VarSet];先行入力初期化
type = varset
trigger1 = time = 0
var(31) = 0

[state 1000, VarSet];先行入力初期化
type = varset
trigger1 = time = 0
var(32) = 0

[State 3000, Juggle]
type = Varset
trigger1 = var(30)
var(12) = 0

[State 3000, スキルゲージ消費]
type = varadd
triggerall = var(40) = 0
triggerall = fvar(35) >= 100
triggerall = time = 0
trigger1 = (prevstateno = [1000,2999]) || (prevstateno = [11000,12999])
trigger2 = prevstateno = [3000,3999]
fvar(35) = -101

[State 3000, パワーゲージ消費]
type = poweradd
trigger1 = var(40) = 0
trigger1 = time = 0
value = -1000

[State 3000, パワーMAX解除]
type = varset
trigger1 = time = 0
v = 40
value = 0

[State 170, 無敵]
type = NotHitBy
trigger1 = time = 0
value = SCA
time = 3

[State 2000, 超必殺技発動の時間停止]
type = SuperPause
trigger1 = (prevstateno = [1000,2999]) || (prevstateno = [11000,12999])
trigger1 = time = 0
anim = -1
movetime = 1
time = 1
p2defmul = 1.0

[State 700,];点滅
type = palfx
triggerall = time = 0
trigger1 = (prevstateno = [1000,2999]) || (prevstateno = [11000,12999])
time = 5
add = 230,230,230

[State 700,];点滅
type = palfx
triggerall = time = 0
trigger1 = prevstateno = [3000,3900]
time = 5
add = 250,120,210

[State 3000, 残像]
type = AfterImage
trigger1 = time = 0
time = 1

;SC------------------
[State 1]
type = null;Helper
triggerall = Numhelper(10550)=0
trigger1 = (prevstateno = [1000,2999]) || (prevstateno = [11000,12999])
trigger1 = time = 0
helpertype = normal
name = "SC"
stateno = 10550
ID = 10550
pos = 0,0
postype = left
keyctrl = 0
ownpal = 1
facing = 1
supermovetime = 99
pausemovetime = 99
size.xscale = 1
size.yscale = 1
size.shadowoffset = 0
ignorehitpause = 0

[State -2, ????]
type = Helper
triggerall = time = 0
trigger1 = prevstateno = [1000,2999]
ID = 100500
name = "SuperCancel"
postype = P1
pos = 0,0
sprpriority = -9
stateno = 100500
helpertype = normal
keyctrl = 0
persistent = 1
ignorehitpause = 1
ownpal = 1

;DC------------------
[State 1]
type = Helper
triggerall = Numhelper(10560)=0
trigger1 = prevstateno = [3000,3999]
trigger1 = time = 0
helpertype = normal
name = "DC"
stateno = 10560
ID = 10560
pos = 0,0
postype = left
keyctrl = 0
ownpal = 1
facing = 1
supermovetime = 99
pausemovetime = 99
size.xscale = 1
size.yscale = 1
ignorehitpause = 0

[State 2000,]
type = PlaySnd
trigger1 = prevstateno = [1000,3999]
trigger1 = time = 0
value = s9,1+(var(11)*10)

[State 800, ヒット定義（投げ用）]
type = HitDef
triggerall = prevstateno != [3000,3999]
trigger1 = Time = 0
trigger1 = p2stateno != [150,155]
trigger1 = p2bodydist X <= 30
attr = S, HT
hitflag = M
priority = 1, Miss
sparkno = 202
sparkxy = 0,-70
hitsound = s1,1+(var(11)*10)
p1sprpriority = 1
p2sprpriority = 0
p1facing = 1
p2facing = 1
p1stateno = 4505
p2stateno = 4520
guard.dist = 0
fall = 1

[State 800, ヒット定義（投げ用）]
type = HitDef
triggerall = prevstateno = [3000,3999]
trigger1 = Time = 0
trigger1 = p2stateno != [150,155]
trigger1 = p2bodydist X <= 60
attr = S, HT
hitflag = MAF
priority = 1, Miss
sparkno = 202
sparkxy = 0,-70
hitsound = s1,1+(var(11)*10)
p1sprpriority = 1
p2sprpriority = 0
p1facing = 1
p2facing = 1
p1stateno = 4505
p2stateno = 4520
guard.dist = 0
fall = 1

[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 3
value = s10+(var(7)*10),28
channel = 10

[State 1000, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;クリムゾンスターロード　背後に回る
[Statedef 4505]
type    = S
movetype= A
physics = N
juggle  = 0
poweradd = 0
ctrl = 0
velset = 0,0
anim = 4505
facep2 = 1
sprpriority = -5

;MAX2------------------
[State 1000, ヘルパーを出す]
type = null;Helper
trigger1 = time = 30
name = "MAX2"
stateno = 10601
ID = 10600
helpertype = normal
pos = 0,0
postype = p2
keyctrl = 0
ownpal = 1
ignorehitpause = 1
supermovetime = 9999
pausemovetime = 9999

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 2000]
type = AssertSpecial
trigger1 = 1
flag = NoFG
flag2 = NOBG
ignorehitpause = 1

[State -2, ??? ??]
type = Explod
trigger1 = 1
ID = 100006
postype = P1
pos = 0,0
sprpriority = -9
anim = F100000
persistent = 1
ignorehitpause = 1
removetime = 1

[State 2000,]
type = PlaySnd
triggerall = var(7) = 0
trigger1 = time = 0
value = s10+(var(7)*10),32
channel = 10

[State 2000,]
type = PlaySnd
triggerall = var(7) = 1
trigger1 = time = 0
value = s10+(var(7)*10),18
channel = 10

[State 0, PlaySnd]
type = PlaySnd
triggerall = var(7) = 0
trigger1 = animelem = 6
value = s10,33

[State 0, PlaySnd]
type = PlaySnd
triggerall = var(7) = 1
trigger1 = animelem = 6
value = s14,2

[State 0, TargetBind]
type = TargetBind
trigger1 = time = 1
time = 1
pos = 20,0
ignorehitpause = 1

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 3
x = 1

[State 0, VelMul]
type = VelMul
trigger1 = animelemtime(3) > 0
x = 1

[State 0, VelSet]
type = VelSet
trigger1 = animtime = 0
x = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 4510
ctrl = 0

;---------------------------------------------------------------------------
;クリムゾンスターロード　攻撃
[Statedef 4510]
type    = S
movetype= A
physics = N
juggle  = 0
poweradd = 0
ctrl = 0
velset = 0,0
anim = 4510
facep2 = 1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 2000]
type = AssertSpecial
trigger1 = time = [0,148]
flag = NoFG
flag2 = NOBG
ignorehitpause = 1

[State -2, ??? ??]
type = Explod
trigger1 = time = [0,148]
ID = 100006
postype = P1
pos = 0,0
sprpriority = -9
anim = F100000
persistent = 1
ignorehitpause = 1
removetime = 1

[State 2000]
type = null;Explod
trigger1 = animelem = 2
anim = 10520+(var(11)*10000)
pos = 24,-110
sprpriority = -3
ownpal = 1
bindtime = 1
supermove = 1

[State 2000]
type = null;Explod
trigger1 = animelem = 2
anim = 10521+(var(11)*10000)
pos = 24,-110
sprpriority = 20
ownpal = 1
bindtime = 1
supermove = 1

[State 2000]
type = Explod
trigger1 = animelem = 2
anim = F279
pos = 24,-110
scale = 2,2
sprpriority = 20
ownpal = 1
bindtime = 1
supermove = 1

[State 2000]
type = Explod
trigger1 = animelem = 2
anim = F278
pos = 24,-110
scale = 1.5,1.5
sprpriority = -20
ownpal = 1
bindtime = 1
supermove = 1

;MAX2 Cutin------------
[State 1]
type = null;Helper
triggerall = Numhelper(10610)=0
trigger1 = AnimElem = 2
helpertype = normal
name = "Cutin"
stateno = 10610
ID = 10610
pos = 0,0
postype = left
keyctrl = 0
ownpal = 1
facing = 1
supermovetime = 99
pausemovetime = 99
size.xscale = 1
size.yscale = 1
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F300,2;s9,2

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = nojugglecheck

[State 0, PlaySnd]
type = PlaySnd
triggerall = var(7) = 0
trigger1 = animelem = 6
value = s10,34

[State 0, EnvColor]
type = EnvColor
trigger1 = animelemtime(20)=1
value = 255, 255, 255
time = 3
under = 1
ignorehitpause = 1
persistent = 0

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 200, 1]
type = HitDef
trigger1 = animelem = 8
trigger2 = animelem = 9
trigger3 = animelem = 10
trigger4 = animelem = 11
trigger5 = animelem = 12
trigger6 = animelem = 13
trigger7 = animelem = 14
trigger8 = animelem = 15
trigger9 = animelem = 16
attr = S, HP
animtype = Up
hitflag = MAF
damage    = 50, 0
getpower  = 0
givepower = 10,10
pausetime = 0,0
sparkno = 202
sparkxy = 20-random%40,-20-random%60
hitsound = s1,1+(var(11)*10)
ground.type = Low
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = 0,-4.5
air.velocity = 0,-4.5
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
fall = 1
fall.recover = 0
kill = 0
palfx.time = 60
palfx.add = 30,-40,-140
palfx.sinadd = 60,60,50,10
palfx.color = 0
palfx.invertall = 1
p2stateno = 35655

[State 1000, ヘルパーを出す]
type = Helper
trigger1 = AnimElem = 17
name = "BOM"
stateno = 4511
ID = 4511
helpertype = normal
postype = P2
pos = 0,-70
facing = 1
keyctrl = 0
ownpal = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; クリムゾンスターロード　トドメヘルパー

[Statedef 4511]
type     = A
movetype = A
physics  = N
juggle   = 0
ctrl     = 0
anim     = 4511
sprpriority = 15

[State 1001, 特殊効果]
type = AssertSpecial
trigger1 = 1
flag = NoShadow ;影を消す

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = time = 0
value = s13,1

[State 810, エフェクト表示]
type = Explod
trigger1 = time = 0
anim = 10075
postype = P1
pos = 0,0
sprpriority = 10
ownpal = 1

[State 200, ヒット定義]
type = HitDef
trigger1 = time = 0
attr = A, HP
damage    = 75, 0
getpower  = 0
givepower = 10,10
animtype = Hard
hitflag = MAF
priority = 4, Hit
pausetime = 0,10+root,var(0)
sparkno = -1
hitsound = -1
ground.type = High
ground.slidetime = 20
ground.hittime  = 21
ground.velocity = -5
air.type = High
air.velocity = -5,-5
air.fall = 1
fall.recover = 0
palfx.time = 95
palfx.add = 30,-40,-140
palfx.sinadd = 60,60,50,10
palfx.color = 0
palfx.invertall = 1
envshake.time = 10
envshake.ampl = 7
envshake.freq = 100
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
p2stateno = 35640

;ガードクラッシュ値削り
[state a]
type = parentvaradd
trigger1 = moveguarded = 1
fvar(10) = 16

;ガードクラッシュ値回復不能時間
[State 1000, 0]
type = ParentVarSet
triggerall = fvar(11) != 180
triggerall = roundstate = 2
trigger1 = moveguarded = 1
fvar(11) = 180

;スロー処理
[State 1000, ヘルパーを出す]
type = null;Helper
trigger1 = Movehit = 1
name = "Slow"
stateno = 4900
ID = 4900
helpertype = normal
pos = 0,0
postype = p1
keyctrl = 0
ownpal = 1
ignorehitpause = 1
persistent = 0

;燃え小エフェクト
[State 1000, ヘルパーを出す]
type = null;Helper
trigger1 = movehit = 1
name = "hit"
stateno = 4910
ID = 4910
helpertype = normal
pos = 0,0
postype = p2
keyctrl = 0
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 1001, このヘルパーを消す]
type = DestroySelf
trigger1 = AnimTime = 0

;---------------------------------------------------------------------------
;相手動作(上段やられ)
[Statedef 4520]
type    = S
movetype= H
physics = N
velset = 0,0

[State 820, posback]
type = posadd
trigger1 = BackEdgeDist < 40
x = 40

[State 52, 1]
type = VelSet
trigger1 = time = 0
x = 0
y = 0

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = Helper(100000),var(0)

[State 1830]
type = ChangeAnim2
Trigger1 = Time = 0
value = 4520

[State 1830]
type = SelfState
trigger1 = Animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; チェーンドライブ -code blood-

[Statedef 4600]
type     = S
movetype = A
physics  = S
juggle   = 0
velset   = 0,0
anim     = 4600
ctrl     = 0
sprpriority = 3
poweradd = -2000
facep2 = 1

[State 1000, ]
type = Varset
trigger1 = time = 0
var(30) = 0

[State 3000, SC]
type = Varset
trigger1 = (prevstateno = [1000,2999])
trigger2 = (prevstateno = [11000,12999])
var(30) = 1

[State 3000, DC]
type = Varset
trigger1 = (prevstateno = [3000,3999])
var(30) = 2

[state 1000, VarSet];先行入力初期化
type = varset
trigger1 = time = 0
var(31) = 0

[state 1000, VarSet];先行入力初期化
type = varset
trigger1 = time = 0
var(32) = 0

[State 3000, Juggle]
type = Varset
trigger1 = var(30)
var(12) = 0

[State 3000, スキルゲージ消費]
type = varadd
triggerall = var(40) = 0
triggerall = fvar(35) >= 100
triggerall = time = 0
trigger1 = (prevstateno = [1000,2999]) || (prevstateno = [11000,12999])
trigger2 = prevstateno = [3000,3999]
fvar(35) = -101

[State 3000, パワーゲージ消費]
type = poweradd
trigger1 = var(40) = 0
trigger1 = time = 0
value = -1000

[State 3000, パワーMAX解除]
type = varset
trigger1 = time = 0
v = 40
value = 0

[State 170, 無敵]
type = NotHitBy
trigger1 = AnimElemtime(1) >= 0 && AnimElemtime(23) < 0
value = SCA

[State 700,];点滅
type = palfx
triggerall = time = 0
trigger1 = prevstateno = [1000,2999]
time = 5
add = 230,230,230

[State 700,];点滅
type = palfx
triggerall = time = 0
trigger1 = prevstateno = [3000,4999]
time = 5
add = 250,120,210

[State 3000, 残像]
type = AfterImage
trigger1 = time = 0
time = 1

[State 2000, 超必殺技発動の時間停止]
type = SuperPause
trigger1 = time = 0
anim = -1
movetime = 40
time = 40
p2defmul = 1.0

[State 2000]
type = AssertSpecial
trigger1 = 1
flag = NoFG
flag2 = NOBG
ignorehitpause = 1

[State 2000]
type = Explod
trigger1 = AnimElem = 1
anim = 10520+(var(11)*10000)
pos = 20,-60
sprpriority = -3
ownpal = 1
bindtime = 1
supermove = 1

[State 2000]
type = Explod
trigger1 = AnimElem = 1
anim = 10521+(var(11)*10000)
pos = 20,-60
sprpriority = 20
ownpal = 1
bindtime = 1
supermove = 1

;SC------------------
[State 1]
type = Helper
triggerall = Numhelper(10550)=0
trigger1 = (prevstateno = [1000,2999]) || (prevstateno = [11000,12999])
trigger1 = time = 0
helpertype = normal
name = "SC"
stateno = 10550
ID = 10550
pos = 0,0
postype = left
keyctrl = 0
ownpal = 1
facing = 1
supermovetime = 99
pausemovetime = 99
size.xscale = 1
size.yscale = 1
size.shadowoffset = 0
ignorehitpause = 0

;DC------------------
[State 1]
type = Helper
triggerall = Numhelper(10560)=0
trigger1 = prevstateno = [3000,3999]
trigger1 = time = 0
helpertype = normal
name = "DC"
stateno = 10560
ID = 10560
pos = 0,0
postype = left
keyctrl = 0
ownpal = 1
facing = 1
supermovetime = 99
pausemovetime = 99
size.xscale = 1
size.yscale = 1
ignorehitpause = 0

;MAX2------------------
[State 1000, ヘルパーを出す]
type = Helper
trigger1 = time = 40
name = "MAX2"
stateno = 10600
ID = 10600
helpertype = normal
pos = 0,0
postype = p2
keyctrl = 0
ownpal = 1
ignorehitpause = 1
supermovetime = 9999
pausemovetime = 9999

;MAX2 Cutin------------
[State 1]
type = null;Helper
triggerall = Numhelper(10610)=0
trigger1 = AnimElem = 1
helpertype = normal
name = "Cutin"
stateno = 10610
ID = 10610
pos = 0,0
postype = left
keyctrl = 0
ownpal = 1
facing = 1
supermovetime = 99
pausemovetime = 99
size.xscale = 1
size.yscale = 1
ignorehitpause = 1

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 1
value = s9,2

[State 2000,]
type = PlaySnd
trigger1 = AnimElem = 5
value = s20,18

[State 2000,]
type = PlaySnd
trigger1 = AnimElem = 8
value = s14,1

[State 3000, 軸位置移動]
type = Veladd
trigger1 = AnimElemtime(8) >= 0 && AnimElemtime(24) <= 0
x = 1.18

[State 3000, 軸位置移動]
type = VelSet
trigger1 = AnimElem = 26
x = 0

[State 2110, 相手と重なった時の処理]
type = PlayerPush
trigger1 = AnimElemTime(8) > 0 && AnimElemtime(24) <= 0
value = 0

[State -3, 残像]
type = AfterImage
trigger1 = AnimElem = 1
time = 90
trans = add1
timegap = 4
framegap = 1
length = 3
palbright = 100,0,0
palcontrast = 0,0,0
paladd = 100,-50,-50

[State 1950]
type = HitDef
trigger1 = Time = 0
attr = S,HA
damage    = 0
getpower  = 0
givepower = 0
animtype = Hard
hitflag = MAF
guardflag = M
priority = 5
pausetime = 0,12
guard.pausetime = 0, 12
sparkno = 202
sparkxy = -30,-40
hitsound = s1,4+(var(11)*10)
guardsound = s2,1+(var(11)*10)
guard.sparkno = s4120
guard.velocity = -9
ground.type = High
ground.slidetime = 10
ground.hittime = 25
ground.velocity = 0,0
air.velocity = 0,0
p2facing = 1
p1stateno = 4610
p2stateno = 5655

[State 3000, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; チェーンドライブ -code blood-　発動

[Statedef 4610]
type     = S
movetype = A
physics  = S
juggle   = 0
velset   = 0,0
anim     = 4605
ctrl     = 0
sprpriority = 3

[State 170, 無敵]
type = NotHitBy
trigger1 = 1
value = SCA

[State 2000,]
type = PlaySnd
trigger1 = AnimElem = 1
value = s4,0+(var(11)*10)

[State 810, 1]
type = TargetBind
trigger1 = time = 0
pos = -20,0

[State 1510]
type = posadd
trigger1 = time = 0
x = Ceil(P2BodyDist X)+60
y = 0

[State 3000, 軸位置移動]
type = Velset
trigger1 = AnimElemtime(2) >= 0 && AnimElemtime(3) < 0
x = 7

[State 3000, 軸位置移動]
type = Veladd
trigger1 = AnimElemtime(2) >= 0 && AnimElemtime(3) < 0
x = -3

[State 3000, 軸位置移動]
type = VelSet
trigger1 = AnimElem = 3
x = 0

[State 3110, 1]
type = Turn
trigger1 = AnimElem = 6

[State 3000, 軸位置移動]
type = Velset
trigger1 = AnimElemtime(7) >= 0
x = 6

[State -3, 残像]
type = AfterImage
trigger1 = AnimElem = 1
time = 82
trans = add1
timegap = 4
framegap = 1
length = 3
palbright = 100,0,0
palcontrast = 0,0,0
paladd = 100,-50,-50

[State 2000]
type = AssertSpecial
trigger1 = 1
flag = NoFG
flag2 = NOBG
ignorehitpause = 1

[State 1950]
type = HitDef
trigger1 = Time = 0
attr = S,HA
damage    = 0
getpower  = 0
givepower = 0
animtype = Hard
hitflag = MAF
guardflag = MA
priority = 5
pausetime = 3,10
sparkno = 202
sparkxy = -30,-50
hitsound = s1,1+(var(11)*10)
guardsound = s2,1+(var(11)*10)
guard.sparkno = s4120
guard.velocity = -9
ground.type = High
ground.slidetime = 10
ground.hittime = 25
ground.velocity = 0,0
air.velocity = 0,0
p2facing = 1
p1stateno = 4615
p2stateno = 5655

[State 3000, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; チェーンドライブ -code blood-　乱舞

[Statedef 4615]
type     = S
movetype = A
physics  = S
juggle   = 0
velset   = 0,0
anim     = 4610
ctrl     = 0
sprpriority = 5

[State 170, 無敵]
type = NotHitBy
trigger1 = 1
value = SCA

[State 810, 物理的なキャラの幅]
type = Width
trigger1 = time = 0
edge = 120,0

[State 2000,]
type = PlaySnd
trigger1 = AnimElem = 72
value = s14,1

[State 2000,]
type = PlaySnd
trigger1 = AnimElem = 12
trigger2 = AnimElem = 17
trigger3 = AnimElem = 43
trigger4 = AnimElem = 52
trigger5 = AnimElem = 60
value = s0,1

[State 2000,]
type = PlaySnd
trigger1 = AnimElem = 4
trigger2 = AnimElem = 27
trigger3 = AnimElem = 36
value = s0,3

[State 2000,]
type = PlaySnd
trigger1 = AnimElem = 60
value = s20,7

[State 2000,]
type = PlaySnd
trigger1 = AnimElem = 71
value = s20,9

[State 52, 1]
type = VelSet
trigger1 = AnimElemtime(1) >= 0 && AnimElemtime(57) < 0
x = .8

[State 52, 1]
type = VelSet
trigger1 = AnimElemtime(72) >= 0
x = 10

[State 810, 1]
type = TargetBind
trigger1 = AnimElemtime(1) >= 0 && AnimElemtime(62) < 0
pos = 45,0

[State 2110, 相手と重なった時の処理]
type = PlayerPush
trigger1 = AnimElemTime(72) >= 0
value = 0

[State -3, 成功したときの残像]
type = AfterImage
trigger1 = AnimElem = 1
time = 130
trans = add1
timegap = 4
framegap = 1
length = 4
palbright = 100,0,0
palcontrast = 0,0,0
paladd = 100,-50,-50

[State 2000]
type = AssertSpecial
trigger1 = 1
flag = NoFG
flag2 = NOBG
ignorehitpause = 1

[State 200, ヒット定義]
type = HitDef
trigger1 = AnimElem = 4
attr = S, HA
damage    = 10, 0
getpower  = 0
givepower = 10,10
animtype = Hard
hitflag = MAF
priority = 3, Hit
pausetime = 0,10+var(0)
sparkno = 202
sparkxy = -20,-80
hitsound = s1,3+(var(11)*10)
ground.type = High
ground.slidetime = 10
ground.hittime  = 20
ground.velocity = 0
p2stateno = 5650
kill = 0
envshake.time = 4
envshake.ampl = 4
envshake.freq = 100

[State 200, ヒット定義]
type = HitDef
trigger1 = AnimElem = 12
attr = S, HA
damage    = 10, 0
getpower  = 0
givepower = 10,10
animtype = Hard
hitflag = MAF
priority = 3, Hit
pausetime = 0,10+var(0)
sparkno = 202
sparkxy = -20,-70
hitsound = s1,1+(var(11)*10)
ground.type = High
ground.slidetime = 10
ground.hittime  = 20
ground.velocity = 0
p2stateno = 5650
kill = 0
envshake.time = 4
envshake.ampl = 4
envshake.freq = 100

[State 200, ヒット定義]
type = HitDef
trigger1 = AnimElem = 17
attr = S, HA
damage    = 10, 0
getpower  = 0
givepower = 10,10
animtype = Hard
hitflag = MAF
priority = 3, Hit
pausetime = 0,10+var(0)
sparkno = 202
sparkxy = -25,-70
hitsound = s1,1+(var(11)*10)
ground.type = High
ground.slidetime = 10
ground.hittime  = 20
ground.velocity = 0
p2stateno = 5650
kill = 0
envshake.time = 4
envshake.ampl = 4
envshake.freq = 100

[State 200, ヒット定義]
type = HitDef
trigger1 = AnimElem = 27
attr = S, HA
damage    = 10, 0
getpower  = 0
givepower = 10,10
animtype = Hard
hitflag = MAF
priority = 3, Hit
pausetime = 0,12
sparkno = 202
sparkxy = -20,-65
hitsound = s1,3+(var(11)*10)
ground.type = Low
ground.slidetime = 10
ground.hittime  = 20
ground.velocity = 0
p2stateno = 5655
kill = 0
envshake.time = 4
envshake.ampl = 4
envshake.freq = 100

[State 200, ヒット定義]
type = HitDef
trigger1 = AnimElem = 36
attr = S, HA
damage    = 10, 0
getpower  = 0
givepower = 10,10
animtype = Hard
hitflag = MAF
priority = 3, Hit
pausetime = 0,10+var(0)
sparkno = 202
sparkxy = -20,-15
hitsound = s1,3+(var(11)*10)
ground.type = Low
ground.slidetime = 10
ground.hittime  = 20
ground.velocity = 0
p2stateno = 5655
kill = 0
envshake.time = 4
envshake.ampl = 4
envshake.freq = 100

[State 200, ヒット定義]
type = HitDef
trigger1 = AnimElem = 44
attr = S, HA
damage    = 10, 0
getpower  = 0
givepower = 10,10
animtype = Hard
hitflag = MAF
priority = 3, Hit
pausetime = 0,10+var(0)
sparkno = 202
sparkxy = -20,-70
hitsound = s1,1+(var(11)*10)
ground.type = High
ground.slidetime = 10
ground.hittime  = 20
ground.velocity = 0
p2stateno = 5650
kill = 0
envshake.time = 4
envshake.ampl = 4
envshake.freq = 100

[State 200, ヒット定義]
type = HitDef
trigger1 = AnimElem = 53
attr = S, HA
damage    = 10, 0
getpower  = 0
givepower = 10,10
animtype = Hard
hitflag = MAF
priority = 3, Hit
pausetime = 0,10+var(0)
sparkno = 202
sparkxy = -20,-60
hitsound = s1,1+(var(11)*10)
ground.type = High
ground.slidetime = 10
ground.hittime  = 20
ground.velocity = 0
p2stateno = 5650
kill = 0
envshake.time = 4
envshake.ampl = 4
envshake.freq = 100

[State 200, ヒット定義]
type = HitDef
trigger1 = AnimElem = 62
attr = S, HA
damage    = 10, 0
getpower  = 0
givepower = 10,10
animtype = Hard
hitflag = MAF
priority = 3, Hit
pausetime = 20,20
sparkno = 202
sparkxy = -20,-60
hitsound = s1,4+(var(11)*10)
ground.type = High
ground.slidetime = 10
ground.hittime  = 20
ground.velocity = -5
air.velocity = -5,-8
fall = 1
fall.recover = 0
envshake.time = 20
envshake.ampl = 7
envshake.freq = 100
p2stateno = 4650
kill = 0

[State 200, ヒット定義]
type = HitDef
trigger1 = AnimElem = 72
trigger2 = AnimElem = 74
trigger3 = AnimElem = 76
trigger4 = AnimElem = 78
trigger5 = AnimElem = 80
trigger6 = AnimElem = 82
attr = S, HA
damage    = 5, 0
getpower  = 0
givepower = 10,10
animtype = Hard
hitflag = MAF
priority = 3, Hit
pausetime = 0,10+var(0)
sparkno = s10007+(var(11)*10000)
sparkxy = -20,-60
hitsound = s1,8+(var(11)*10)
ground.type = High
ground.slidetime = 10
ground.hittime  = 20
ground.velocity = 0
p2stateno = 5650
kill = 0
envshake.time = 4
envshake.ampl = 4
envshake.freq = 100

[State 52, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 4620

;---------------------------------------------------------------------------
; チェーンドライブ -code blood-　乱舞２

[Statedef 4620]
type     = S
movetype = A
physics  = S
juggle   = 0
velset   = 0,0
anim     = 4615
ctrl     = 0
sprpriority = 5

[State 170, 無敵]
type = NotHitBy
trigger1 = 1
value = SCA

[State 3120]
type = Posset
trigger1 = time = 1
x = ifelse(facing = -1,320,-320)

[State 2000,]
type = PlaySnd
trigger1 = AnimElem = 2
trigger2 = AnimElem = 8
trigger3 = AnimElem = 44
trigger4 = AnimElem = 49
trigger5 = AnimElem = 79
trigger6 = AnimElem = 98
trigger7 = AnimElem = 103
trigger8 = AnimElem = 130
trigger9 = AnimElem = 138
value = s0,1

[State 2000,]
type = PlaySnd
trigger1 = AnimElem = 18
trigger2 = AnimElem = 24
trigger3 = AnimElem = 32
trigger4 = AnimElem = 57
trigger5 = AnimElem = 69
trigger6 = AnimElem = 90
trigger7 = AnimElem = 113
trigger8 = AnimElem = 121
value = s0,3

[State -2,]
type = Explod
trigger1 = AnimElemtime(80) >= 0
trigger1 = Movehit
trigger1 = Random < 150
anim = 10073
pos = -20,-40
postype = p2
sprpriority = 6
bindtime = 1
random = 60,60
ownpal = 1

[State 52, 1]
type = VelSet
trigger1 = AnimElemtime(1) >= 0
x = .8

[State 810, 1]
type = TargetBind
trigger1 = AnimElemtime(1) >= 1
pos = 50,0

[State 1510]
type = posadd
trigger1 = time = 0
x = Ceil(P2BodyDist X)+60
y = 0

[State 3110, 1]
type = Turn
trigger1 = time = 0

[State -3, 残像]
type = AfterImage
trigger1 = time = 1
time = 200
trans = add1
timegap = 4
framegap = 1
length = 4
palbright = 100,0,0
palcontrast = 0,0,0
paladd = 100,-50,-50

[State 2000]
type = AssertSpecial
trigger1 = 1
flag = NoFG
flag2 = NOBG
ignorehitpause = 1

[State 200, ヒット定義]
type = HitDef
trigger1 = AnimElem = 2
attr = S, HA
damage    = 10, 0
getpower  = 0
givepower = 10,10
animtype = Hard
hitflag = MAF
priority = 3, Hit
pausetime = 2,10
sparkno = s10007+(var(11)*10000)
sparkxy = -20,-60
hitsound = s1,8+(var(11)*10)
ground.type = Low
ground.slidetime = 10
ground.hittime  = 20
ground.velocity = 0
p2stateno = 5655
p2facing = 1
kill = 0

[State 200, ヒット定義]
type = HitDef
trigger1 = AnimElem = 8
attr = S, HA
damage    = 10, 0
getpower  = 0
givepower = 10,10
animtype = Hard
hitflag = MAF
priority = 3, Hit
pausetime = 2,10
sparkno = s10007+(var(11)*10000)
sparkxy = -25,-55
hitsound = s1,8+(var(11)*10)
ground.type = High
ground.slidetime = 10
ground.hittime  = 20
ground.velocity = 0
p2stateno = 5650
p2facing = 1
kill = 0

[State 200, ヒット定義]
type = HitDef
trigger1 = AnimElem = 18
attr = S, HA
damage    = 10, 0
getpower  = 0
givepower = 10,10
animtype = Hard
hitflag = MAF
priority = 3, Hit
pausetime = 2,10
sparkno = s10007+(var(11)*10000)
sparkxy = -15,-20
hitsound = s1,8+(var(11)*10)
ground.type = High
ground.slidetime = 10
ground.hittime  = 20
ground.velocity = 0
p2stateno = 5655
kill = 0

[State 200, ヒット定義]
type = HitDef
trigger1 = AnimElem = 24
attr = S, HA
damage    = 10, 0
getpower  = 0
givepower = 10,10
animtype = Hard
hitflag = MAF
priority = 3, Hit
pausetime = 2,12
sparkno = s10007+(var(11)*10000)
sparkxy = -20,-65
hitsound = s1,8+(var(11)*10)
ground.type = Low
ground.slidetime = 10
ground.hittime  = 20
ground.velocity = 0
p2stateno = 5655
kill = 0
envshake.time = 3
envshake.ampl = 3
envshake.freq = 100

[State 200, ヒット定義]
type = HitDef
trigger1 = AnimElem = 33
attr = S, HA
damage    = 10, 0
getpower  = 0
givepower = 10,10
animtype = Hard
hitflag = MAF
priority = 3, Hit
pausetime = 0,12
sparkno = s10007+(var(11)*10000)
sparkxy = -25,-90
hitsound = s1,8+(var(11)*10)
ground.type = High
ground.slidetime = 10
ground.hittime  = 20
ground.velocity = 0
p2stateno = 5650
kill = 0
envshake.time = 3
envshake.ampl = 3
envshake.freq = 100

[State 200, ヒット定義]
type = HitDef
trigger1 = AnimElem = 44
attr = S, HA
damage    = 10, 0
getpower  = 0
givepower = 10,10
animtype = Hard
hitflag = MAF
priority = 3, Hit
pausetime = 0,10+var(0)
sparkno = s10007+(var(11)*10000)
sparkxy = -15,-80
hitsound = s1,8+(var(11)*10)
ground.type = High
ground.slidetime = 10
ground.hittime  = 20
ground.velocity = 0
p2stateno = 5650
kill = 0
envshake.time = 4
envshake.ampl = 4
envshake.freq = 100

[State 200, ヒット定義]
type = HitDef
trigger1 = AnimElem = 49
attr = S, HA
damage    = 10, 0
getpower  = 0
givepower = 10,10
animtype = Hard
hitflag = MAF
priority = 3, Hit
pausetime = 0,10+var(0)
sparkno = s10007+(var(11)*10000)
sparkxy = -20,-70
hitsound = s1,8+(var(11)*10)
ground.type = High
ground.slidetime = 10
ground.hittime  = 20
ground.velocity = 0
p2stateno = 5650
kill = 0
envshake.time = 4
envshake.ampl = 4
envshake.freq = 100

[State 200, ヒット定義]
type = HitDef
trigger1 = AnimElem = 57
attr = S, HA
damage    = 10, 0
getpower  = 0
givepower = 10,10
animtype = Hard
hitflag = MAF
priority = 3, Hit
pausetime = 0,10+var(0)
sparkno = s10007+(var(11)*10000)
sparkxy = -20,-75
hitsound = s1,8+(var(11)*10)
ground.type = High
ground.slidetime = 10
ground.hittime  = 20
ground.velocity = 0
p2stateno = 5650
kill = 0
envshake.time = 5
envshake.ampl = 5
envshake.freq = 100

[State 200, ヒット定義]
type = HitDef
trigger1 = AnimElem = 69
attr = S, HA
damage    = 10, 0
getpower  = 0
givepower = 10,10
animtype = Hard
hitflag = MAF
priority = 3, Hit
pausetime = 0,10+var(0)
sparkno = s10007+(var(11)*10000)
sparkxy = -25,-65
hitsound = s1,8+(var(11)*10)
ground.type = High
ground.slidetime = 10
ground.hittime  = 20
ground.velocity = 0
p2stateno = 5655
kill = 0
envshake.time = 5
envshake.ampl = 5
envshake.freq = 100

[State 200, ヒット定義]
type = HitDef
trigger1 = AnimElem = 80
attr = S, HA
damage    = 10, 0
getpower  = 0
givepower = 10,10
animtype = Hard
hitflag = MAF
priority = 3, Hit
pausetime = 0,10+var(0)
sparkno = s10007+(var(11)*10000)
sparkxy = -20,-80
hitsound = s1,8+(var(11)*10)
ground.type = High
ground.slidetime = 10
ground.hittime  = 20
p2stateno = 5650
envshake.time = 10
envshake.ampl = 7
envshake.freq = 100
kill = 0
palfx.time = 20
palfx.add = 30,-40,-140
palfx.sinadd = 60,60,50,10
palfx.color = 0
palfx.invertall = 1

[State 200, ヒット定義]
type = HitDef
trigger1 = AnimElem = 90
attr = S, HA
damage    = 10, 0
getpower  = 0
givepower = 10,10
animtype = Hard
hitflag = MAF
priority = 3, Hit
pausetime = 0,10+var(0)
sparkno = s10007+(var(11)*10000)
sparkxy = -20,-80
hitsound = s1,8+(var(11)*10)
ground.type = High
ground.slidetime = 10
ground.hittime  = 20
ground.velocity = 0
p2stateno = 5650
kill = 0
envshake.time = 4
envshake.ampl = 4
envshake.freq = 100
palfx.time = 20
palfx.add = 30,-40,-140
palfx.sinadd = 60,60,50,10
palfx.color = 0
palfx.invertall = 1

[State 200, ヒット定義]
type = HitDef
trigger1 = AnimElem = 98
attr = S, HA
damage    = 10, 0
getpower  = 0
givepower = 10,10
animtype = Hard
hitflag = MAF
priority = 3, Hit
pausetime = 0,10+var(0)
sparkno = s10007+(var(11)*10000)
sparkxy = -20,-70
hitsound = s1,8+(var(11)*10)
ground.type = High
ground.slidetime = 10
ground.hittime  = 20
ground.velocity = 0
p2stateno = 5650
kill = 0
envshake.time = 4
envshake.ampl = 4
envshake.freq = 100
palfx.time = 20
palfx.add = 30,-40,-140
palfx.sinadd = 60,60,50,10
palfx.color = 0
palfx.invertall = 1

[State 200, ヒット定義]
type = HitDef
trigger1 = AnimElem = 103
attr = S, HA
damage    = 10, 0
getpower  = 0
givepower = 10,10
animtype = Hard
hitflag = MAF
priority = 3, Hit
pausetime = 0,10+var(0)
sparkno = s10007+(var(11)*10000)
sparkxy = -25,-70
hitsound = s1,8+(var(11)*10)
ground.type = High
ground.slidetime = 10
ground.hittime  = 20
ground.velocity = 0
p2stateno = 5650
kill = 0
envshake.time = 4
envshake.ampl = 4
envshake.freq = 100
palfx.time = 20
palfx.add = 30,-40,-140
palfx.sinadd = 60,60,50,10
palfx.color = 0
palfx.invertall = 1

[State 200, ヒット定義]
type = HitDef
trigger1 = AnimElem = 113
attr = S, HA
damage    = 10, 0
getpower  = 0
givepower = 10,10
animtype = Hard
hitflag = MAF
priority = 3, Hit
pausetime = 0,12
sparkno = s10007+(var(11)*10000)
sparkxy = -20,-65
hitsound = s1,8+(var(11)*10)
ground.type = Low
ground.slidetime = 10
ground.hittime  = 20
ground.velocity = 0
p2stateno = 5655
kill = 0
envshake.time = 4
envshake.ampl = 4
envshake.freq = 100
palfx.time = 20
palfx.add = 30,-40,-140
palfx.sinadd = 60,60,50,10
palfx.color = 0
palfx.invertall = 1

[State 200, ヒット定義]
type = HitDef
trigger1 = AnimElem = 122
attr = S, HA
damage    = 10, 0
getpower  = 0
givepower = 10,10
animtype = Hard
hitflag = MAF
priority = 3, Hit
pausetime = 0,10+var(0)
sparkno = s10007+(var(11)*10000)
sparkxy = -20,-15
hitsound = s1,8+(var(11)*10)
ground.type = Low
ground.slidetime = 10
ground.hittime  = 20
ground.velocity = 0
p2stateno = 5655
kill = 0
envshake.time = 4
envshake.ampl = 4
envshake.freq = 100
palfx.time = 20
palfx.add = 30,-40,-140
palfx.sinadd = 60,60,50,10
palfx.color = 0
palfx.invertall = 1

[State 200, ヒット定義]
type = HitDef
trigger1 = AnimElem = 130
attr = S, HA
damage    = 10, 0
getpower  = 0
givepower = 10,10
animtype = Hard
hitflag = MAF
priority = 3, Hit
pausetime = 0,10+var(0)
sparkno = s10007+(var(11)*10000)
sparkxy = -20,-70
hitsound = s1,8+(var(11)*10)
ground.type = High
ground.slidetime = 10
ground.hittime  = 20
ground.velocity = 0
p2stateno = 5650
kill = 0
envshake.time = 4
envshake.ampl = 4
envshake.freq = 100
palfx.time = 20
palfx.add = 30,-40,-140
palfx.sinadd = 60,60,50,10
palfx.color = 0
palfx.invertall = 1

[State 200, ヒット定義]
type = HitDef
trigger1 = AnimElem = 139
attr = S, HA
damage    = 10, 0
getpower  = 0
givepower = 10,10
animtype = Hard
hitflag = MAF
priority = 3, Hit
pausetime = 0,10+var(0)
sparkno = s10007+(var(11)*10000)
sparkxy = -20,-60
hitsound = s1,8+(var(11)*10)
ground.type = High
ground.slidetime = 10
ground.hittime  = 20
ground.velocity = 0
p2stateno = 5650
kill = 0
envshake.time = 4
envshake.ampl = 4
envshake.freq = 100
palfx.time = 20
palfx.add = 30,-40,-140
palfx.sinadd = 60,60,50,10
palfx.color = 0
palfx.invertall = 1

;燃え小エフェクト
[State 1000, ヘルパーを出す]
type = Helper
triggerall = AnimElemtime(80) >= 0
trigger1 = movehit = 1
name = "hit"
stateno = 4910
ID = 4910
helpertype = normal
pos = 0,0
postype = p2
keyctrl = 0
ownpal = 1

[State 2100,]
type = Envcolor
trigger1 = random <= 500
trigger1 = Movehit = 1
time = 1
value = 255,0,0
under = 1

[State 52, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 4625

;---------------------------------------------------------------------------
; チェーンドライブ -code blood-　トドメ

[Statedef 4625]
type     = S
movetype = A
physics  = S
juggle   = 0
velset   = 0,0
anim     = 4620
ctrl     = 0
sprpriority = 2

[State 170, 無敵]
type = NotHitBy
trigger1 = 1
value = SCA

[State 2000,]
type = PlaySnd
trigger1 = AnimElem = 1
value = s20,8

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 2
value = s12,7

[State 2000,]
type = PlaySnd
trigger1 = AnimElem = 13
value = s14,2

[State 1000, ]
type = Velset
trigger1 = AnimElemtime(1) > 0 && AnimElemtime(8) <= 0
x = 24

[State 1000, ]
type = Velset
trigger1 = AnimElemtime(8) = 10
x = 0

[State 2110, 相手と重なった時の処理]
type = PlayerPush
trigger1 = AnimElemTime(2) > 0 && AnimElemtime(8) <= 5
value = 0

[State 3110, 1]
type = Turn
trigger1 = AnimElem = 12

[State -3, 成功したときの残像]
type = AfterImage
trigger1 = AnimElem = 1
time = 225
trans = add1
timegap = 4
framegap = 1
length = 3
palbright = 100,0,0
palcontrast = 0,0,0
paladd = 100,-50,-50

[State 2000]
type = AssertSpecial
trigger1 = AnimElemtime(1) >= 0 && AnimElemtime(21) <= 0
flag = NoFG
flag2 = NOBG
ignorehitpause = 1

[State 2100,]
type = Envcolor
trigger1 = AnimElem =19
time = 2
value = 255,255,255
under = 0

[State 200, ヒット定義]
type = HitDef
trigger1 = time = 0
attr = S, HA
damage    = 50, 0
getpower  = 0
givepower = 10,10
animtype = Hard
hitflag = MAF
priority = 3, Hit
pausetime = 0, 0
sparkno = 202
sparkxy = -20, -70
hitsound = s1,4+(var(11)*10)
guardsound = s2,1+(var(11)*10)
ground.type = High
ground.slidetime = 20
ground.hittime  = 21
ground.velocity = 0
air.type = High
air.velocity = -8,-8
fall = 1
fall.recover = 0
palfx.time = 200
palfx.add = 30,-40,-140
palfx.sinadd = 60,60,50,10
palfx.color = 0
palfx.invertall = 1
p2stateno = 4650
kill = 0
envshake.time = 4
envshake.ampl = 4
envshake.freq = 100

;燃え小エフェクト
[State 1000, ヘルパーを出す]
type = null;Helper
trigger1 = movehit = 1
name = "hit"
stateno = 4910
ID = 4910
helpertype = normal
pos = 0,0
postype = p2
keyctrl = 0
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 1000, ヘルパーを出す]
type = Helper
trigger1 = AnimElem = 19
name = "BOM"
stateno = 4630
ID = 4630
helpertype = normal
pos = 0,-70
postype = p2
facing = 1
keyctrl = 0
ownpal = 1

[State -2,]
type = Explod
trigger1 = AnimElemtime(1) >= 0 && AnimElemtime(22) < 0
trigger1 = Random < 100
anim = 10073
pos = -20,-40
postype = p2
sprpriority = 6
bindtime = 1
random = 60,60
ownpal = 1

[State 2000, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; チェーンドライブ -code blood-　トドメヘルパー

[Statedef 4630]
type     = A
movetype = A
physics  = N
juggle   = 0
ctrl     = 0
anim     = 4511
sprpriority = 15

[State 1001, 特殊効果]
type = AssertSpecial
trigger1 = 1
flag = NoShadow ;影を消す

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = time = 0
value = s13,1

[State 810, エフェクト表示]
type = Explod
trigger1 = time = 0
anim = 10075
postype = P1
pos = 0,0
sprpriority = 10
ownpal = 1

[State 200, ヒット定義]
type = HitDef
trigger1 = time = 0
attr = A, HP
damage    = ceil(200*root,fvar(5)), 0
getpower  = 0
givepower = 10,10
animtype = Hard
hitflag = MAF
priority = 3, Hit
pausetime = 0,10+root,var(0)
sparkno = -1
hitsound = -1
ground.type = High
ground.slidetime = 20
ground.hittime  = 21
ground.velocity = -5
air.type = High
air.velocity = -5,-5
air.fall = 1
fall.recover = 0
palfx.time = 95
palfx.add = 30,-40,-140
palfx.sinadd = 60,60,50,10
palfx.color = 0
palfx.invertall = 1
envshake.time = 10
envshake.ampl = 7
envshake.freq = 100
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
p2stateno = 5640

;ガードクラッシュ値削り
[state a]
type = parentvaradd
trigger1 = moveguarded = 1
fvar(10) = 16

;ガードクラッシュ値回復不能時間
[State 1000, 0]
type = ParentVarSet
triggerall = fvar(11) != 180
triggerall = roundstate = 2
trigger1 = moveguarded = 1
fvar(11) = 180

;スロー処理
[State 1000, ヘルパーを出す]
type = null;Helper
trigger1 = Movehit = 1
name = "Slow"
stateno = 4900
ID = 4900
helpertype = normal
pos = 0,0
postype = p1
keyctrl = 0
ownpal = 1
ignorehitpause = 1
persistent = 0

;燃え小エフェクト
[State 1000, ヘルパーを出す]
type = null;Helper
trigger1 = movehit = 1
name = "hit"
stateno = 4910
ID = 4910
helpertype = normal
pos = 0,0
postype = p2
keyctrl = 0
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 1001, このヘルパーを消す]
type = DestroySelf
trigger1 = AnimTime = 0

;---------------------------------------------------------------------------
;相手動作(ワンインチヒット)
[Statedef 4650]
type    = S
movetype= H
physics = S
velset = 0,0

[State 52, 1]
type = VelSet
trigger1 = time = 5
x = -13
y = 0

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = Helper(100000),var(0)

[State 1830]
type = ChangeAnim2
Trigger1 = Time = 0
value = 4630

[State 1830]
type = SelfState
trigger1 = Animtime = 0
value = 0
ctrl = 1

;この下、一行以上空ける事。

;---------------------------------------------------------------------------
;削りKO
[Statedef 35950]
physics = S
movetype = H
ctrl = 0
velset = 0,0

[State 860, 4]
type = NotHitBy
trigger1 = 1
value = SCA

;KO?イス
[State 00]
type = PlaySnd
trigger1 = time = 0
trigger1 = var(19) := 1
value = s11+(var(7)*10),3

[State 860, 4]
type = PosSet
trigger1 = 1
y = Helper(100000),var(0)

[State 190, 4]
type = ChangeAnim
trigger1 = !HitOver
value = ifelse(statetype = S,5010,5020)

[State 190, 4]
type = ChangeAnim
trigger1 = HitOver
value = 5950
persistent = 0

[State 1100, ChangeState]
type = ChangeState
trigger1 = animelem = 10,>=20
value = 5150

